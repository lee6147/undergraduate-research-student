<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>í•™ìŠµ ì•± ëŸ°ì²˜ â€” STUDY HUB</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;800;900&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html, body, #root { min-height: 100vh; }
  body { background: #030712; }
  ::-webkit-scrollbar { width: 5px; height: 5px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
  input::placeholder { color: #475569; }
  @keyframes gridPulse { 0%,100%{opacity:0.03}
  @keyframes lFadeUp { from{opacity:0;transform:translateY(20px)}
  @keyframes slowSpin { 0%{transform:rotateX(-15deg) rotateY(25deg)}
  @keyframes orbit2 { 0%{transform:rotate(120deg) translateX(${size*0.35}
  @keyframes lScan { 0%{top:-2px;opacity:0}
  @keyframes lGlowPulse { 0%,100%{box-shadow:0 0 20px #6366f115;border-color:#6366f120}
  @keyframes orbitalSpin {
          from { transform: rotate(0deg); }
  @keyframes qPulse { 0%,100%{box-shadow:0 0 4px ${Q.glow}
  @keyframes fadeSlideUp {
          from { opacity: 0; transform: translateY(20px); }
  @keyframes qFloat { 0%,100%{transform:translateY(0) scale(1);opacity:0.3}
  @keyframes scanLine { 0%{top:-2px}
  @keyframes corePulse { 0%,100%{transform:scale(1);box-shadow:0 0 ${size*0.15}
  @keyframes qWave { 0%{d:path('M0,50 Q25,30 50,50 T100,50')}
  @keyframes lShimmer { 0%{background-position:-200% center}
  @keyframes orbit3 { 0%{transform:rotate(240deg) translateX(${size*0.3}
  @keyframes lPulse { 0%,100%{opacity:0.03}
  @keyframes lFloat { 0%,100%{transform:translateY(0) scale(1);opacity:0.2}
  @keyframes lCardEnter { from{opacity:0;transform:translateY(16px) scale(0.97)}
  @keyframes orbit1 { 0%{transform:rotate(0deg) translateX(${size*0.4}
  @keyframes floatParticle {
          0%, 100% { transform: translateY(0) translateX(0); opacity: 0.15; }
  @keyframes qOrbit { 0%{transform:rotate(0deg) translateX(40px) rotate(0deg)}
  @keyframes shimmer {
          0% { background-position: -200% center; }
  @keyframes lOrbit { from{transform:rotate(0deg)}
  @keyframes shake { 0%,100%{transform:translateX(0)}
  @keyframes pulseRing {
          0%, 100% { transform: scale(1); opacity: 0.4; }
</style>
</head>
<body>
<div id="root"></div>
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.3.1/umd/react.production.min.js"></script>
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.3.1/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.26.4/babel.min.js"></script>
<script type="text/babel">
const { useState, useMemo, useEffect, useRef } = React;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ“š í•™ìŠµ ì•± ëŸ°ì²˜ v4 â€” Quantum Cyber Edition
   
   âœ… ì•± ì¶”ê°€: í•˜ë‹¨ì— ì»´í¬ë„ŒíŠ¸ â†’ appRegistryì— ë“±ë¡ â†’ ë
   âœ… ì¹´í…Œê³ ë¦¬ ì¶”ê°€: CATEGORIESì— ìƒˆ í•­ëª© ì¶”ê°€
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

const CATEGORIES = {
  all:      { label: "ì „ì²´",     icon: "ğŸ“š", color: "#8888a0" },
  quantum:  { label: "ì–‘ì",     icon: "âš›ï¸", color: "#38bdf8" },
  semi:     { label: "ë°˜ë„ì²´",   icon: "ğŸ”¬", color: "#a78bfa" },
  physics:  { label: "ë¬¼ë¦¬",     icon: "ğŸŒ€", color: "#f472b6" },
  math:     { label: "ìˆ˜í•™",     icon: "ğŸ“", color: "#fb923c" },
  cs:       { label: "ì»´í“¨í„°",   icon: "ğŸ’»", color: "#34d399" },
  etc:      { label: "ê¸°íƒ€",     icon: "ğŸ“¦", color: "#fbbf24" },
};

const appRegistry = [
  {
    id: "bqb-beginner",
    title: "BQB ì´ˆë³´ì ê°€ì´ë“œ",
    desc: "ë°˜ë„ì²´ íë¹„íŠ¸ ëŒ€ê·œëª¨ ë°°ì—´ì˜ í•µì‹¬ ê¸°ìˆ ì„ ë¹„ìœ ë¡œ ì´í•´í•˜ê¸°",
    icon: "âš›ï¸",
    color: "#38bdf8",
    category: "quantum",
    tags: ["BQB", "íë¹„íŠ¸", "ë°°ì—´", "ì´ˆë³´", "ì…ë¬¸"],
    component: BQBBeginnerGuide,
  },
  {
    id: "bqb-intermediate",
    title: "BQB ì¤‘ê¸‰ ê°€ì´ë“œ",
    desc: "ê³µì •ì°½Â·Triple-WallÂ·íë£¨í”„ì˜ ì •ëŸ‰ì  ì´í•´",
    icon: "ğŸ”¬",
    color: "#6366f1",
    category: "quantum",
    tags: ["BQB", "ê³µì •ì°½", "Triple-Wall", "íë£¨í”„", "ì¤‘ê¸‰"],
    component: BQBIntermediateGuide,
  },
  {
    id: "quantum-world",
    title: "Quantum World Explorer",
    desc: "ì–‘ìì—­í•™ í•µì‹¬ ê°œë…ì„ ì¸í„°ë™í‹°ë¸Œ ì‹œê°í™”ë¡œ íƒí—˜",
    icon: "ğŸŒŒ",
    color: "#06b6d4",
    category: "quantum",
    tags: ["ì–‘ìì—­í•™", "ì¤‘ì²©", "ì–½í˜", "í„°ë„ë§", "ì¸¡ì •", "ë¶ˆí™•ì •ì„±"],
    component: QuantumWorldExplorer,
  },
  {
    id: "bqb-advanced",
    title: "BQB ê³ ê¸‰ ê°€ì´ë“œ",
    desc: "ì„¤ê³„ ê·œì¹™Â·íšŒë¡œ ì•„í‚¤í…ì²˜Â·ì—´ì„¤ê³„Â·KPI â€” ì—”ì§€ë‹ˆì–´ë§ ë ˆí¼ëŸ°ìŠ¤",
    icon: "ğŸ”§",
    color: "#58a6ff",
    category: "quantum",
    tags: ["BQB", "ê³ ê¸‰", "PDK", "DD-IC", "Triple-Wall", "ì—´ì„¤ê³„", "KPI", "ì„¤ê³„ê·œì¹™"],
    component: BQBAdvancedGuide,
  },
];

const T = {
  bg: "#030712", bgSub: "#0a0e1a", card: "#0d1321", cardHover: "#131b2e",
  surface: "#1a2236", accent: "#6366f1", accentCyan: "#22d3ee", accentPink: "#e879f9",
  text: "#e2e8f0", textDim: "#94a3b8", textMuted: "#475569",
  border: "#1e293b", borderLight: "#334155",
  glow: "#6366f1",
};

/* â”€â”€â”€ ëŸ°ì²˜ ë°°ê²½ íŒŒí‹°í´ â”€â”€â”€ */
function LauncherBG() {
  return (
    <div style={{ position: "fixed", inset: 0, zIndex: 0, pointerEvents: "none", overflow: "hidden" }}>
      <style>{`
        @keyframes lFloat { 0%,100%{transform:translateY(0) scale(1);opacity:0.2} 50%{transform:translateY(-25px) scale(1.4);opacity:0.5} }
        @keyframes lScan { 0%{top:-2px;opacity:0} 10%{opacity:1} 90%{opacity:1} 100%{top:100%;opacity:0} }
        @keyframes lPulse { 0%,100%{opacity:0.03} 50%{opacity:0.07} }
        @keyframes lOrbit { from{transform:rotate(0deg)} to{transform:rotate(360deg)} }
        @keyframes lShimmer { 0%{background-position:-200% center} 100%{background-position:200% center} }
        @keyframes lFadeUp { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }
        @keyframes lGlowPulse { 0%,100%{box-shadow:0 0 20px #6366f115;border-color:#6366f120} 50%{box-shadow:0 0 40px #6366f125;border-color:#6366f140} }
        @keyframes lCardEnter { from{opacity:0;transform:translateY(16px) scale(0.97)} to{opacity:1;transform:translateY(0) scale(1)} }
      `}</style>
      {/* Grid */}
      <div style={{
        position: "absolute", inset: 0,
        backgroundImage: `linear-gradient(${T.glow}06 1px, transparent 1px), linear-gradient(90deg, ${T.glow}06 1px, transparent 1px)`,
        backgroundSize: "80px 80px",
        animation: "lPulse 10s ease-in-out infinite",
      }} />
      {/* Ambient glow orbs */}
      <div style={{ position: "absolute", top: -200, left: "20%", width: 500, height: 500, borderRadius: "50%", background: `radial-gradient(circle, ${T.accentCyan}06, transparent 70%)`, filter: "blur(40px)" }} />
      <div style={{ position: "absolute", bottom: -200, right: "10%", width: 600, height: 600, borderRadius: "50%", background: `radial-gradient(circle, ${T.accentPink}05, transparent 70%)`, filter: "blur(40px)" }} />
      <div style={{ position: "absolute", top: "40%", left: "60%", width: 400, height: 400, borderRadius: "50%", background: `radial-gradient(circle, ${T.glow}04, transparent 70%)`, filter: "blur(30px)" }} />
      {/* Particles */}
      {Array.from({ length: 25 }).map((_, i) => (
        <div key={i} style={{
          position: "absolute",
          left: `${(i * 41 + 7) % 100}%`,
          top: `${(i * 59 + 13) % 100}%`,
          width: i % 4 === 0 ? 3 : 2,
          height: i % 4 === 0 ? 3 : 2,
          borderRadius: "50%",
          background: [T.accentCyan, T.glow, T.accentPink, "#4ade80"][i % 4],
          animation: `lFloat ${4 + (i % 5) * 1.5}s ease-in-out ${i * 0.4}s infinite`,
        }} />
      ))}
      {/* Scan line */}
      <div style={{
        position: "absolute", left: 0, right: 0, height: 1,
        background: `linear-gradient(90deg, transparent, ${T.accentCyan}15, transparent)`,
        animation: "lScan 15s linear infinite",
      }} />
    </div>
  );
}

/* â”€â”€â”€ ë¡œê³  ì•„í†° ì• ë‹ˆë©”ì´ì…˜ â”€â”€â”€ */
function LogoAtom() {
  const orbitColors = [T.accentCyan, T.glow, T.accentPink];
  return (
    <div style={{ position: "relative", width: 56, height: 56, flexShrink: 0 }}>
      {/* Orbital rings */}
      {[0, 60, -60].map((rot, i) => (
        <div key={i} style={{
          position: "absolute", inset: 4,
          borderRadius: "50%",
          border: `1.5px solid ${orbitColors[i]}20`,
          transform: `rotate(${rot}deg)`,
        }} />
      ))}
      {/* Electrons */}
      {orbitColors.map((c, i) => (
        <div key={`e${i}`} style={{
          position: "absolute", top: "50%", left: "50%",
          width: 5, height: 5, marginLeft: -2.5, marginTop: -2.5,
          borderRadius: "50%", background: c,
          boxShadow: `0 0 8px ${c}80`,
          animation: `lOrbit ${3 + i * 1.5}s linear infinite`,
          transformOrigin: `0 ${20 + i * 4}px`,
        }} />
      ))}
      {/* Core */}
      <div style={{
        position: "absolute", top: "50%", left: "50%",
        transform: "translate(-50%,-50%)",
        width: 14, height: 14, borderRadius: "50%",
        background: `radial-gradient(circle, ${T.glow}, ${T.accentCyan}80)`,
        boxShadow: `0 0 16px ${T.glow}50, 0 0 32px ${T.accentCyan}20`,
      }} />
    </div>
  );
}

function App() {
  const [activeApp, setActiveApp] = useState(null);
  const [search, setSearch] = useState("");
  const [category, setCategory] = useState("all");
  const [showHelp, setShowHelp] = useState(false);
  const [hoveredCard, setHoveredCard] = useState(null);

  const filtered = useMemo(() => {
    let list = appRegistry;
    if (category !== "all") list = list.filter(a => a.category === category);
    if (search.trim()) {
      const q = search.toLowerCase();
      list = list.filter(a => a.title.toLowerCase().includes(q) || a.desc.toLowerCase().includes(q) || a.tags.some(t => t.toLowerCase().includes(q)));
    }
    return list;
  }, [search, category]);

  const catCounts = useMemo(() => {
    const c = { all: appRegistry.length };
    appRegistry.forEach(a => { c[a.category] = (c[a.category] || 0) + 1; });
    return c;
  }, []);

  const font = "'Noto Sans KR', system-ui, -apple-system, sans-serif";

  /* â•â•â• ì•± ì‹¤í–‰ ë·° â•â•â• */
  if (activeApp) {
    const app = appRegistry.find(a => a.id === activeApp);
    const Comp = app.component;
    const catColor = CATEGORIES[app.category]?.color || T.accent;
    return (
      <div style={{ minHeight: "100vh", background: T.bg, fontFamily: font }}>
        <div style={{
          position: "sticky", top: 0, zIndex: 100,
          background: `${T.bg}e8`, backdropFilter: "blur(20px)",
          borderBottom: `1px solid ${T.border}`, padding: "0 16px",
        }}>
          <div style={{ maxWidth: 720, margin: "0 auto", display: "flex", alignItems: "center", gap: 12, height: 52 }}>
            <button onClick={() => setActiveApp(null)} style={{
              background: `${T.accent}10`, border: `1px solid ${T.accent}30`,
              color: T.accent, borderRadius: 10, padding: "7px 16px",
              cursor: "pointer", fontSize: 13, fontWeight: 700,
              transition: "all 0.2s",
            }}>â† ëª©ë¡</button>
            <div style={{ width: 1, height: 24, background: T.border }} />
            <span style={{ fontSize: 18 }}>{app.icon}</span>
            <span style={{ fontSize: 14, fontWeight: 700, color: T.text }}>{app.title}</span>
            <span style={{
              fontSize: 10, color: catColor,
              background: `${catColor}12`, padding: "3px 10px",
              borderRadius: 20, fontWeight: 600, border: `1px solid ${catColor}20`,
            }}>{CATEGORIES[app.category]?.label}</span>
          </div>
        </div>
        <Comp />
      </div>
    );
  }

  /* â•â•â• ì‚¬ìš© ê°€ì´ë“œ â•â•â• */
  if (showHelp) {
    return (
      <div style={{ minHeight: "100vh", background: T.bg, fontFamily: font, color: T.text, position: "relative" }}>
        <LauncherBG />
        <div style={{ position: "relative", zIndex: 1, maxWidth: 600, margin: "0 auto", padding: "24px 20px 80px" }}>
          <button onClick={() => setShowHelp(false)} style={{
            background: `${T.accent}10`, border: `1px solid ${T.accent}30`,
            color: T.accent, borderRadius: 10, padding: "7px 16px",
            cursor: "pointer", fontSize: 13, fontWeight: 700, marginBottom: 32,
          }}>â† ëŒì•„ê°€ê¸°</button>
          <div style={{ fontSize: 10, fontWeight: 800, color: T.accentCyan, letterSpacing: 4, marginBottom: 8 }}>USER MANUAL</div>
          <h1 style={{ fontSize: 28, fontWeight: 900, marginBottom: 8, background: `linear-gradient(135deg, ${T.text}, ${T.accentCyan})`, WebkitBackgroundClip: "text", WebkitTextFillColor: "transparent" }}>ì‚¬ìš© ê°€ì´ë“œ</h1>
          <p style={{ fontSize: 14, color: T.textDim, lineHeight: 1.8, marginBottom: 40 }}>ì´ ëŸ°ì²˜ì˜ ëª¨ë“  ê²ƒì„ ì„¤ëª…í•©ë‹ˆë‹¤.</p>
          {[
            { num: "1", title: "ì‹¤í–‰í•˜ëŠ” ë²•", color: "#4ade80", content: ["ì´ íŒŒì¼(Launcher.jsx)ì„ Claude ì±„íŒ…ì—ì„œ ì—´ë©´ ë°”ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.", "í™ˆ í™”ë©´ì—ì„œ ì›í•˜ëŠ” ì•± ì¹´ë“œë¥¼ í´ë¦­í•˜ë©´ í•´ë‹¹ ì•±ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.", "ìƒë‹¨ì˜ â† ëª©ë¡ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í™ˆìœ¼ë¡œ ëŒì•„ì˜µë‹ˆë‹¤."] },
            { num: "2", title: "ì•± ì°¾ëŠ” ë²•", color: "#22d3ee", content: ["ê²€ìƒ‰ì°½ì— í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ë©´ ì œëª©, ì„¤ëª…, íƒœê·¸ì—ì„œ ê²€ìƒ‰ë©ë‹ˆë‹¤.", "ì¹´í…Œê³ ë¦¬ íƒ­ì„ ëˆŒëŸ¬ ë¶„ì•¼ë³„ë¡œ í•„í„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.", "ì˜ˆ: 'íë¹„íŠ¸' ê²€ìƒ‰ â†’ BQB ê´€ë ¨ ì•±ë§Œ í‘œì‹œ"] },
            { num: "3", title: "ìƒˆ ì•± ì¶”ê°€í•˜ëŠ” ë²•", color: "#a78bfa", content: ["Claudeì—ê²Œ \"â—‹â—‹ ì•± ë§Œë“¤ì–´ì„œ ëŸ°ì²˜ì— ì¶”ê°€í•´ì¤˜\"ë¼ê³  ë§í•˜ë©´ ë©ë‹ˆë‹¤.", "Claudeê°€ ì•± ì½”ë“œë¥¼ ì‘ì„±í•˜ê³ , ì´ ëŸ°ì²˜ íŒŒì¼ì— ìë™ìœ¼ë¡œ ë“±ë¡í•©ë‹ˆë‹¤.", "ìƒˆë¡œ ë§Œë“  ì•±ì€ í™ˆ í™”ë©´ì— ë°”ë¡œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤."] },
            { num: "4", title: "ìˆ˜ì •/ê°œì„ í•˜ëŠ” ë²•", color: "#fb923c", content: ["\"â—‹â—‹ ì•±ì—ì„œ â–³â–³ ë¶€ë¶„ ìˆ˜ì •í•´ì¤˜\"ë¼ê³  ë§í•˜ë©´ ë©ë‹ˆë‹¤.", "Claudeê°€ í•´ë‹¹ ë¶€ë¶„ì„ ì°¾ì•„ì„œ ìˆ˜ì •í•œ í›„ ì—…ë°ì´íŠ¸ëœ ëŸ°ì²˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤.", "ë””ìì¸, ë‚´ìš©, ì¸í„°ë™ì…˜ ëª¨ë‘ ìˆ˜ì • ê°€ëŠ¥í•©ë‹ˆë‹¤."] },
            { num: "5", title: "ì¹´í…Œê³ ë¦¬ í™•ì¥í•˜ëŠ” ë²•", color: "#f472b6", content: ["í˜„ì¬: ì–‘ì, ë°˜ë„ì²´, ë¬¼ë¦¬, ìˆ˜í•™, ì»´í“¨í„°, ê¸°íƒ€", "\"â—‹â—‹ ì¹´í…Œê³ ë¦¬ ì¶”ê°€í•´ì¤˜\"ë¼ê³  í•˜ë©´ Claudeê°€ ì¶”ê°€í•©ë‹ˆë‹¤.", "ì¹´í…Œê³ ë¦¬ëŠ” ë¬´ì œí•œ í™•ì¥ ê°€ëŠ¥í•©ë‹ˆë‹¤."] },
          ].map(s => (
            <div key={s.num} style={{
              background: `${s.color}06`, borderRadius: 14,
              border: `1px solid ${s.color}18`, padding: 24, marginBottom: 14,
              borderLeft: `3px solid ${s.color}60`,
              animation: "lFadeUp 0.4s ease forwards",
              animationDelay: `${parseInt(s.num) * 0.08}s`,
            }}>
              <div style={{ display: "flex", alignItems: "center", gap: 12, marginBottom: 14 }}>
                <div style={{
                  width: 32, height: 32, borderRadius: 8,
                  background: `${s.color}15`, color: s.color,
                  display: "flex", alignItems: "center", justifyContent: "center",
                  fontSize: 14, fontWeight: 900, border: `1px solid ${s.color}25`,
                }}>{s.num}</div>
                <div style={{ fontSize: 16, fontWeight: 800, color: s.color }}>{s.title}</div>
              </div>
              {s.content.map((line, i) => (
                <div key={i} style={{ display: "flex", gap: 10, alignItems: "flex-start", marginBottom: i < s.content.length - 1 ? 8 : 0 }}>
                  <div style={{ width: 4, height: 4, borderRadius: "50%", background: `${s.color}50`, marginTop: 9, flexShrink: 0 }} />
                  <div style={{ fontSize: 13, color: T.textDim, lineHeight: 1.7 }}>{line}</div>
                </div>
              ))}
            </div>
          ))}
          <div style={{
            background: `${T.glow}06`, borderRadius: 14,
            border: `1px dashed ${T.glow}25`, padding: 24, textAlign: "center", marginTop: 8,
          }}>
            <div style={{ fontSize: 20, marginBottom: 8 }}>ğŸ’¬</div>
            <div style={{ fontSize: 13, color: T.textDim, lineHeight: 1.8 }}>
              ìš”ì•½: <strong style={{ color: T.accentCyan }}>Claudeì—ê²Œ ë§í•˜ë©´ ë‹¤ ë©ë‹ˆë‹¤.</strong><br />
              ë§Œë“¤ê¸°, ìˆ˜ì •, ì‚­ì œ, ì¹´í…Œê³ ë¦¬ ì¶”ê°€ ì „ë¶€ ëŒ€í™”ë¡œ í•´ê²°.
            </div>
          </div>
        </div>
      </div>
    );
  }

  /* â•â•â• í™ˆ í™”ë©´ â•â•â• */
  return (
    <div style={{ minHeight: "100vh", background: T.bg, fontFamily: font, color: T.text, position: "relative" }}>
      <LauncherBG />

      <div style={{ position: "relative", zIndex: 1 }}>
        {/* â”€â”€â”€ HEADER â”€â”€â”€ */}
        <div style={{ padding: "52px 20px 0" }}>
          <div style={{ maxWidth: 640, margin: "0 auto" }}>
            <div style={{ display: "flex", justifyContent: "space-between", alignItems: "flex-start" }}>
              <div style={{ display: "flex", gap: 16, alignItems: "center" }}>
                <LogoAtom />
                <div>
                  <div style={{
                    fontSize: 10, fontWeight: 800, letterSpacing: 5,
                    color: T.accentCyan, marginBottom: 6,
                  }}>STUDY HUB</div>
                  <h1 style={{
                    fontSize: 30, fontWeight: 900, margin: 0, lineHeight: 1.2,
                    background: `linear-gradient(135deg, ${T.text} 0%, ${T.accentCyan} 50%, ${T.accentPink} 100%)`,
                    WebkitBackgroundClip: "text", WebkitTextFillColor: "transparent",
                    backgroundSize: "200% auto",
                    animation: "lShimmer 6s linear infinite",
                  }}>í•™ìŠµ ì•± ëŸ°ì²˜</h1>
                </div>
              </div>
              <button onClick={() => setShowHelp(true)} style={{
                background: `${T.glow}08`, border: `1px solid ${T.glow}20`,
                borderRadius: 10, padding: "8px 14px", cursor: "pointer",
                fontSize: 12, fontWeight: 700, color: T.textDim,
                display: "flex", alignItems: "center", gap: 5,
                transition: "all 0.2s",
              }}>
                <span style={{ fontSize: 14, color: T.glow }}>?</span> ê°€ì´ë“œ
              </button>
            </div>

            {/* â”€â”€â”€ Stats bar â”€â”€â”€ */}
            <div style={{
              display: "flex", gap: 16, marginTop: 20, padding: "12px 0",
              borderTop: `1px solid ${T.border}`, borderBottom: `1px solid ${T.border}`,
            }}>
              {[
                { label: "ë“±ë¡ ì•±", value: appRegistry.length, color: T.accentCyan },
                { label: "ì¹´í…Œê³ ë¦¬", value: Object.keys(catCounts).filter(k => k !== "all" && catCounts[k] > 0).length, color: T.glow },
              ].map((s, i) => (
                <div key={i} style={{ display: "flex", alignItems: "baseline", gap: 6 }}>
                  <span style={{ fontSize: 20, fontWeight: 900, color: s.color, fontFamily: "'JetBrains Mono', monospace" }}>{s.value}</span>
                  <span style={{ fontSize: 11, color: T.textMuted, fontWeight: 600 }}>{s.label}</span>
                </div>
              ))}
            </div>

            {/* â”€â”€â”€ SEARCH â”€â”€â”€ */}
            <div style={{ marginTop: 20, position: "relative" }}>
              <div style={{
                position: "absolute", left: 16, top: "50%", transform: "translateY(-50%)",
                fontSize: 15, color: T.textMuted, pointerEvents: "none", opacity: 0.6,
              }}>âŒ•</div>
              <input
                type="text" value={search}
                onChange={e => setSearch(e.target.value)}
                placeholder="ì•± ì´ë¦„, í‚¤ì›Œë“œ, íƒœê·¸ë¡œ ê²€ìƒ‰..."
                style={{
                  width: "100%", boxSizing: "border-box",
                  background: `${T.card}cc`,
                  border: `1px solid ${T.border}`,
                  borderRadius: 12, padding: "13px 16px 13px 42px",
                  fontSize: 14, color: T.text, outline: "none",
                  backdropFilter: "blur(8px)",
                  transition: "all 0.3s",
                  animation: "lGlowPulse 4s ease-in-out infinite",
                }}
                onFocus={e => {
                  e.target.style.borderColor = `${T.accentCyan}50`;
                  e.target.style.boxShadow = `0 0 24px ${T.accentCyan}15`;
                }}
                onBlur={e => {
                  e.target.style.borderColor = T.border;
                  e.target.style.boxShadow = `0 0 20px ${T.glow}15`;
                }}
              />
              {search && (
                <button onClick={() => setSearch("")} style={{
                  position: "absolute", right: 10, top: "50%", transform: "translateY(-50%)",
                  background: `${T.textMuted}20`, border: "none", borderRadius: 6,
                  width: 24, height: 24, cursor: "pointer", color: T.textDim, fontSize: 12,
                  display: "flex", alignItems: "center", justifyContent: "center",
                }}>âœ•</button>
              )}
            </div>

            {/* â”€â”€â”€ CATEGORY TABS â”€â”€â”€ */}
            <div style={{ display: "flex", gap: 6, marginTop: 14, paddingBottom: 20, overflowX: "auto" }}>
              {Object.entries(CATEGORIES).map(([id, cat]) => {
                const count = catCounts[id] || 0;
                const active = category === id;
                if (id !== "all" && count === 0) return null;
                return (
                  <button key={id} onClick={() => setCategory(id)} style={{
                    background: active ? `${cat.color}12` : `${T.card}80`,
                    border: `1px solid ${active ? `${cat.color}35` : T.border}`,
                    borderRadius: 20, padding: "7px 14px",
                    cursor: "pointer", whiteSpace: "nowrap",
                    display: "flex", alignItems: "center", gap: 6,
                    transition: "all 0.25s",
                    boxShadow: active ? `0 0 16px ${cat.color}12` : "none",
                  }}>
                    <span style={{ fontSize: 13 }}>{cat.icon}</span>
                    <span style={{ fontSize: 11, fontWeight: active ? 700 : 500, color: active ? cat.color : T.textDim }}>{cat.label}</span>
                    <span style={{
                      fontSize: 9, fontWeight: 700,
                      color: active ? cat.color : T.textMuted,
                      background: active ? `${cat.color}18` : `${T.textMuted}12`,
                      borderRadius: 10, padding: "1px 6px",
                      minWidth: 16, textAlign: "center",
                    }}>{count}</span>
                  </button>
                );
              })}
            </div>
          </div>
        </div>

        {/* â”€â”€â”€ CONTENT â”€â”€â”€ */}
        <div style={{ maxWidth: 640, margin: "0 auto", padding: "0 20px 80px" }}>
          {filtered.length === 0 ? (
            /* ë¹ˆ ê²€ìƒ‰ ê²°ê³¼ */
            <div style={{ textAlign: "center", padding: "60px 20px", color: T.textMuted }}>
              <div style={{ fontSize: 48, marginBottom: 16, opacity: 0.3 }}>âŒ•</div>
              <div style={{ fontSize: 15, fontWeight: 700, marginBottom: 6, color: T.textDim }}>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</div>
              <div style={{ fontSize: 13 }}>ë‹¤ë¥¸ í‚¤ì›Œë“œë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”</div>
            </div>
          ) : (
            /* ì•± ì¹´ë“œ ê·¸ë¦¬ë“œ */
            <div style={{
              display: "grid",
              gridTemplateColumns: "repeat(auto-fill, minmax(280px, 1fr))",
              gap: 12,
            }}>
              {filtered.map((app, idx) => {
                const isHovered = hoveredCard === app.id;
                const catColor = CATEGORIES[app.category]?.color || T.accent;
                return (
                  <div
                    key={app.id}
                    onClick={() => setActiveApp(app.id)}
                    onMouseEnter={() => setHoveredCard(app.id)}
                    onMouseLeave={() => setHoveredCard(null)}
                    style={{
                      position: "relative",
                      background: isHovered ? T.cardHover : T.card,
                      border: `1px solid ${isHovered ? `${app.color}30` : T.border}`,
                      borderRadius: 16, padding: 22,
                      cursor: "pointer",
                      transition: "all 0.3s ease",
                      transform: isHovered ? "translateY(-3px)" : "none",
                      boxShadow: isHovered
                        ? `0 8px 32px ${app.color}12, 0 0 0 1px ${app.color}15, inset 0 1px 0 ${app.color}08`
                        : "none",
                      animation: "lCardEnter 0.4s ease forwards",
                      animationDelay: `${idx * 0.06}s`,
                      opacity: 0,
                      overflow: "hidden",
                    }}
                  >
                    {/* Card glow orb */}
                    <div style={{
                      position: "absolute", top: -40, right: -40,
                      width: 120, height: 120, borderRadius: "50%",
                      background: `radial-gradient(circle, ${app.color}${isHovered ? "10" : "04"}, transparent 70%)`,
                      transition: "all 0.3s", pointerEvents: "none",
                    }} />
                    {/* Bottom accent line */}
                    <div style={{
                      position: "absolute", bottom: 0, left: 20, right: 20, height: 1,
                      background: `linear-gradient(90deg, transparent, ${app.color}${isHovered ? "40" : "10"}, transparent)`,
                      transition: "all 0.3s",
                    }} />

                    <div style={{ position: "relative", zIndex: 1 }}>
                      {/* Top: icon + category */}
                      <div style={{ display: "flex", alignItems: "center", justifyContent: "space-between", marginBottom: 14 }}>
                        <div style={{
                          width: 44, height: 44, borderRadius: 12,
                          background: `${app.color}10`, border: `1px solid ${app.color}20`,
                          display: "flex", alignItems: "center", justifyContent: "center",
                          fontSize: 22, transition: "all 0.3s",
                          boxShadow: isHovered ? `0 0 20px ${app.color}18` : "none",
                        }}>{app.icon}</div>
                        <span style={{
                          fontSize: 9, fontWeight: 700, color: catColor,
                          background: `${catColor}10`, padding: "3px 8px",
                          borderRadius: 6, border: `1px solid ${catColor}15`,
                          letterSpacing: 0.5,
                        }}>{CATEGORIES[app.category]?.label}</span>
                      </div>

                      {/* Title */}
                      <div style={{ fontSize: 15, fontWeight: 800, color: T.text, marginBottom: 6, lineHeight: 1.3 }}>
                        {app.title}
                      </div>

                      {/* Description */}
                      <div style={{
                        fontSize: 12, color: T.textDim, lineHeight: 1.6,
                        marginBottom: 12,
                        display: "-webkit-box", WebkitLineClamp: 2, WebkitBoxOrient: "vertical",
                        overflow: "hidden",
                      }}>{app.desc}</div>

                      {/* Tags */}
                      <div style={{ display: "flex", gap: 4, flexWrap: "wrap" }}>
                        {app.tags.slice(0, 4).map(tag => (
                          <span key={tag} style={{
                            fontSize: 9, color: T.textMuted,
                            background: `${T.textMuted}0a`, padding: "2px 7px",
                            borderRadius: 4, border: `1px solid ${T.textMuted}10`,
                          }}>#{tag}</span>
                        ))}
                        {app.tags.length > 4 && (
                          <span style={{ fontSize: 9, color: T.textMuted, padding: "2px 4px" }}>
                            +{app.tags.length - 4}
                          </span>
                        )}
                      </div>
                    </div>
                  </div>
                );
              })}
            </div>
          )}

          {/* Footer */}
          <div style={{
            marginTop: 24, padding: "20px",
            background: `${T.glow}04`, borderRadius: 14,
            border: `1px dashed ${T.glow}15`, textAlign: "center",
          }}>
            <div style={{ fontSize: 13, color: T.textMuted, lineHeight: 1.8 }}>
              <span style={{ color: T.accentCyan, fontWeight: 700 }}>+</span> Claudeì—ê²Œ <strong style={{ color: T.textDim }}>"â—‹â—‹ ì•± ë§Œë“¤ì–´ì¤˜"</strong>
              <span style={{ margin: "0 10px", color: T.border }}>â”‚</span>
              <span style={{ color: T.accentPink, fontWeight: 700 }}>âœ</span> <strong style={{ color: T.textDim }}>"â—‹â—‹ ìˆ˜ì •í•´ì¤˜"</strong>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}


/* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘   ì•± ì½”ë“œ ì˜ì—­ â€” ìƒˆ ì•±ì€ ì•„ë˜ì— ì¶”ê°€                     â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â•â•â•â•â•â•â• APP: BQB ì´ˆë³´ì ê°€ì´ë“œ â•â•â•â•â•â•â• */
function BQBBeginnerGuide() {


const C = {
  bg: "#0f172a",
  card: "#1e293b",
  surface: "#334155",
  accent: "#38bdf8",
  accentDim: "#0c4a6e",
  red: "#f87171",
  orange: "#fb923c",
  yellow: "#fbbf24",
  green: "#34d399",
  purple: "#a78bfa",
  pink: "#f472b6",
  text: "#f1f5f9",
  textDim: "#94a3b8",
  textMuted: "#64748b",
  border: "#334155",
};

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ 0. ì¸íŠ¸ë¡œ: íë¹„íŠ¸ë€? â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function IntroSection() {
  const [showArray, setShowArray] = useState(false);
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 28 }}>
      <StepCard
        num="ë¨¼ì €"
        title="íë¹„íŠ¸ê°€ ë­”ì§€ë¶€í„° ì•Œì•„ë´…ì‹œë‹¤"
        color={C.purple}
      >
        <p style={ps}>
          ì¼ë°˜ ì»´í“¨í„°ëŠ” <B>ë¹„íŠ¸(bit)</B> â€” 0 ë˜ëŠ” 1 â€” ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.
          <br />
          ì–‘ìì»´í“¨í„°ëŠ” <B c={C.purple}>íë¹„íŠ¸(qubit)</B>ë¥¼ ì”ë‹ˆë‹¤. íë¹„íŠ¸ëŠ” 0ê³¼
          1ì„ <B c={C.purple}>ë™ì‹œì—</B> ê°€ì§ˆ ìˆ˜ ìˆì–´ì„œ, íŠ¹ì • ë¬¸ì œë¥¼ í›¨ì”¬ ë¹¨ë¦¬
          í’€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </p>
        <div style={{ display: "flex", gap: 24, justifyContent: "center", flexWrap: "wrap", margin: "20px 0" }}>
          <Chip label="ì¼ë°˜ ë¹„íŠ¸" emoji="ğŸ”˜" sub="0 ë˜ëŠ” 1" color={C.textMuted} />
          <div style={{ display: "flex", alignItems: "center", fontSize: 24, color: C.textMuted }}>â†’</div>
          <Chip label="íë¹„íŠ¸" emoji="âš›ï¸" sub="0ê³¼ 1 ë™ì‹œ (ì¤‘ì²©)" color={C.purple} />
        </div>
        <p style={ps}>
          ì´ ê³¼ì œì—ì„œ íë¹„íŠ¸ëŠ” <B>ì‹¤ë¦¬ì½˜ ì•ˆì— ì‹¬ì€ ì¸(Â³Â¹P) ì›ì í•˜ë‚˜</B>ì˜
          ìŠ¤í•€(ìì „ ë°©í–¥)ì…ë‹ˆë‹¤. ì›ì í•˜ë‚˜ê°€ ê³§ íë¹„íŠ¸ í•˜ë‚˜ì…ë‹ˆë‹¤.
        </p>
      </StepCard>

      <StepCard
        num="ê·¸ëŸ°ë°"
        title="íë¹„íŠ¸ í•˜ë‚˜ë¡œëŠ” ì“¸ëª¨ê°€ ì—†ìŠµë‹ˆë‹¤"
        color={C.orange}
      >
        <p style={ps}>
          ì–‘ìì»´í“¨í„°ê°€ ë˜ë ¤ë©´ íë¹„íŠ¸ê°€ <B c={C.orange}>ìˆ˜ë°±~ìˆ˜ì²œ ê°œ</B> í•„ìš”í•©ë‹ˆë‹¤.
          ê·¸ê²ƒë„ ê²©ìì²˜ëŸ¼ <B c={C.orange}>ê°€ì§€ëŸ°íˆ ë°°ì—´</B>ë¼ì•¼ í•©ë‹ˆë‹¤.
        </p>
        <div style={{ textAlign: "center", margin: "16px 0" }}>
          <button
            onClick={() => setShowArray(!showArray)}
            style={{
              background: `${C.orange}22`,
              border: `1px solid ${C.orange}`,
              color: C.orange,
              borderRadius: 8,
              padding: "10px 24px",
              cursor: "pointer",
              fontSize: 14,
              fontWeight: 600,
            }}
          >
            {showArray ? "ì ‘ê¸°" : "ë°°ì—´ì´ ë­”ì§€ ë³´ê¸° â†’"}
          </button>
        </div>
        {showArray && (
          <div style={{ display: "flex", flexDirection: "column", alignItems: "center", gap: 12 }}>
            <div style={{ display: "flex", gap: 8 }}>
              <QubitDot /> <span style={{ color: C.textDim, fontSize: 13 }}>â† íë¹„íŠ¸ 1ê°œ</span>
            </div>
            <div style={{ fontSize: 20, color: C.textMuted }}>â†“ ì´ê±¸ ê²©ìë¡œ ë°°ì—´í•˜ë©´</div>
            <QubitGrid size={4} />
            <div style={{ fontSize: 13, color: C.textDim }}>4Ã—4 = 16ê°œ ë°°ì—´ (ì´ ê³¼ì œ ìµœì¢… ëª©í‘œ: 16Ã—16 = 256ê°œ)</div>
          </div>
        )}
      </StepCard>

      <Callout color={C.red} emoji="â—">
        í•˜ë‚˜ ë§Œë“œëŠ” ê±´ ë©ë‹ˆë‹¤. ë¬¸ì œëŠ” <B c={C.red}>ìˆ˜ë°± ê°œë¥¼ ë™ì‹œì—, ê°™ì€ í’ˆì§ˆë¡œ</B> ë§Œë“œëŠ”
        ê²ë‹ˆë‹¤. ì´ê²Œ ì™œ ì–´ë ¤ìš´ì§€ ë‹¤ìŒ ì¥ì—ì„œ ë´…ì‹œë‹¤.
      </Callout>
    </div>
  );
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ 1. ë¬¸ì œ: ì™œ ì–´ë ¤ìš´ê°€ â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function ProblemSection() {
  const [step, setStep] = useState(0);
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 28 }}>
      <StepCard num="ë¹„ìœ " title='"ê³¼ë…ì— ë‹¤íŠ¸ ë˜ì§€ê¸°"ë¡œ ì´í•´í•˜ê¸°' color={C.accent}>
        <p style={ps}>
          ì‹¤ë¦¬ì½˜ ì•ˆì— ì¸(P) ì›ìë¥¼ ì‹¬ëŠ” ê±¸ <B>"ì´ì˜¨ ì£¼ì…"</B>ì´ë¼ í•©ë‹ˆë‹¤.
          <br />
          ì´ê±¸ ë¹„ìœ í•˜ë©´ <B c={C.accent}>ì–´ë‘ìš´ ë°©ì—ì„œ ë‹¤íŠ¸ë¥¼ ë˜ì§€ëŠ” ê²ƒ</B>ê³¼
          ê°™ìŠµë‹ˆë‹¤.
        </p>
      </StepCard>

      {/* Interactive dart analogy */}
      <div style={{
        background: C.card, borderRadius: 16, padding: 28,
        border: `1px solid ${C.border}`,
      }}>
        <div style={{ display: "flex", gap: 8, marginBottom: 20, flexWrap: "wrap" }}>
          {["1ê°œ ë˜ì§€ê¸°", "100ê°œ ë˜ì§€ê¸°", "100ê°œ + í™˜ê²½ ë¬¸ì œ"].map((label, i) => (
            <button
              key={i}
              onClick={() => setStep(i)}
              style={{
                background: step === i ? `${C.accent}30` : "transparent",
                border: `1px solid ${step === i ? C.accent : C.border}`,
                color: step === i ? C.accent : C.textDim,
                borderRadius: 8,
                padding: "8px 16px",
                cursor: "pointer",
                fontSize: 13,
                fontWeight: 600,
              }}
            >
              {label}
            </button>
          ))}
        </div>

        {step === 0 && (
          <div style={{ textAlign: "center" }}>
            <DartBoard darts={[{ x: 48, y: 50, ok: true }]} />
            <p style={{ ...ps, marginTop: 16 }}>
              ë‹¤íŠ¸ <B c={C.green}>1ê°œ</B>ëŠ” ê³¼ë… ê·¼ì²˜ì— ê½‚ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
              <br />â†’ íë¹„íŠ¸ 1ê°œëŠ” ë§Œë“¤ ìˆ˜ ìˆë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.
            </p>
          </div>
        )}
        {step === 1 && (
          <div style={{ textAlign: "center" }}>
            <DartBoard
              darts={[
                { x: 48, y: 50, ok: true }, { x: 52, y: 47, ok: true },
                { x: 45, y: 53, ok: true }, { x: 55, y: 45, ok: false },
                { x: 40, y: 58, ok: false }, { x: 60, y: 40, ok: false },
                { x: 35, y: 55, ok: false }, { x: 58, y: 60, ok: false },
                { x: 30, y: 65, ok: false }, { x: 65, y: 35, ok: false },
              ]}
            />
            <p style={{ ...ps, marginTop: 16 }}>
              100ê°œë¥¼ ë˜ì§€ë©´? ì¼ë¶€ëŠ” ê³¼ë…ì— ë§ì§€ë§Œ,{" "}
              <B c={C.red}>ëŒ€ë¶€ë¶„ì€ í©ì–´ì§‘ë‹ˆë‹¤.</B>
              <br />
              ì´ê±¸ <B>"ì‚°ë€(straggle)"</B>ì´ë¼ í•©ë‹ˆë‹¤ â€” ì›ìê°€ ì •í™•í•œ ìë¦¬ì— ì•ˆ
              ê°€ê³  í©ì–´ì§€ëŠ” í˜„ìƒ.
            </p>
          </div>
        )}
        {step === 2 && (
          <div style={{ textAlign: "center" }}>
            <DartBoard
              darts={[
                { x: 30, y: 70, ok: false }, { x: 65, y: 30, ok: false },
                { x: 25, y: 40, ok: false }, { x: 70, y: 65, ok: false },
                { x: 55, y: 75, ok: false }, { x: 20, y: 55, ok: false },
                { x: 75, y: 45, ok: false }, { x: 40, y: 25, ok: false },
              ]}
              shaking
            />
            <p style={{ ...ps, marginTop: 16 }}>
              ê²Œë‹¤ê°€ ê³¼ë… ìì²´ê°€ <B c={C.red}>í”ë“¤ë¦¬ê³ </B>(ì „í•˜ ì¡ìŒ),{" "}
              <B c={C.red}>ë°”ëŒì´ ë¶ˆê³ </B>(ì—´ ê°„ì„­),{" "}
              <B c={C.red}>ì˜† ê³¼ë…ê³¼ ë¶€ë”ªíˆë©´</B>(í¬ë¡œìŠ¤í† í¬)?
              <br />â†’ ì´ê²ƒì´ <B>ëŒ€ê·œëª¨ ë°°ì—´ì´ ì‹¤íŒ¨í•˜ëŠ” ì´ìœ </B>ì…ë‹ˆë‹¤.
            </p>
          </div>
        )}
      </div>

      <Callout color={C.yellow} emoji="ğŸ’¡">
        ê¸°ì¡´ ì—°êµ¬ëŠ” "ë‹¤íŠ¸ë¥¼ ë” ì˜ ë˜ì§€ëŠ” ë²•"ì— ì§‘ì¤‘í–ˆìŠµë‹ˆë‹¤.
        <br />
        BQBëŠ” ë°œìƒì„ ë°”ê¿‰ë‹ˆë‹¤: <B c={C.yellow}>"ê³¼ë…ê³¼ í™˜ê²½ ìì²´ë¥¼ ê³ ì •í•˜ì."</B>
      </Callout>
    </div>
  );
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ 2. BQB í•µì‹¬ ì•„ì´ë””ì–´ â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function BQBIdeaSection() {
  const [phase, setPhase] = useState(0);
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 28 }}>
      <StepCard num="í•µì‹¬" title="BQB = ê³¼ë…íŒì„ ë¯¸ë¦¬ ë§Œë“¤ì–´ ë‘ëŠ” ê²ƒ" color={C.green}>
        <p style={ps}>
          BQBëŠ” <B c={C.green}>Buried Quantum Barrier</B>, ì¦‰{" "}
          <B c={C.green}>"ë§¤ë¦½ëœ ì–‘ì ì¥ë²½"</B>ì…ë‹ˆë‹¤.
          <br /><br />
          ì‹¤ë¦¬ì½˜ ì›¨ì´í¼ ì•ˆì— <B>ë³´ì´ì§€ ì•ŠëŠ” ìš¸íƒ€ë¦¬(ì¥ë²½)</B>ë¥¼ ë¯¸ë¦¬ ë§¤ë¦½í•´ì„œ,
          <br />
          ì›ìê°€ ì‹¬ì–´ì§ˆ ìˆ˜ ìˆëŠ” <B>3ì°¨ì› ê³µê°„ì„ ë¬¼ë¦¬ì ìœ¼ë¡œ ì œí•œ</B>í•©ë‹ˆë‹¤.
        </p>
      </StepCard>

      {/* Before / After visual */}
      <div style={{
        background: C.card, borderRadius: 16, padding: 28,
        border: `1px solid ${C.border}`,
      }}>
        <div style={{ display: "flex", gap: 8, marginBottom: 20 }}>
          {["ê¸°ì¡´ ë°©ì‹", "BQB ë°©ì‹"].map((label, i) => (
            <button
              key={i}
              onClick={() => setPhase(i)}
              style={{
                flex: 1,
                background: phase === i ? (i === 0 ? `${C.red}20` : `${C.green}20`) : "transparent",
                border: `1px solid ${phase === i ? (i === 0 ? C.red : C.green) : C.border}`,
                color: phase === i ? (i === 0 ? C.red : C.green) : C.textDim,
                borderRadius: 8,
                padding: "12px 16px",
                cursor: "pointer",
                fontSize: 14,
                fontWeight: 700,
              }}
            >
              {label}
            </button>
          ))}
        </div>

        {phase === 0 ? (
          <div style={{ textAlign: "center" }}>
            <BeforeAfterDiagram type="before" />
            <div style={{ marginTop: 16 }}>
              <p style={ps}>
                ì‹¤ë¦¬ì½˜ ì•ˆ <B c={C.red}>ì•„ë¬´ ë°ë‚˜</B> ì´ì˜¨ì„ ì©ë‹ˆë‹¤.
                <br />
                ì›ìê°€ ì–´ë””ì— ë©ˆì¶œì§€ <B c={C.red}>ì˜ˆì¸¡ ë¶ˆê°€</B>.
                <br />
                ì£¼ë³€ ì „í•˜ í™˜ê²½ë„ <B c={C.red}>ì œì–´ ë¶ˆê°€</B>.
              </p>
            </div>
          </div>
        ) : (
          <div style={{ textAlign: "center" }}>
            <BeforeAfterDiagram type="after" />
            <div style={{ marginTop: 16 }}>
              <p style={ps}>
                ë¯¸ë¦¬ ë§Œë“  <B c={C.green}>ì¥ë²½(BQB)</B>ì´ "ì—¬ê¸°ê¹Œì§€ë§Œ!" í•˜ê³  ë§‰ì•„ì¤ë‹ˆë‹¤.
                <br />
                ì›ìê°€ í©ì–´ì ¸ë„ <B c={C.green}>í—ˆìš© ë²”ìœ„ ì•ˆ</B>ì— ë¨¸ë­…ë‹ˆë‹¤.
                <br />
                ì£¼ë³€ í™˜ê²½ë„ <B c={C.green}>ì¥ë²½ì´ ì°¨í</B>í•©ë‹ˆë‹¤.
              </p>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ 3. ê³µì •ì°½ â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function ProcessWindowSection() {
  const [active, setActive] = useState(null);
  const wins = [
    {
      id: "geo",
      icon: "ğŸ“",
      name: "ìœ„ì¹˜ í—ˆìš© ë²”ìœ„",
      eng: "Geometric Window",
      color: C.red,
      analogy: "ê³¼ë…íŒì˜ í¬ê¸°",
      explain: "ì›ìê°€ ì‹¬ì–´ì§ˆ ìˆ˜ ìˆëŠ” 3D ê³µê°„ì˜ í¬ê¸°ë¥¼ ì •í•©ë‹ˆë‹¤. BQB ì¥ë²½ì´ ì´ ê³µê°„ì˜ 'ë²½'ì´ ë˜ì–´, ì‚°ë€ëœ ì›ìê°€ ë²½ ë°–ìœ¼ë¡œ ë‚˜ê°€ë©´ ê·¸ëƒ¥ ë¬´ì‹œë©ë‹ˆë‹¤.",
      visual: "wall",
    },
    {
      id: "elec",
      icon: "âš¡",
      name: "ì „ê¸° í™˜ê²½ í—ˆìš© ë²”ìœ„",
      eng: "Electrostatic Window",
      color: C.yellow,
      analogy: "ê³¼ë… ì£¼ë³€ ë°”ëŒì˜ ì„¸ê¸°",
      explain: "íë¹„íŠ¸ ì£¼ë³€ì˜ ì „í•˜ ì¡ìŒ, ì „ê¸°ì¥ ê¸°ìš¸ê¸° ë“± 'ì „ê¸°ì  í™˜ê²½'ì´ ì–¼ë§ˆë‚˜ í”ë“¤ë ¤ë„ ê´œì°®ì€ì§€ì˜ ë²”ìœ„ë¥¼ ì •í•©ë‹ˆë‹¤. ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ë©´ íë¹„íŠ¸ í’ˆì§ˆì´ ë–¨ì–´ì§‘ë‹ˆë‹¤.",
      visual: "wind",
    },
    {
      id: "align",
      icon: "ğŸ¯",
      name: "ì •ë ¬ í—ˆìš© ë²”ìœ„",
      eng: "Alignment Window",
      color: C.green,
      analogy: "ê³¼ë…íŒì´ ë²½ì— ì–¼ë§ˆë‚˜ ì •í™•íˆ ë¶™ì–´ìˆëŠ”ì§€",
      explain: "íë¹„íŠ¸ ìœ„ì¹˜ì™€ ê·¸ ìœ„ì— ì˜¬ë¼ê°€ëŠ” ë°°ì„ /íŒ¨í‚¤ì§•ì˜ ì¢Œí‘œê°€ ì–¼ë§ˆë‚˜ ì–´ê¸‹ë‚˜ë„ ë˜ëŠ”ì§€ë¥¼ ì •í•©ë‹ˆë‹¤. nm ë‹¨ìœ„ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.",
      visual: "align",
    },
  ];

  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 28 }}>
      <StepCard num="ê°œë…" title='"ê³µì •ì°½" = í—ˆìš© ì˜¤ì°¨ì˜ ê·œê²©ì„œ' color={C.accent}>
        <p style={ps}>
          BQBì˜ ì§„ì§œ í˜ì€ <B c={C.accent}>"ê³µì •ì°½(Process Window)"</B>ì´ë¼ëŠ” ê°œë…ì…ë‹ˆë‹¤.
          <br /><br />
          ê³µì •ì°½ì´ë€: <B>"ì´ ë²”ìœ„ ì•ˆì—ë§Œ ë“¤ì–´ì˜¤ë©´ OK"</B>ë¼ëŠ”{" "}
          <B c={C.accent}>í—ˆìš© ì˜¤ì°¨ ê·œê²©</B>ì„ ë¯¸ë¦¬ ì •ì˜í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
          <br /><br />
          BQBëŠ” ì´ ê·œê²©ì„ <B>ì„¸ ê°€ì§€ ì°¨ì›</B>ì—ì„œ ë™ì‹œì— ì •ì˜í•©ë‹ˆë‹¤:
        </p>
      </StepCard>

      {/* Three windows */}
      <div style={{ display: "flex", flexDirection: "column", gap: 12 }}>
        {wins.map((w) => (
          <div
            key={w.id}
            onClick={() => setActive(active === w.id ? null : w.id)}
            style={{
              background: active === w.id ? `${w.color}12` : C.card,
              borderRadius: 14,
              padding: active === w.id ? "24px" : "18px 24px",
              border: `2px solid ${active === w.id ? w.color : C.border}`,
              cursor: "pointer",
              transition: "all 0.3s",
            }}
          >
            <div style={{ display: "flex", alignItems: "center", gap: 12 }}>
              <span style={{ fontSize: 28 }}>{w.icon}</span>
              <div style={{ flex: 1 }}>
                <div style={{ fontSize: 16, fontWeight: 700, color: w.color }}>{w.name}</div>
                <div style={{ fontSize: 12, color: C.textMuted }}>{w.eng}</div>
              </div>
              <div style={{ fontSize: 12, color: C.textMuted }}>
                {active === w.id ? "â–²" : "â–¼"}
              </div>
            </div>

            {active === w.id && (
              <div style={{ marginTop: 16 }}>
                <div style={{
                  background: `${w.color}10`,
                  borderRadius: 10,
                  padding: 16,
                  marginBottom: 14,
                }}>
                  <div style={{ fontSize: 12, fontWeight: 700, color: w.color, marginBottom: 4 }}>
                    ë¹„ìœ 
                  </div>
                  <div style={{ fontSize: 15, color: C.text, fontWeight: 600 }}>
                    {w.analogy}
                  </div>
                </div>
                <p style={{ ...ps, margin: 0 }}>{w.explain}</p>
              </div>
            )}
          </div>
        ))}
      </div>

      <Callout color={C.accent} emoji="ğŸ”‘">
        í•µì‹¬: ì´ ì„¸ ê°€ì§€ ë²”ìœ„ê°€ <B c={C.accent}>ë™ì‹œì—</B> ì •ì˜ë¼ì•¼ í•©ë‹ˆë‹¤.
        <br />
        í•˜ë‚˜ë¼ë„ ë¹ ì§€ë©´, ë°°ì—´ì´ ì»¤ì§ˆìˆ˜ë¡ ì˜¤ì°¨ê°€ ëˆˆë©ì´ì²˜ëŸ¼ ë¶ˆì–´ë‚˜ ì „ì²´ê°€ ë¬´ë„ˆì§‘ë‹ˆë‹¤.
      </Callout>
    </div>
  );
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ 4. Triple Wall â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function TripleWallSection() {
  const [activeWall, setActiveWall] = useState(0);
  const walls = [
    {
      num: 1,
      name: "ì™¸ê³½ ê²©ë¦¬ë²½ (Wall-1)",
      color: C.red,
      analogy: "ğŸ  ì§‘ì˜ ì™¸ë²½",
      explain: "STI(ì–•ì€ íŠ¸ë Œì¹˜)ë¼ëŠ” ë„ë‘ì„ íŒŒì„œ ì˜† ì¹¸ê³¼ ë¬¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤. ì˜† íë¹„íŠ¸ì˜ ì „ê¸° ì‹ í˜¸ê°€ ë„˜ì–´ì˜¤ì§€ ëª»í•˜ê²Œ ì°¨ë‹¨í•©ë‹ˆë‹¤.",
      blocks: "ì˜† íë¹„íŠ¸ì˜ ê°„ì„­ (í¬ë¡œìŠ¤í† í¬)",
    },
    {
      num: 2,
      name: "ì „ê¸° ì°¨íë²½ (Wall-2)",
      color: C.yellow,
      analogy: "ğŸ›¡ï¸ ë°©ì˜ ì°¨ìŒë²½",
      explain: "T3(Triple Well) êµ¬ì¡°ë¡œ ì „ê¸°ì  ì‹¤ë“œë¥¼ í˜•ì„±í•©ë‹ˆë‹¤. ì™¸ë¶€ ì „ê¸° ì¡ìŒì´ íë¹„íŠ¸ê¹Œì§€ ë„ë‹¬í•˜ì§€ ëª»í•˜ê²Œ ë§‰ê³ , ê° íë¹„íŠ¸ë¥¼ ë…ë¦½ì ìœ¼ë¡œ ë¯¸ì„¸ ì¡°ì •í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.",
      blocks: "ì „ê¸° ì¡ìŒ, ì „í•˜ í”ë“¤ë¦¼",
    },
    {
      num: 3,
      name: "ë§¤ë¦½ ì¥ë²½ (Wall-3: BQB-B)",
      color: C.green,
      analogy: "ğŸ¯ ê³¼ë…ì˜ í…Œë‘ë¦¬",
      explain: "ì‹¤ë¦¬ì½˜ ë‚´ë¶€ì— ë§¤ë¦½ëœ ì¥ë²½ìœ¼ë¡œ, ì´ì˜¨ ì£¼ì… ì‹œ ì›ìê°€ ë„ˆë¬´ ê¹Šì´ ë“¤ì–´ê°€ê±°ë‚˜ ì˜†ìœ¼ë¡œ í¼ì§€ëŠ” ê²ƒì„ ë¬¼ë¦¬ì ìœ¼ë¡œ ë§‰ìŠµë‹ˆë‹¤. íë¹„íŠ¸ê°€ ì •í™•í•œ ê¹Šì´ì— í˜•ì„±ë˜ë„ë¡ í•©ë‹ˆë‹¤.",
      blocks: "ì›ìì˜ ì‚°ë€, ì±„ë„ë§",
    },
  ];

  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 28 }}>
      <StepCard num="êµ¬ì¡°" title="Triple-Wall = íë¹„íŠ¸ë¥¼ ê°ì‹¸ëŠ” 3ì¤‘ ë³´í˜¸ë²½" color={C.purple}>
        <p style={ps}>
          BQBëŠ” ê° íë¹„íŠ¸ë¥¼ <B c={C.purple}>ì„¸ ê²¹ì˜ ë²½</B>ìœ¼ë¡œ ë‘˜ëŸ¬ìŒ‰ë‹ˆë‹¤.
          <br />
          ê° ë²½ì€ ì„œë¡œ ë‹¤ë¥¸ ì¢…ë¥˜ì˜ ìœ„í˜‘ì„ ë§‰ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
        </p>
      </StepCard>

      {/* Nested box visual */}
      <div style={{
        background: C.card, borderRadius: 16, padding: 28,
        border: `1px solid ${C.border}`,
      }}>
        <div style={{ position: "relative", width: "100%", maxWidth: 380, margin: "0 auto", aspectRatio: "1/1" }}>
          {/* Wall 1 - outermost */}
          <div
            onClick={() => setActiveWall(0)}
            style={{
              position: "absolute", inset: 0,
              borderRadius: 20,
              border: `4px ${activeWall === 0 ? "solid" : "dashed"} ${C.red}`,
              background: activeWall === 0 ? `${C.red}15` : `${C.red}05`,
              cursor: "pointer",
              transition: "all 0.3s",
            }}
          >
            <div style={{ position: "absolute", top: 10, left: 14, fontSize: 12, fontWeight: 800, color: C.red }}>
              Wall-1: ì™¸ê³½ ê²©ë¦¬
            </div>
          </div>

          {/* Wall 2 */}
          <div
            onClick={(e) => { e.stopPropagation(); setActiveWall(1); }}
            style={{
              position: "absolute",
              top: "14%", left: "14%", right: "14%", bottom: "14%",
              borderRadius: 16,
              border: `4px ${activeWall === 1 ? "solid" : "dashed"} ${C.yellow}`,
              background: activeWall === 1 ? `${C.yellow}15` : `${C.yellow}05`,
              cursor: "pointer",
              transition: "all 0.3s",
            }}
          >
            <div style={{ position: "absolute", top: 10, left: 14, fontSize: 12, fontWeight: 800, color: C.yellow }}>
              Wall-2: ì „ê¸° ì°¨í
            </div>
          </div>

          {/* Wall 3 */}
          <div
            onClick={(e) => { e.stopPropagation(); setActiveWall(2); }}
            style={{
              position: "absolute",
              top: "28%", left: "28%", right: "28%", bottom: "28%",
              borderRadius: 12,
              border: `4px ${activeWall === 2 ? "solid" : "dashed"} ${C.green}`,
              background: activeWall === 2 ? `${C.green}15` : `${C.green}05`,
              cursor: "pointer",
              transition: "all 0.3s",
            }}
          >
            <div style={{ position: "absolute", top: 8, left: 10, fontSize: 11, fontWeight: 800, color: C.green }}>
              Wall-3: ë§¤ë¦½ ì¥ë²½
            </div>
          </div>

          {/* Qubit center */}
          <div style={{
            position: "absolute",
            top: "50%", left: "50%",
            transform: "translate(-50%, -50%)",
            width: 56, height: 56,
            borderRadius: "50%",
            background: `radial-gradient(circle, ${C.purple}50, ${C.purple}15)`,
            border: `3px solid ${C.purple}`,
            display: "flex", alignItems: "center", justifyContent: "center",
            flexDirection: "column",
            boxShadow: `0 0 40px ${C.purple}30`,
          }}>
            <div style={{ fontSize: 11, fontWeight: 900, color: C.purple }}>íë¹„íŠ¸</div>
            <div style={{ fontSize: 8, color: C.purple }}>Â³Â¹P</div>
          </div>
        </div>

        <div style={{ fontSize: 12, color: C.textMuted, textAlign: "center", margin: "14px 0 4px" }}>
          â†‘ ê° ë²½ì„ í´ë¦­í•´ ë³´ì„¸ìš”
        </div>

        {/* Wall detail */}
        <div style={{
          marginTop: 16,
          background: `${walls[activeWall].color}10`,
          borderRadius: 12,
          padding: 20,
          borderLeft: `4px solid ${walls[activeWall].color}`,
        }}>
          <div style={{ fontSize: 16, fontWeight: 800, color: walls[activeWall].color, marginBottom: 4 }}>
            {walls[activeWall].name}
          </div>
          <div style={{ fontSize: 24, marginBottom: 8 }}>{walls[activeWall].analogy}</div>
          <p style={{ ...ps, margin: "0 0 12px" }}>{walls[activeWall].explain}</p>
          <div style={{
            display: "inline-block",
            background: `${walls[activeWall].color}20`,
            borderRadius: 6,
            padding: "6px 12px",
            fontSize: 13,
            fontWeight: 600,
            color: walls[activeWall].color,
          }}>
            ì°¨ë‹¨ ëŒ€ìƒ: {walls[activeWall].blocks}
          </div>
        </div>
      </div>
    </div>
  );
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ 5. íë£¨í”„ ê³µì • â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function ClosedLoopSection() {
  const [loopStep, setLoopStep] = useState(0);
  const steps = [
    {
      icon: "âš’ï¸",
      title: "ë§Œë“¤ê¸° (ìƒì„±)",
      color: C.red,
      desc: "BQB í…œí”Œë¦¿ì´ ì •í•´ ë†“ì€ ìë¦¬ì— ì´ì˜¨ì„ ì£¼ì…í•˜ì—¬ íë¹„íŠ¸ë¥¼ ë§Œë“­ë‹ˆë‹¤.",
      analogy: "ê³¼ë…íŒì— ë‹¤íŠ¸ë¥¼ ë˜ì§",
    },
    {
      icon: "ğŸ”¬",
      title: "í™•ì¸í•˜ê¸° (ê²€ì¦)",
      color: C.yellow,
      desc: "3D ì´¬ì˜(nano-CT ë“±)ìœ¼ë¡œ ì›ìê°€ ì •í™•í•œ ìœ„ì¹˜ì— ê°”ëŠ”ì§€, ì „ê¸° í™˜ê²½ì€ ê´œì°®ì€ì§€ í™•ì¸í•©ë‹ˆë‹¤.",
      analogy: "ë‹¤íŠ¸ê°€ ì–´ë”” ê½‚í˜”ëŠ”ì§€ ì¹´ë©”ë¼ë¡œ ì´¬ì˜",
    },
    {
      icon: "ğŸ”§",
      title: "ê³ ì¹˜ê¸° (ë³´ì •)",
      color: C.green,
      desc: "ì–´ê¸‹ë‚œ ë¶€ë¶„ì´ ìˆìœ¼ë©´ ë‹¤ìŒ ë²ˆì— ë” ì •í™•í•˜ë„ë¡ ì£¼ì… ì¡°ê±´ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.",
      analogy: "ì¡°ì¤€ì ì„ ì¡°ì •í•´ì„œ ë‹¤ì‹œ ë˜ì§",
    },
  ];

  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 28 }}>
      <StepCard num="ë°©ë²•" title="íë£¨í”„ = ë§Œë“¤ê³  â†’ í™•ì¸í•˜ê³  â†’ ê³ ì¹˜ê³  â†’ ë°˜ë³µ" color={C.accent}>
        <p style={ps}>
          í•œ ë²ˆì— ì™„ë²½í•˜ê²Œ ë§Œë“¤ í•„ìš” ì—†ìŠµë‹ˆë‹¤.
          <br />
          <B c={C.accent}>ë¹ ë¥´ê²Œ ë°˜ë³µí•´ì„œ ì ì  ì •í™•í•˜ê²Œ</B> ìˆ˜ë ´ì‹œí‚¤ëŠ” ê²Œ í•µì‹¬ì…ë‹ˆë‹¤.
        </p>
      </StepCard>

      {/* Loop visual */}
      <div style={{
        background: C.card, borderRadius: 16, padding: 28,
        border: `1px solid ${C.border}`,
      }}>
        <div style={{ display: "flex", justifyContent: "center", gap: 8, marginBottom: 24 }}>
          {steps.map((s, i) => (
            <div key={i} style={{ display: "flex", alignItems: "center", gap: 8 }}>
              <button
                onClick={() => setLoopStep(i)}
                style={{
                  width: 64, height: 64,
                  borderRadius: "50%",
                  border: `3px solid ${loopStep === i ? s.color : C.border}`,
                  background: loopStep === i ? `${s.color}20` : "transparent",
                  cursor: "pointer",
                  fontSize: 28,
                  display: "flex", alignItems: "center", justifyContent: "center",
                  transition: "all 0.3s",
                }}
              >
                {s.icon}
              </button>
              {i < 2 && (
                <div style={{ fontSize: 20, color: C.textMuted }}>â†’</div>
              )}
            </div>
          ))}
        </div>

        {/* Repeat arrow */}
        <div style={{ textAlign: "center", marginBottom: 16 }}>
          <div style={{
            display: "inline-block",
            background: `${C.accent}15`,
            borderRadius: 20,
            padding: "6px 20px",
            fontSize: 13,
            color: C.accent,
            fontWeight: 600,
          }}>
            ğŸ”„ 3ë‹¨ê³„ë¥¼ ë°˜ë³µí• ìˆ˜ë¡ ì •ë°€ë„ê°€ ì˜¬ë¼ê°
          </div>
        </div>

        {/* Current step detail */}
        <div style={{
          background: `${steps[loopStep].color}10`,
          borderRadius: 12,
          padding: 20,
          borderLeft: `4px solid ${steps[loopStep].color}`,
        }}>
          <div style={{ fontSize: 18, fontWeight: 800, color: steps[loopStep].color, marginBottom: 8 }}>
            {steps[loopStep].icon} {steps[loopStep].title}
          </div>
          <p style={{ ...ps, margin: "0 0 12px" }}>{steps[loopStep].desc}</p>
          <div style={{
            background: `${steps[loopStep].color}15`,
            borderRadius: 8,
            padding: "10px 14px",
            fontSize: 13,
            color: C.textDim,
          }}>
            ë¹„ìœ : {steps[loopStep].analogy}
          </div>
        </div>
      </div>
    </div>
  );
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ 6. ì „ì²´ ìš”ì•½ â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function SummarySection() {
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 28 }}>
      <StepCard num="ìš”ì•½" title="BQB ì „ì²´ ê·¸ë¦¼ í•œëˆˆì— ë³´ê¸°" color={C.accent}>
        <p style={ps}>
          ì§€ê¸ˆê¹Œì§€ ë°°ìš´ ê²ƒì„ í•˜ë‚˜ë¡œ ì—°ê²°í•˜ë©´ ì´ë ‡ìŠµë‹ˆë‹¤:
        </p>
      </StepCard>

      <div style={{ display: "flex", flexDirection: "column", gap: 12 }}>
        {[
          { num: "1", icon: "â“", title: "ë¬¸ì œ", desc: "íë¹„íŠ¸ ìˆ˜ë°± ê°œë¥¼ ê°™ì€ í’ˆì§ˆë¡œ ë™ì‹œì— ë§Œë“¤ ìˆ˜ ì—†ë‹¤", color: C.red },
          { num: "2", icon: "ğŸ”", title: "ì›ì¸", desc: "ìœ„ì¹˜Â·ì „ê¸°í™˜ê²½Â·ì •ë ¬ì˜ í—ˆìš© ì˜¤ì°¨ë¥¼ ë™ì‹œì— ì •ì˜í•œ ì ì´ ì—†ë‹¤", color: C.orange },
          { num: "3", icon: "ğŸ¯", title: "í•´ë²•: BQB", desc: "ë§¤ë¦½ ì¥ë²½ìœ¼ë¡œ 3D í—ˆìš© ë²”ìœ„(ê³µì •ì°½)ë¥¼ ë¬¼ë¦¬ì ìœ¼ë¡œ ê°•ì œ", color: C.green },
          { num: "4", icon: "ğŸ›¡ï¸", title: "ë³´í˜¸: Triple-Wall", desc: "3ì¤‘ ë²½(ê²©ë¦¬/ì°¨í/ë§¤ë¦½)ìœ¼ë¡œ ê° íë¹„íŠ¸ë¥¼ ë…ë¦½ì ìœ¼ë¡œ ë³´í˜¸", color: C.purple },
          { num: "5", icon: "ğŸ”„", title: "ìˆ˜ë ´: íë£¨í”„", desc: "ë§Œë“¤ê³ â†’í™•ì¸í•˜ê³ â†’ê³ ì¹˜ê³ ë¥¼ ë°˜ë³µí•˜ì—¬ ì ì  ì •í™•í•˜ê²Œ", color: C.accent },
        ].map((item) => (
          <div
            key={item.num}
            style={{
              display: "flex",
              alignItems: "center",
              gap: 16,
              background: C.card,
              borderRadius: 12,
              padding: "18px 20px",
              border: `1px solid ${C.border}`,
              borderLeft: `4px solid ${item.color}`,
            }}
          >
            <div style={{
              width: 48, height: 48,
              borderRadius: "50%",
              background: `${item.color}15`,
              display: "flex", alignItems: "center", justifyContent: "center",
              fontSize: 24, flexShrink: 0,
            }}>
              {item.icon}
            </div>
            <div style={{ flex: 1 }}>
              <div style={{ fontSize: 14, fontWeight: 800, color: item.color }}>{item.title}</div>
              <div style={{ fontSize: 14, color: C.textDim, lineHeight: 1.5 }}>{item.desc}</div>
            </div>
          </div>
        ))}
      </div>

      <Callout color={C.green} emoji="âœ…">
        ê²°ë¡ : BQBëŠ” "ë” ì¢‹ì€ íë¹„íŠ¸"ë¥¼ ë§Œë“œëŠ” ê¸°ìˆ ì´ ì•„ë‹™ë‹ˆë‹¤.
        <br />
        <B c={C.green}>"ìˆ˜ë°± ê°œë¥¼ ë™ì‹œì— ë§Œë“¤ ìˆ˜ ìˆëŠ” ê·œê²©ê³¼ êµ¬ì¡°"</B>ë¥¼ ì •ì˜í•˜ëŠ” í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.
      </Callout>
    </div>
  );
}

/* â•â•â•â•â•â•â• Shared Components â•â•â•â•â•â•â• */

function B({ children, c }) {
  return <strong style={{ color: c || C.text }}>{children}</strong>;
}

const ps = { fontSize: 15, color: C.textDim, lineHeight: 1.9, margin: "0" };

function StepCard({ num, title, color, children }) {
  return (
    <div style={{
      background: `linear-gradient(135deg, ${color}08, ${C.card})`,
      borderRadius: 16, padding: 28,
      border: `1px solid ${color}30`,
    }}>
      <div style={{ fontSize: 12, fontWeight: 800, color, letterSpacing: 2, marginBottom: 6 }}>
        {num.toUpperCase()}
      </div>
      <div style={{ fontSize: 20, fontWeight: 800, color: C.text, marginBottom: 16 }}>{title}</div>
      {children}
    </div>
  );
}

function Callout({ children, color, emoji }) {
  return (
    <div style={{
      background: `${color}10`,
      borderRadius: 12,
      padding: 20,
      borderLeft: `4px solid ${color}`,
    }}>
      <div style={{ display: "flex", gap: 10, alignItems: "flex-start" }}>
        <span style={{ fontSize: 20, flexShrink: 0 }}>{emoji}</span>
        <div style={{ fontSize: 15, color: C.textDim, lineHeight: 1.8 }}>{children}</div>
      </div>
    </div>
  );
}

function Chip({ label, emoji, sub, color }) {
  return (
    <div style={{
      background: `${color}15`,
      borderRadius: 12,
      padding: "14px 20px",
      textAlign: "center",
      border: `1px solid ${color}30`,
      minWidth: 120,
    }}>
      <div style={{ fontSize: 28, marginBottom: 4 }}>{emoji}</div>
      <div style={{ fontSize: 14, fontWeight: 700, color }}>{label}</div>
      <div style={{ fontSize: 11, color: C.textMuted, marginTop: 2 }}>{sub}</div>
    </div>
  );
}

function QubitDot() {
  return (
    <div style={{
      width: 20, height: 20,
      borderRadius: "50%",
      background: `radial-gradient(circle, ${C.purple}, ${C.purple}60)`,
      boxShadow: `0 0 8px ${C.purple}50`,
    }} />
  );
}

function QubitGrid({ size }) {
  return (
    <div style={{
      display: "inline-grid",
      gridTemplateColumns: `repeat(${size}, 24px)`,
      gap: 6,
      padding: 16,
      background: `${C.purple}08`,
      borderRadius: 12,
      border: `1px dashed ${C.purple}30`,
    }}>
      {Array.from({ length: size * size }).map((_, i) => (
        <div
          key={i}
          style={{
            width: 20, height: 20,
            borderRadius: "50%",
            background: `radial-gradient(circle, ${C.purple}90, ${C.purple}40)`,
            boxShadow: `0 0 4px ${C.purple}30`,
          }}
        />
      ))}
    </div>
  );
}

function DartBoard({ darts, shaking }) {
  return (
    <div style={{
      position: "relative",
      width: 220, height: 220,
      margin: "0 auto",
      borderRadius: "50%",
      background: `radial-gradient(circle, ${C.green}15 20%, ${C.yellow}10 40%, ${C.red}08 60%, ${C.card} 80%)`,
      border: `2px solid ${C.border}`,
      animation: shaking ? "shake 0.3s infinite" : "none",
    }}>
      {/* Target rings */}
      {[80, 55, 30].map((s, i) => (
        <div key={i} style={{
          position: "absolute",
          top: `${50 - s / 2}%`, left: `${50 - s / 2}%`,
          width: `${s}%`, height: `${s}%`,
          borderRadius: "50%",
          border: `1px dashed ${[C.red, C.yellow, C.green][i]}40`,
        }} />
      ))}
      {/* Darts */}
      {darts.map((d, i) => (
        <div key={i} style={{
          position: "absolute",
          left: `${d.x}%`, top: `${d.y}%`,
          transform: "translate(-50%, -50%)",
          width: 10, height: 10,
          borderRadius: "50%",
          background: d.ok ? C.green : C.red,
          boxShadow: `0 0 6px ${d.ok ? C.green : C.red}80`,
        }} />
      ))}
      <style>{`@keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-3px)} 75%{transform:translateX(3px)} }`}</style>
    </div>
  );
}

function BeforeAfterDiagram({ type }) {
  const w = 280;
  const h = 180;
  if (type === "before") {
    return (
      <svg width={w} height={h} viewBox={`0 0 ${w} ${h}`} style={{ display: "block", margin: "0 auto" }}>
        {/* Silicon block */}
        <rect x={20} y={20} width={w - 40} height={h - 40} rx={8} fill={`${C.surface}80`} stroke={C.border} />
        <text x={w / 2} y={h - 14} textAnchor="middle" fill={C.textMuted} fontSize={11}>ì‹¤ë¦¬ì½˜</text>
        {/* Scattered atoms */}
        {[
          [60, 50], [120, 90], [80, 120], [180, 60], [200, 110],
          [150, 45], [100, 70], [220, 85], [65, 95], [170, 130],
        ].map(([x, y], i) => (
          <circle key={i} cx={x} cy={y} r={5} fill={C.red} opacity={0.7}>
            <animate attributeName="opacity" values="0.4;0.8;0.4" dur={`${1.5 + i * 0.2}s`} repeatCount="indefinite" />
          </circle>
        ))}
        {/* Arrow */}
        <line x1={w / 2} y1={10} x2={w / 2 - 5} y2={45} stroke={C.textMuted} strokeWidth={1.5} strokeDasharray="4,3" />
        <text x={w / 2 + 10} y={16} fill={C.textMuted} fontSize={10}>ì´ì˜¨ ì£¼ì…</text>
        <text x={w / 2} y={h / 2 + 4} textAnchor="middle" fill={C.red} fontSize={12} fontWeight="bold">í©ì–´ì§!</text>
      </svg>
    );
  }
  return (
    <svg width={w} height={h} viewBox={`0 0 ${w} ${h}`} style={{ display: "block", margin: "0 auto" }}>
      {/* Silicon block */}
      <rect x={20} y={20} width={w - 40} height={h - 40} rx={8} fill={`${C.surface}80`} stroke={C.border} />
      <text x={w / 2} y={h - 14} textAnchor="middle" fill={C.textMuted} fontSize={11}>ì‹¤ë¦¬ì½˜</text>
      {/* BQB barriers */}
      {[85, 155, 225].map((cx, i) => (
        <g key={i}>
          <rect x={cx - 22} y={50} width={44} height={70} rx={4}
            fill="none" stroke={C.green} strokeWidth={2.5} strokeDasharray={i === 1 ? "none" : "none"} />
          <circle cx={cx} cy={85} r={6} fill={C.green}>
            <animate attributeName="r" values="5;7;5" dur="2s" repeatCount="indefinite" />
          </circle>
          <text x={cx} y={42} textAnchor="middle" fill={C.green} fontSize={9} fontWeight="bold">BQB</text>
        </g>
      ))}
      {/* Arrow */}
      <line x1={155} y1={10} x2={155} y2={55} stroke={C.textMuted} strokeWidth={1.5} strokeDasharray="4,3" />
      <text x={170} y={16} fill={C.textMuted} fontSize={10}>ì´ì˜¨ ì£¼ì…</text>
      <text x={w / 2} y={h / 2 + 4} textAnchor="middle" fill={C.green} fontSize={12} fontWeight="bold">ì •ìœ„ì¹˜!</text>
    </svg>
  );
}

/* â•â•â•â•â•â•â• TABS & MAIN â•â•â•â•â•â•â• */
const tabs = [
  { id: "intro", label: "íë¹„íŠ¸ë€?", icon: "âš›ï¸" },
  { id: "problem", label: "ì™œ ì–´ë ¤ìš´ê°€", icon: "ğŸ’¥" },
  { id: "bqb", label: "BQB ì•„ì´ë””ì–´", icon: "ğŸ§±" },
  { id: "pw", label: "ê³µì •ì°½", icon: "ğŸ“" },
  { id: "wall", label: "3ì¤‘ ë³´í˜¸ë²½", icon: "ğŸ›¡ï¸" },
  { id: "loop", label: "íë£¨í”„", icon: "ğŸ”„" },
  { id: "summary", label: "ì „ì²´ ìš”ì•½", icon: "ğŸ“‹" },
];

const sectionMap = {
  intro: IntroSection,
  problem: ProblemSection,
  bqb: BQBIdeaSection,
  pw: ProcessWindowSection,
  wall: TripleWallSection,
  loop: ClosedLoopSection,
  summary: SummarySection,
};


function __BQBBeginnerRender__() {
  const [tab, setTab] = useState("intro");
  const Comp = sectionMap[tab];
  const idx = tabs.findIndex((t) => t.id === tab);

  return (
    <div style={{
      minHeight: "100vh",
      background: C.bg,
      fontFamily: "'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif",
      color: C.text,
    }}>
      {/* Header */}
      <div style={{
        padding: "28px 20px 16px",
        background: `linear-gradient(180deg, ${C.accentDim}50, ${C.bg})`,
      }}>
        <div style={{ maxWidth: 640, margin: "0 auto" }}>
          <div style={{ fontSize: 11, fontWeight: 800, color: C.accent, letterSpacing: 3 }}>
            ì´ˆë³´ìë¥¼ ìœ„í•œ BQB ê°€ì´ë“œ
          </div>
          <h1 style={{ fontSize: 24, fontWeight: 900, margin: "6px 0 0", lineHeight: 1.3 }}>
            BQBê°€ ë­”ë°? ğŸ¤”
          </h1>
          <p style={{ fontSize: 13, color: C.textMuted, margin: "4px 0 0" }}>
            ë°˜ë„ì²´ íë¹„íŠ¸ ëŒ€ê·œëª¨ ë°°ì—´ì˜ í•µì‹¬ ê¸°ìˆ ì„ ë¹„ìœ ë¡œ ì´í•´í•˜ê¸°
          </p>
        </div>
      </div>

      {/* Tab nav */}
      <div style={{
        position: "sticky", top: 52, zIndex: 9,
        background: `${C.bg}ee`,
        backdropFilter: "blur(8px)",
        borderBottom: `1px solid ${C.border}`,
        overflowX: "auto",
        WebkitOverflowScrolling: "touch",
      }}>
        <div style={{
          maxWidth: 640, margin: "0 auto",
          display: "flex", gap: 0,
          padding: "0 12px",
        }}>
          {tabs.map((t, i) => (
            <button
              key={t.id}
              onClick={() => setTab(t.id)}
              style={{
                background: "none", border: "none",
                borderBottom: tab === t.id ? `2px solid ${C.accent}` : "2px solid transparent",
                padding: "12px 12px",
                cursor: "pointer",
                whiteSpace: "nowrap",
                display: "flex", alignItems: "center", gap: 4,
                opacity: tab === t.id ? 1 : 0.5,
                transition: "all 0.2s",
              }}
            >
              <span style={{ fontSize: 14 }}>{t.icon}</span>
              <span style={{ fontSize: 12, fontWeight: tab === t.id ? 700 : 400, color: tab === t.id ? C.accent : C.textMuted }}>
                {t.label}
              </span>
            </button>
          ))}
        </div>
      </div>

      {/* Content */}
      <div style={{ maxWidth: 640, margin: "0 auto", padding: "28px 16px 80px" }}>
        <Comp />

        {/* Nav buttons */}
        <div style={{ display: "flex", justifyContent: "space-between", marginTop: 36 }}>
          <button
            onClick={() => idx > 0 && setTab(tabs[idx - 1].id)}
            disabled={idx === 0}
            style={{
              background: idx > 0 ? `${C.accent}15` : "transparent",
              border: `1px solid ${idx > 0 ? C.accent : C.border}`,
              color: idx > 0 ? C.accent : C.textMuted,
              borderRadius: 8, padding: "10px 20px",
              cursor: idx > 0 ? "pointer" : "default",
              fontSize: 13, fontWeight: 600,
              opacity: idx > 0 ? 1 : 0.3,
            }}
          >
            â† ì´ì „
          </button>
          <button
            onClick={() => idx < tabs.length - 1 && setTab(tabs[idx + 1].id)}
            disabled={idx === tabs.length - 1}
            style={{
              background: idx < tabs.length - 1 ? `${C.accent}15` : "transparent",
              border: `1px solid ${idx < tabs.length - 1 ? C.accent : C.border}`,
              color: idx < tabs.length - 1 ? C.accent : C.textMuted,
              borderRadius: 8, padding: "10px 20px",
              cursor: idx < tabs.length - 1 ? "pointer" : "default",
              fontSize: 13, fontWeight: 600,
              opacity: idx < tabs.length - 1 ? 1 : 0.3,
            }}
          >
            ë‹¤ìŒ â†’
          </button>
        </div>
      </div>
    </div>
  );
}


  return <__BQBBeginnerRender__ />;
}

/* â•â•â•â•â•â•â• APP: BQB ì¤‘ê¸‰ ê°€ì´ë“œ â•â•â•â•â•â•â• */
function BQBIntermediateGuide() {


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BQB ì¤‘ê¸‰ ê°€ì´ë“œ â€” ì–‘ì í…Œë§ˆ ì¸í„°ë™í‹°ë¸Œ
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

const Q = {
  void: "#030712",
  deep: "#0a0e1a",
  surface: "#111827",
  card: "#1a1f35",
  border: "#1e2847",
  glow: "#6366f1",
  glowDim: "#4f46e5",
  cyan: "#22d3ee",
  cyanDim: "#0891b2",
  magenta: "#e879f9",
  magentaDim: "#a21caf",
  red: "#fb7185",
  orange: "#fb923c",
  yellow: "#fde047",
  green: "#4ade80",
  text: "#e2e8f0",
  textDim: "#94a3b8",
  textMuted: "#64748b",
};

const font = "'JetBrains Mono', 'Fira Code', 'SF Mono', monospace";

/* â”€â”€â”€ Quantum Background Particles â”€â”€â”€ */
function QuantumBG() {
  return (
    <div style={{ position: "fixed", inset: 0, zIndex: 0, pointerEvents: "none", overflow: "hidden" }}>
      <style>{`
        @keyframes qFloat { 0%,100%{transform:translateY(0) scale(1);opacity:0.3} 50%{transform:translateY(-30px) scale(1.5);opacity:0.7} }
        @keyframes qPulse { 0%,100%{box-shadow:0 0 4px ${Q.glow}40;} 50%{box-shadow:0 0 20px ${Q.glow}80;} }
        @keyframes qOrbit { 0%{transform:rotate(0deg) translateX(40px) rotate(0deg)} 100%{transform:rotate(360deg) translateX(40px) rotate(-360deg)} }
        @keyframes qWave { 0%{d:path('M0,50 Q25,30 50,50 T100,50')} 50%{d:path('M0,50 Q25,70 50,50 T100,50')} 100%{d:path('M0,50 Q25,30 50,50 T100,50')} }
        @keyframes gridPulse { 0%,100%{opacity:0.03} 50%{opacity:0.08} }
        @keyframes scanLine { 0%{top:-2px} 100%{top:100%} }
      `}</style>
      {/* Grid overlay */}
      <div style={{
        position: "absolute", inset: 0,
        backgroundImage: `linear-gradient(${Q.glow}08 1px, transparent 1px), linear-gradient(90deg, ${Q.glow}08 1px, transparent 1px)`,
        backgroundSize: "60px 60px",
        animation: "gridPulse 8s ease-in-out infinite",
      }} />
      {/* Floating particles */}
      {Array.from({ length: 20 }).map((_, i) => (
        <div key={i} style={{
          position: "absolute",
          left: `${(i * 37 + 13) % 100}%`,
          top: `${(i * 53 + 7) % 100}%`,
          width: i % 3 === 0 ? 3 : 2,
          height: i % 3 === 0 ? 3 : 2,
          borderRadius: "50%",
          background: [Q.glow, Q.cyan, Q.magenta][i % 3],
          animation: `qFloat ${3 + (i % 5) * 1.5}s ease-in-out ${i * 0.3}s infinite`,
        }} />
      ))}
      {/* Scan line */}
      <div style={{
        position: "absolute", left: 0, right: 0, height: 2,
        background: `linear-gradient(90deg, transparent, ${Q.glow}20, transparent)`,
        animation: "scanLine 12s linear infinite",
      }} />
    </div>
  );
}

/* â”€â”€â”€ Quantum Atom Visual â”€â”€â”€ */
function QuantumAtom({ size = 80, color = Q.glow }) {
  return (
    <div style={{ position: "relative", width: size, height: size, margin: "0 auto" }}>
      <style>{`
        @keyframes orbit1 { 0%{transform:rotate(0deg) translateX(${size*0.4}px) rotate(0deg)} 100%{transform:rotate(360deg) translateX(${size*0.4}px) rotate(-360deg)} }
        @keyframes orbit2 { 0%{transform:rotate(120deg) translateX(${size*0.35}px) rotate(-120deg)} 100%{transform:rotate(480deg) translateX(${size*0.35}px) rotate(-480deg)} }
        @keyframes orbit3 { 0%{transform:rotate(240deg) translateX(${size*0.3}px) rotate(-240deg)} 100%{transform:rotate(600deg) translateX(${size*0.3}px) rotate(-600deg)} }
        @keyframes corePulse { 0%,100%{transform:scale(1);box-shadow:0 0 ${size*0.15}px ${color}60} 50%{transform:scale(1.15);box-shadow:0 0 ${size*0.3}px ${color}90} }
      `}</style>
      {/* Orbital rings */}
      {[0, 60, -60].map((rot, i) => (
        <div key={i} style={{
          position: "absolute", inset: `${size*0.1}px`,
          borderRadius: "50%",
          border: `1px solid ${color}25`,
          transform: `rotateX(${rot}deg) rotateY(${i*20}deg)`,
        }} />
      ))}
      {/* Electrons */}
      {[
        { anim: "orbit1", dur: "3s", c: Q.cyan },
        { anim: "orbit2", dur: "4s", c: Q.magenta },
        { anim: "orbit3", dur: "5s", c: Q.green },
      ].map((e, i) => (
        <div key={i} style={{
          position: "absolute",
          top: "50%", left: "50%",
          width: 6, height: 6,
          marginLeft: -3, marginTop: -3,
          borderRadius: "50%",
          background: e.c,
          boxShadow: `0 0 8px ${e.c}`,
          animation: `${e.anim} ${e.dur} linear infinite`,
        }} />
      ))}
      {/* Core */}
      <div style={{
        position: "absolute",
        top: "50%", left: "50%",
        transform: "translate(-50%,-50%)",
        width: size * 0.22, height: size * 0.22,
        borderRadius: "50%",
        background: `radial-gradient(circle, ${color}, ${color}40)`,
        animation: "corePulse 2s ease-in-out infinite",
      }} />
    </div>
  );
}

/* â”€â”€â”€ Energy Level Diagram â”€â”€â”€ */
function EnergyLevel({ levels, activeIdx, onSelect }) {
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 2, padding: "16px 0" }}>
      {levels.map((lv, i) => (
        <div
          key={i}
          onClick={() => onSelect(i)}
          style={{
            display: "flex", alignItems: "center", gap: 12,
            padding: "10px 16px",
            background: activeIdx === i ? `${lv.color}12` : "transparent",
            borderLeft: `3px solid ${activeIdx === i ? lv.color : "transparent"}`,
            cursor: "pointer",
            transition: "all 0.3s",
          }}
        >
          <div style={{
            width: "60%", height: 3,
            background: `linear-gradient(90deg, ${lv.color}${activeIdx === i ? "" : "40"}, transparent)`,
            borderRadius: 2,
            boxShadow: activeIdx === i ? `0 0 10px ${lv.color}50` : "none",
            transition: "all 0.3s",
          }} />
          <span style={{
            fontSize: 12, fontFamily: font,
            color: activeIdx === i ? lv.color : Q.textMuted,
            fontWeight: activeIdx === i ? 700 : 400,
          }}>
            {lv.label}
          </span>
        </div>
      ))}
    </div>
  );
}

/* â”€â”€â”€ Depth Profile Visualization (Gaussian / Channeling) â”€â”€â”€ */
function DepthProfile({ type = "gaussian", color = Q.cyan, label, sigma = 0.08, peak = 0.4, tailStrength = 0 }) {
  // type: "gaussian" | "channeling" | "combined"
  // Renders physically correct ion implantation depth profiles:
  //   gaussian â†’ bell curve (straggle distribution)
  //   channeling â†’ gaussian + exponential tail (deep penetration)
  //   combined â†’ gaussian + channeling tail + surface loss

  const W = 200, H = 70;
  const baseline = H - 8;

  const gaussian = (x, mu, sig) => Math.exp(-0.5 * ((x - mu) / sig) ** 2);

  const buildPts = () => {
    const pts = [];
    for (let px = 0; px <= W; px += 1) {
      const x = px / W; // 0~1 normalized depth
      let y = 0;

      if (type === "gaussian") {
        y = gaussian(x, peak, sigma);
      } else if (type === "channeling") {
        // Gaussian peak + exponential tail beyond peak
        const g = gaussian(x, peak, sigma);
        const tail = x > peak ? tailStrength * Math.exp(-(x - peak) * 4) : 0;
        y = Math.max(g, tail);
      } else if (type === "combined") {
        // Main gaussian
        const g = gaussian(x, peak, sigma);
        // Channeling tail (deep penetration beyond Rp)
        const tail = x > peak ? 0.5 * Math.exp(-(x - peak) * 3.5) : 0;
        // Surface depletion: backscattered ions exit the sample,
        // so near-surface concentration is REDUCED (not increased).
        // Model as suppression factor approaching x=0
        const surfDepletion = x < peak ? Math.min(1, (x / (peak * 0.4)) ** 1.5) : 1;
        y = (g + tail) * surfDepletion;
      }

      const plotY = baseline - y * (baseline - 10);
      pts.push(`${px},${Math.max(10, plotY)}`);
    }
    return pts;
  };

  const pts = buildPts();
  // Fill area
  const fillPts = [`0,${baseline}`, ...pts, `${W},${baseline}`].join(" ");

  // Unique id for gradient
  const gid = `dp-${label}-${type}`.replace(/[^a-zA-Z0-9]/g, "");

  return (
    <div style={{ position: "relative", marginBottom: 4 }}>
      <svg width="100%" viewBox={`0 0 ${W} ${H}`} style={{ display: "block" }}>
        <defs>
          <linearGradient id={`${gid}-fill`} x1="0" x2="0" y1="0" y2="1">
            <stop offset="0%" stopColor={color} stopOpacity="0.3" />
            <stop offset="100%" stopColor={color} stopOpacity="0.02" />
          </linearGradient>
        </defs>
        {/* Axis */}
        <line x1="0" y1={baseline} x2={W} y2={baseline} stroke={Q.border} strokeWidth="0.5" />
        {/* Rp marker (peak depth) */}
        <line x1={peak * W} y1={8} x2={peak * W} y2={baseline} stroke={`${color}30`} strokeWidth="0.5" strokeDasharray="3,3" />
        <text x={peak * W} y={6} textAnchor="middle" fill={`${color}80`} fontSize={7} fontFamily={font}>Rp</text>
        {/* Fill */}
        <polygon points={fillPts} fill={`url(#${gid}-fill)`} />
        {/* Line */}
        <polyline points={pts.join(" ")} fill="none" stroke={color} strokeWidth="1.5" opacity="0.9" />
        {/* Axis labels */}
        <text x={W - 4} y={baseline + 7} textAnchor="end" fill={Q.textMuted} fontSize={6} fontFamily={font}>ê¹Šì´ â†’</text>
        <text x={4} y={14} fill={Q.textMuted} fontSize={6} fontFamily={font}>ë†ë„ â†‘</text>
        {/* Channeling tail annotation */}
        {(type === "channeling" || type === "combined") && (
          <text x={W * 0.75} y={baseline - 12} textAnchor="middle" fill={Q.magenta} fontSize={7} fontFamily={font} fontWeight="bold">
            channeling tail â†’
          </text>
        )}
        {type === "combined" && (
          <text x={W * 0.06} y={baseline - 8} textAnchor="middle" fill={Q.red} fontSize={7} fontFamily={font}>
            â† í›„ë°©ì‚°ë€ ì†ì‹¤
          </text>
        )}
      </svg>
      {label && (
        <div style={{ display: "flex", justifyContent: "space-between", padding: "0 4px" }}>
          <span style={{ fontSize: 10, color, fontFamily: font, fontWeight: 600 }}>{label}</span>
          <span style={{ fontSize: 9, color: Q.textMuted, fontFamily: font }}>
            {type === "gaussian" ? "ê°€ìš°ì‹œì•ˆ ë¶„í¬" : type === "channeling" ? "ê°€ìš°ì‹œì•ˆ + ì§€ìˆ˜ tail" : "ë³µí•© ë¶„í¬"}
          </span>
        </div>
      )}
    </div>
  );
}

/* â”€â”€â”€ Lateral (íš¡ë°©í–¥) Profile: Gaussian centered at beam axis â”€â”€â”€ */
function LateralProfile({ color = Q.cyan, label, sigma = 0.1 }) {
  const W = 200, H = 60;
  const baseline = H - 8;
  const center = W / 2;

  const pts = [];
  const fillPts = [];
  for (let px = 0; px <= W; px += 1) {
    const x = (px - center) / W; // normalized lateral position (-0.5 ~ +0.5)
    const y = Math.exp(-0.5 * (x / sigma) ** 2);
    const plotY = baseline - y * (baseline - 10);
    pts.push(`${px},${Math.max(10, plotY)}`);
  }
  const fillStr = [`0,${baseline}`, ...pts, `${W},${baseline}`].join(" ");

  return (
    <div style={{ position: "relative", marginBottom: 4 }}>
      <svg width="100%" viewBox={`0 0 ${W} ${H}`} style={{ display: "block" }}>
        <defs>
          <linearGradient id={`lp-${sigma}`} x1="0" x2="0" y1="0" y2="1">
            <stop offset="0%" stopColor={color} stopOpacity="0.3" />
            <stop offset="100%" stopColor={color} stopOpacity="0.02" />
          </linearGradient>
        </defs>
        {/* Axis */}
        <line x1="0" y1={baseline} x2={W} y2={baseline} stroke={Q.border} strokeWidth="0.5" />
        {/* Center line (beam axis) */}
        <line x1={center} y1={8} x2={center} y2={baseline} stroke={`${color}30`} strokeWidth="0.5" strokeDasharray="3,3" />
        <text x={center} y={6} textAnchor="middle" fill={`${color}80`} fontSize={7} fontFamily={font}>ë¹” ì¶•</text>
        {/* Ïƒ markers */}
        {[-1, 1].map(sign => {
          const sx = center + sign * sigma * W;
          return sx > 0 && sx < W ? (
            <g key={sign}>
              <line x1={sx} y1={baseline - 5} x2={sx} y2={baseline + 2} stroke={`${color}50`} strokeWidth="0.5" />
              <text x={sx} y={baseline + 8} textAnchor="middle" fill={`${color}60`} fontSize={6} fontFamily={font}>
                {sign > 0 ? "+Ïƒ" : "-Ïƒ"}
              </text>
            </g>
          ) : null;
        })}
        {/* Fill */}
        <polygon points={fillStr} fill={`url(#lp-${sigma})`} />
        {/* Line */}
        <polyline points={pts.join(" ")} fill="none" stroke={color} strokeWidth="1.5" opacity="0.9" />
        {/* Axis labels */}
        <text x={W - 4} y={baseline + 7} textAnchor="end" fill={Q.textMuted} fontSize={6} fontFamily={font}>â† íš¡ë°©í–¥ ìœ„ì¹˜ â†’</text>
        <text x={4} y={14} fill={Q.textMuted} fontSize={6} fontFamily={font}>ë†ë„ â†‘</text>
      </svg>
      {label && (
        <div style={{ display: "flex", justifyContent: "space-between", padding: "0 4px" }}>
          <span style={{ fontSize: 10, color, fontFamily: font, fontWeight: 600 }}>{label}</span>
          <span style={{ fontSize: 9, color: Q.textMuted, fontFamily: font }}>ë¹” ì¶• ì¤‘ì‹¬ ê°€ìš°ì‹œì•ˆ</span>
        </div>
      )}
    </div>
  );
}
function ProcessWindowBox({ activeWindow }) {
  const colors = [Q.red, Q.yellow, Q.green];
  const c = colors[activeWindow] || Q.glow;
  return (
    <div style={{ perspective: 600, margin: "20px auto", width: 200, height: 200 }}>
      <div style={{
        width: 160, height: 160, margin: "20px auto",
        position: "relative",
        transformStyle: "preserve-3d",
        transform: "rotateX(-15deg) rotateY(25deg)",
        animation: "slowSpin 20s linear infinite",
      }}>
        <style>{`@keyframes slowSpin { 0%{transform:rotateX(-15deg) rotateY(25deg)} 100%{transform:rotateX(-15deg) rotateY(385deg)} }`}</style>
        {/* 6 faces of the box */}
        {[
          { t: "rotateY(0deg) translateZ(80px)", label: "Ïƒ_xy" },
          { t: "rotateY(180deg) translateZ(80px)", label: "" },
          { t: "rotateY(90deg) translateZ(80px)", label: "Ïƒ_z" },
          { t: "rotateY(-90deg) translateZ(80px)", label: "" },
          { t: "rotateX(90deg) translateZ(80px)", label: "" },
          { t: "rotateX(-90deg) translateZ(80px)", label: "D_it" },
        ].map((face, i) => (
          <div key={i} style={{
            position: "absolute",
            width: 160, height: 160,
            background: `${c}08`,
            border: `1px solid ${c}30`,
            transform: face.t,
            backfaceVisibility: "hidden",
            display: "flex", alignItems: "center", justifyContent: "center",
          }}>
            {face.label && (
              <span style={{ color: `${c}80`, fontSize: 14, fontFamily: font, fontWeight: 700 }}>
                {face.label}
              </span>
            )}
          </div>
        ))}
        {/* Center qubit */}
        <div style={{
          position: "absolute",
          top: "50%", left: "50%",
          transform: "translate(-50%,-50%)",
          width: 12, height: 12,
          borderRadius: "50%",
          background: Q.glow,
          boxShadow: `0 0 20px ${Q.glow}80`,
        }} />
      </div>
    </div>
  );
}

/* â”€â”€â”€ Straggle Simulation â”€â”€â”€ */
function StraggleSim({ withBQB }) {
  const [dots, setDots] = useState([]);
  const [running, setRunning] = useState(false);
  const timerRef = useRef(null);

  const run = () => {
    setDots([]);
    setRunning(true);
    let count = 0;
    timerRef.current = setInterval(() => {
      count++;
      const cx = 100, cy = 100;
      const angle = Math.random() * Math.PI * 2;
      const spreadX = withBQB ? 12 : 35;
      const spreadY = withBQB ? 8 : 40;
      let dx = (Math.random() - 0.5) * spreadX * 2;
      let dy = (Math.random() - 0.5) * spreadY * 2;
      // channeling tail for non-BQB
      if (!withBQB && Math.random() < 0.15) dy = -(Math.random() * 60 + 20);
      const x = cx + dx;
      const y = cy + dy;
      const inWindow = withBQB
        ? Math.abs(dx) <= 15 && Math.abs(dy) <= 10
        : Math.abs(dx) <= 10 && Math.abs(dy) <= 8;
      setDots(prev => [...prev, { x, y, ok: inWindow }]);
      if (count >= 60) {
        clearInterval(timerRef.current);
        setRunning(false);
      }
    }, 50);
  };

  useEffect(() => () => clearInterval(timerRef.current), []);

  const okCount = dots.filter(d => d.ok).length;
  const yieldPct = dots.length > 0 ? Math.round(okCount / dots.length * 100) : 0;

  return (
    <div style={{ textAlign: "center" }}>
      <svg width="200" height="200" viewBox="0 0 200 200" style={{ background: `${Q.void}`, borderRadius: 12, border: `1px solid ${Q.border}` }}>
        {/* BQB walls */}
        {withBQB && (
          <rect x={85} y={90} width={30} height={20} rx={2}
            fill="none" stroke={Q.green} strokeWidth={2} strokeDasharray="4,2" opacity={0.6}>
            <animate attributeName="opacity" values="0.4;0.8;0.4" dur="2s" repeatCount="indefinite" />
          </rect>
        )}
        {/* Target zone */}
        <rect x={90} y={92} width={20} height={16} rx={1}
          fill={`${Q.glow}10`} stroke={`${Q.glow}20`} strokeWidth={0.5} />
        {/* Dots */}
        {dots.map((d, i) => (
          <circle key={i} cx={d.x} cy={d.y} r={2}
            fill={d.ok ? Q.green : Q.red} opacity={0.8}>
            <animate attributeName="r" from="4" to="2" dur="0.3s" fill="freeze" />
          </circle>
        ))}
        {/* Label */}
        <text x={100} y={16} textAnchor="middle" fill={Q.textMuted} fontSize={9} fontFamily={font}>
          {withBQB ? "BQB êµ¬ì† ì£¼ì…" : "ììœ  ì£¼ì… (conventional)"}
        </text>
        {dots.length > 0 && (
          <text x={100} y={190} textAnchor="middle" fill={yieldPct > 70 ? Q.green : Q.red} fontSize={11} fontFamily={font} fontWeight="bold">
            ìˆ˜ìœ¨: {yieldPct}% ({okCount}/{dots.length})
          </text>
        )}
      </svg>
      <button
        onClick={run}
        disabled={running}
        style={{
          marginTop: 12,
          background: running ? Q.surface : `${Q.glow}20`,
          border: `1px solid ${running ? Q.border : Q.glow}`,
          color: running ? Q.textMuted : Q.glow,
          borderRadius: 6, padding: "8px 20px",
          cursor: running ? "default" : "pointer",
          fontSize: 12, fontFamily: font, fontWeight: 600,
        }}
      >
        {running ? "ì‹œë®¬ë ˆì´ì…˜ ì¤‘..." : "â–¶ ì´ì˜¨ ì£¼ì… ì‹œë®¬ë ˆì´ì…˜"}
      </button>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SECTIONS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â”€â”€â”€ SEC 1: ì´ì˜¨ ì£¼ì…ê³¼ ì‚°ë€ ë¬¼ë¦¬ â”€â”€â”€ */
function IonPhysicsSection() {
  const [mode, setMode] = useState("straggle");
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 24 }}>
      <GlowCard title="ì´ì˜¨ ì£¼ì…ì˜ ë¬¼ë¦¬ì  í•œê³„" icon="âš›ï¸" color={Q.cyan}>
        <p style={ps}>
          ë°˜ë„ì²´ íë¹„íŠ¸ ë°°ì—´ì˜ ì¶œë°œì ì€ <M>ì´ì˜¨ ì£¼ì…(ion implantation)</M>ì…ë‹ˆë‹¤.
          ê°€ì†ëœ Â³Â¹Pâº ì´ì˜¨ì´ Si ê²©ìì— ì§„ì…í•˜ë©´ <M>í•µ ì¶©ëŒ(nuclear stopping)</M>ê³¼{" "}
          <M>ì „ì ì œë™(electronic stopping)</M>ì„ ê²ªìœ¼ë©° ê°ì†ë©ë‹ˆë‹¤.
        </p>
        <p style={ps}>
          ë¬¸ì œëŠ” ì´ ê³¼ì •ì´ <Em c={Q.red}>í™•ë¥ ì </Em>ì´ë¼ëŠ” ì ì…ë‹ˆë‹¤. ë™ì¼ ì—ë„ˆì§€ë¡œ ì£¼ì…í•´ë„
          ìµœì¢… ì •ì§€ ìœ„ì¹˜ëŠ” <M>í†µê³„ì  ë¶„í¬(straggle)</M>ë¥¼ ë”°ë¥´ë©°,
          íŠ¹íˆ ê²°ì • ì¶•ê³¼ ì •ë ¬ë˜ë©´ <M>ì±„ë„ë§(channeling)</M>ìœ¼ë¡œ ì˜ˆì¸¡ ë¶ˆê°€í•œ ê¹Šì´ê¹Œì§€ ê´€í†µí•©ë‹ˆë‹¤.
        </p>
      </GlowCard>

      <div style={{ display: "flex", gap: 8 }}>
        {[
          { id: "straggle", label: "ì¢…/íš¡ ì‚°ë€", color: Q.cyan },
          { id: "channeling", label: "ì±„ë„ë§ tail", color: Q.magenta },
          { id: "combined", label: "ë³µí•© ë¶„í¬", color: Q.red },
        ].map(t => (
          <TabBtn key={t.id} active={mode === t.id} color={t.color}
            onClick={() => setMode(t.id)}>{t.label}</TabBtn>
        ))}
      </div>

      <div style={{ background: Q.card, borderRadius: 12, padding: 20, border: `1px solid ${Q.border}` }}>
        {mode === "straggle" && (
          <>
            {/* ì¢…ë°©í–¥: ê¹Šì´ ë°©í–¥ ê°€ìš°ì‹œì•ˆ ë¶„í¬ */}
            <DepthProfile type="gaussian" color={Q.glow} label="ì¢…ë°©í–¥ ê¹Šì´ ë¶„í¬ (Ïƒ_z)" sigma={0.06} peak={0.35} />
            {/* íš¡ë°©í–¥: ë¹” ì¤‘ì‹¬ ê¸°ì¤€ ì¢Œìš° ê°€ìš°ì‹œì•ˆ ë¶„í¬ */}
            <LateralProfile color={Q.cyan} label="íš¡ë°©í–¥ ìœ„ì¹˜ ë¶„í¬ (Ïƒ_xy)" sigma={0.12} />
            <p style={{ ...ps, marginTop: 12 }}>
              <M>ì¢…ë°©í–¥ ì‚°ë€(longitudinal straggle, Ïƒ_z)</M>: ê¹Šì´ ë°©í–¥ ì •ì§€ ìœ„ì¹˜ì˜ ë¶„ì‚°.
              ì´ì˜¨ì´ í‰ê·  ì •ì§€ ê¹Šì´(Rp) ì£¼ë³€ì— <Em c={Q.glow}>ê°€ìš°ì‹œì•ˆ ë¶„í¬</Em>ë¡œ ë¶„í¬í•©ë‹ˆë‹¤.
              ì£¼ì… ì—ë„ˆì§€ì— ë¹„ë¡€í•˜ì—¬ ë¶„ì‚°ì´ ì¦ê°€í•©ë‹ˆë‹¤.
            </p>
            <p style={ps}>
              <M>íš¡ë°©í–¥ ì‚°ë€(lateral straggle, Ïƒ_xy)</M>: ë¹” ì…ì‚¬ì  ê¸°ì¤€ ì¢Œìš° í™•ì‚°.
              í•µ ì¶©ëŒì— ì˜í•œ ë¬´ì‘ìœ„ ë°©í–¥ ì „í™˜ì´ ì›ì¸ì´ë©°,
              keVê¸‰ ì—ë„ˆì§€ì—ì„œ ìˆ˜~ìˆ˜ì‹­ nm ë²”ìœ„ì˜ <Em c={Q.cyan}>ê°€ìš°ì‹œì•ˆ ë¶„í¬</Em>ë¥¼ ë”°ë¦…ë‹ˆë‹¤.
            </p>
            <ParamBox params={[
              { name: "ëª©í‘œ", value: "Ïƒ_xy: â‰¤20 nm(1ì°¨) â†’ â‰¤10 nm(5ì°¨), Ïƒ_z: â‰¤10 nm(1ì°¨) â†’ â‰¤5 nm(5ì°¨)", color: Q.green },
              { name: "í˜„ì‹¤", value: "ë¹„êµ¬ì† ì£¼ì… ì‹œ Ïƒ_xy ~ 20-50 nm", color: Q.red },
            ]} />
          </>
        )}
        {mode === "channeling" && (
          <>
            {/* ê°€ìš°ì‹œì•ˆ + ì§€ìˆ˜ê°ì‡  tail */}
            <DepthProfile type="channeling" color={Q.magenta} label="ì±„ë„ë§ ê¹Šì´ ë¶„í¬" sigma={0.06} peak={0.25} tailStrength={0.6} />
            <p style={{ ...ps, marginTop: 12 }}>
              Si ê²°ì •ì˜ <M>&lt;100&gt; ì¶•</M>ìœ¼ë¡œ ì´ì˜¨ì´ ì§„ì…í•˜ë©´ ê²©ì ì›ì ì‚¬ì´ ì±„ë„ì„ ë”°ë¼
              ìˆ˜ë°± nmê¹Œì§€ ê´€í†µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¹Šì´ ë¶„í¬ì—ì„œ ê°€ìš°ì‹œì•ˆ í”¼í¬ ì´í›„
              <Em c={Q.magenta}> ì§€ìˆ˜ì ìœ¼ë¡œ ê°ì‡ í•˜ëŠ” ê¸´ tail</Em>ì´ ë‚˜íƒ€ë‚˜ë©°,
              ì´ ë¹„ê°€ìš°ì‹œì•ˆ tailì´ ê³µì •ì°½ ì´íƒˆì˜ ì£¼ìš” ì›ì¸ì…ë‹ˆë‹¤.
            </p>
            <p style={ps}>
              BQB-B ì¥ë²½ì€ ì´ ì±„ë„ë§ tailì„ <Em c={Q.green}>ë¬¼ë¦¬ì ìœ¼ë¡œ ì ˆë‹¨</Em>í•©ë‹ˆë‹¤.
              ì¥ë²½ ê¹Šì´(80~300 nm)ê°€ ì´ì˜¨ ì¹¨íˆ¬ì˜ ë¬¼ë¦¬ì  ìƒí•œì„ ê°•ì œí•˜ì—¬,
              tail ì˜ì—­ì˜ ì´ì˜¨ì´ ì „ê¸°ì ìœ¼ë¡œ ë¹„í™œì„±í™”ë©ë‹ˆë‹¤.
            </p>
          </>
        )}
        {mode === "combined" && (
          <>
            {/* ë‹¨ì¼ ê·¸ë˜í”„ì— ì„¸ ì„±ë¶„ì„ í•©ì„± */}
            <DepthProfile type="combined" color={Q.red} label="ì‹¤ì œ ê¹Šì´ ë¶„í¬ (3ì„±ë¶„ í•©ì„±)" sigma={0.06} peak={0.3} />
            <p style={{ ...ps, marginTop: 12 }}>
              ì‹¤ì œ ë¶„í¬ëŠ” ì„¸ ê°€ì§€ íš¨ê³¼ê°€ ì¤‘ì²©ë©ë‹ˆë‹¤:
              (1) <Em c={Q.glow}>ê°€ìš°ì‹œì•ˆ ì‚°ë€</Em> â€” Rp ì£¼ë³€ì˜ ì£¼ ë¶„í¬,
              (2) <Em c={Q.magenta}>ì±„ë„ë§ tail</Em> â€” ê¹Šì€ ë°©í–¥ìœ¼ë¡œì˜ ì§€ìˆ˜ì  ì¹¨íˆ¬,
              (3) <Em c={Q.red}>í›„ë°©ì‚°ë€ ì†ì‹¤</Em> â€” í‘œë©´ ë¶€ê·¼ ì´ì˜¨ì´ ì‹œë£Œ ë°–ìœ¼ë¡œ ë¹ ì ¸ë‚˜ê°€
              í‘œë©´ ê·¼ì²˜ ë†ë„ê°€ <Em c={Q.red}>ê°ì†Œ</Em>í•©ë‹ˆë‹¤.
            </p>
            <p style={ps}>
              ë‹¨ì¼ íë¹„íŠ¸ì—ì„œëŠ” í›„ì„ ë³„ë¡œ ëŒ€ì‘ ê°€ëŠ¥í•˜ë‚˜,
              <Em c={Q.red}> ë°°ì—´ì—ì„œëŠ” ëª¨ë“  ì‚¬ì´íŠ¸ê°€ ë™ì‹œì— í—ˆìš© ë²”ìœ„ ì•ˆì— ë“¤ì–´ì™€ì•¼</Em> í•˜ë¯€ë¡œ
              í™•ë¥ ì  ì ‘ê·¼ì´ ê·¼ë³¸ì ìœ¼ë¡œ ë¶ˆê°€í•©ë‹ˆë‹¤.
            </p>
          </>
        )}
      </div>
    </div>
  );
}

/* â”€â”€â”€ SEC 2: ê³µì •ì°½ ì •ëŸ‰ ê·œê²© â”€â”€â”€ */
function ProcessWindowSection() {
  const [activeW, setActiveW] = useState(0);
  const windows = [
    {
      label: "ê¸°í•˜í•™ì  ì°½",
      eng: "Geometric Window",
      color: Q.red,
      icon: "ğŸ“",
      params: [
        { name: "ì •ì˜", value: "ìœ íš¨ 3D ì˜ì—­ ì œí•œ â€” straggle/channeling tailì„ ë¬¼ë¦¬ì ìœ¼ë¡œ ë°°ì œ" },
        { name: "BQB ê°œêµ¬", value: "CD 40~120 nm (ìœ íš¨ ì£¼ì… ì˜ì—­)" },
        { name: "ì¥ë²½ ê¹Šì´", value: "80~300 nm (ì±„ë„ë§ ìƒí•œ ì ˆë‹¨)" },
        { name: "Ïƒ_xy ëª©í‘œ", value: "â‰¤ 20 nm (1ì°¨ë…„ë„) â†’ â‰¤ 10 nm (5ì°¨ë…„ë„)" },
        { name: "Ïƒ_z ëª©í‘œ", value: "â‰¤ 10 nm (1ì°¨ë…„ë„) â†’ â‰¤ 5 nm (5ì°¨ë…„ë„)" },
      ],
      detail: "BQB í…œí”Œë¦¿ì˜ ê°œêµ¬(aperture)ê°€ íš¡ë°©í–¥ ì‚°ë€ì„ êµ¬ì†í•˜ê³ , ë§¤ë¦½ ì¥ë²½(BQB-B)ì´ ì¢…ë°©í–¥ìœ¼ë¡œ ì±„ë„ë§ tailì„ ì ˆë‹¨í•©ë‹ˆë‹¤. ì´ ë‘ ê°€ì§€ê°€ ê²°í•©ë˜ì–´ ìœ íš¨ 3D ì˜ì—­(effective capture volume)ì„ ì •ì˜í•˜ë©°, ì´ ì˜ì—­ ë°–ì˜ ì´ì˜¨ì€ ì „ê¸°ì ìœ¼ë¡œ ë¹„í™œì„±í™”ë©ë‹ˆë‹¤.",
    },
    {
      label: "ì „ê¸°ì  ì°½",
      eng: "Electrostatic Window",
      color: Q.yellow,
      icon: "âš¡",
      params: [
        { name: "ì •ì˜", value: "íë¹„íŠ¸ ì£¼ë³€ ì „í•˜ í™˜ê²½ì˜ í—ˆìš© ë³€ë™ ë²”ìœ„ ì •ëŸ‰í™”" },
        { name: "D_it", value: "â‰¤ 10Â¹â° cmâ»Â²eVâ»Â¹ (ê³„ë©´ íŠ¸ë© ë°€ë„)" },
        { name: "Q_f", value: "â‰¤ 5 Ã— 10Â¹â° cmâ»Â² (ê³ ì • ì „í•˜)" },
        { name: "|âˆ‡E|", value: "~ 1-10 kV/cm (êµ­ë¶€ ì „ê³„ ê¸°ìš¸ê¸°)" },
        { name: "S_Q(1Hz)", value: "â‰ˆ 10â»Â³ e/âˆšHz (1/f ì „í•˜ ì¡ìŒ)" },
      ],
      detail: "ê³„ë©´ íŠ¸ë©(D_it)ì€ ê²Œì´íŠ¸-ì‹¤ë¦¬ì½˜ ê³„ë©´ì— ì¡´ì¬í•˜ëŠ” ê²°í•¨ìœ¼ë¡œ, íë¹„íŠ¸ ì£¼íŒŒìˆ˜ë¥¼ ë¬´ì‘ìœ„ë¡œ í”ë“­ë‹ˆë‹¤. ê³ ì • ì „í•˜(Q_f)ëŠ” ì‚°í™”ë§‰ì— ê°‡íŒ ì „í•˜ë¡œ ì „ê³„ í™˜ê²½ì„ ì™œê³¡í•©ë‹ˆë‹¤. BQBì˜ íŒ¨ì‹œë² ì´ì…˜ ê³µì •ê³¼ Triple-Wallì˜ T3 guard ringì´ ì´ ë‘ ê°€ì§€ë¥¼ ë™ì‹œì— ì–µì œí•©ë‹ˆë‹¤.",
    },
    {
      label: "ì •ë ¬ ì°½",
      eng: "Alignment Window",
      color: Q.green,
      icon: "ğŸ¯",
      params: [
        { name: "ì •ì˜", value: "Q ì¢Œí‘œê³„ â†” ë°°ì„ /íŒ¨í‚¤ì§• ì¢Œí‘œê³„ ê°„ ì˜¤ì°¨ ì˜ˆì‚° ì‚¬ì „ ê·œê²©í™”" },
        { name: "Q-ê²Œì´íŠ¸", value: "overlay â‰¤ 15 nm (íë¹„íŠ¸-ê²Œì´íŠ¸ ì •ë ¬)" },
        { name: "Q-íŒ¨í‚¤ì§•", value: "overlay â‰¤ 30 nm (ì¹©-íŒ¨í‚¤ì§€ ì •ë ¬)" },
        { name: "ê²€ì¦", value: "Î”R/R ì €í•­ ë³€í™”, ëˆ„ì„¤ì „ë¥˜, ì—´ ì‚¬ì´í´ í…ŒìŠ¤íŠ¸" },
      ],
      detail: "íë¹„íŠ¸ì˜ ë¬¼ë¦¬ì  ìœ„ì¹˜ì™€ ê·¸ ìœ„ì— í˜•ì„±ë˜ëŠ” ê²Œì´íŠ¸ ì „ê·¹, BEOL ë°°ì„ , ê·¸ë¦¬ê³  DD-IC íŒ¨í‚¤ì§•ì˜ ì¢Œí‘œê³„ê°€ ê°ê° ë…ë¦½ì ìœ¼ë¡œ ì¡´ì¬í•©ë‹ˆë‹¤. ë°°ì—´ì´ ì»¤ì§ˆìˆ˜ë¡ ì´ ì¢Œí‘œê³„ ê°„ ëˆ„ì  ì˜¤ì°¨ê°€ ê¸‰ì¦í•˜ë¯€ë¡œ, BQBëŠ” ê³µì • ì´ˆê¸°ì— ì •ë ¬ ì˜¤ì°¨ ì˜ˆì‚°(tolerance budget)ì„ ê·œê²©í™”í•©ë‹ˆë‹¤.",
    },
  ];
  const w = windows[activeW];

  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 24 }}>
      <GlowCard title='ê³µì •ì°½(Process Window): ë™ì‹œ í—ˆìš© ì˜¤ì°¨ ê·œê²©' icon="ğŸ“" color={Q.glow}>
        <p style={ps}>
          ê³µì •ì°½ì´ë€ <Em c={Q.glow}>íë¹„íŠ¸ê°€ ì •ìƒ ë™ì‘í•˜ê¸° ìœ„í•œ ë‹¤ì°¨ì› í—ˆìš© ì˜¤ì°¨ ê³µê°„</Em>ì˜
          ì •ëŸ‰ì  ì •ì˜ì…ë‹ˆë‹¤. BQBëŠ” ì„¸ ê°€ì§€ ë…ë¦½ ì¶•ì˜ ê³µì •ì°½ì„ <Em c={Q.cyan}>ë™ì‹œì—</Em> ì •ì˜í•˜ê³ ,
          ì´ë¥¼ ë¬¼ë¦¬ì  êµ¬ì¡°ë¡œ ê°•ì œí•©ë‹ˆë‹¤.
        </p>
      </GlowCard>

      {/* 3D Box + Energy Level selector */}
      <div style={{ display: "flex", gap: 20, flexWrap: "wrap" }}>
        <div style={{ flex: "1 1 200px", minWidth: 200 }}>
          <ProcessWindowBox activeWindow={activeW} />
        </div>
        <div style={{ flex: "1 1 200px" }}>
          <EnergyLevel
            levels={windows.map(ww => ({ label: ww.label, color: ww.color }))}
            activeIdx={activeW}
            onSelect={setActiveW}
          />
        </div>
      </div>

      {/* Detail card */}
      <div style={{
        background: `${w.color}08`,
        borderRadius: 12, padding: 24,
        border: `1px solid ${w.color}25`,
        transition: "all 0.4s",
      }}>
        <div style={{ display: "flex", alignItems: "center", gap: 10, marginBottom: 16 }}>
          <span style={{ fontSize: 24 }}>{w.icon}</span>
          <div>
            <div style={{ fontSize: 16, fontWeight: 800, color: w.color }}>{w.label}</div>
            <div style={{ fontSize: 11, color: Q.textMuted, fontFamily: font }}>{w.eng}</div>
          </div>
        </div>
        <p style={{ ...ps, marginBottom: 16 }}>{w.detail}</p>
        <div style={{ display: "flex", flexDirection: "column", gap: 6 }}>
          {w.params.map((p, i) => (
            <div key={i} style={{
              display: "flex", gap: 12, alignItems: "baseline",
              padding: "6px 12px",
              background: `${Q.void}80`,
              borderRadius: 6,
              borderLeft: `2px solid ${w.color}40`,
            }}>
              <span style={{ fontSize: 11, color: w.color, fontFamily: font, fontWeight: 700, minWidth: 80 }}>
                {p.name}
              </span>
              <span style={{ fontSize: 12, color: Q.textDim, fontFamily: font }}>
                {p.value}
              </span>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
}

/* â”€â”€â”€ SEC 3: Triple-Wall êµ¬ì¡° ë¬¼ë¦¬ â”€â”€â”€ */
function TripleWallSection() {
  const [depth, setDepth] = useState(0);
  const walls = [
    {
      name: "Wall-1: STI ê²©ë¦¬ moat",
      color: Q.red,
      physics: "Shallow Trench Isolation",
      mech: "íƒ€ì¼ ê²½ê³„ì— SiOâ‚‚ ì¶©ì „ íŠ¸ë Œì¹˜ë¥¼ í˜•ì„±í•˜ì—¬ ì¸ì ‘ íë¹„íŠ¸ ê°„ ê¸°íŒ ì»¤í”Œë§ê³¼ í‘œë©´ ëˆ„ì„¤ ì „ë¥˜ ê²½ë¡œë¥¼ ë¬¼ë¦¬ì ìœ¼ë¡œ ì ˆë‹¨í•©ë‹ˆë‹¤.",
      effect: "ê¸°íŒ ì»¤í”Œë§ í¬ë¡œìŠ¤í† í¬ ì°¨ë‹¨, í‘œë©´ ëˆ„ì„¤ ì „ë¥˜ ì–µì œ, overlay ê¸°ì¤€ ê²½ê³„ í™•ë³´",
      kpi: "moat í­/ê°„ê²©, íƒ€ì¼ pitch, ê¸ˆì†/ë¹„ì•„ keep-out ì„¤ê³„ ë³€ìˆ˜ë¡œ ì œì–´",
    },
    {
      name: "Wall-2: T3 Triple Well + Guard Ring",
      color: Q.yellow,
      physics: "True Triple Well isolation",
      mech: "deep n-well / p-well / n-well ì˜ 3ì¤‘ ìš°ë¬¼ êµ¬ì¡°ë¡œ back-gateì™€ ì›° ë„ë©”ì¸ì„ ì „ê¸°ì ìœ¼ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤. ì™¸ê³½ quiet guard ringì´ ì”ì—¬ ì „ê³„ ì¹¨íˆ¬ë¥¼ ì¶”ê°€ ê°ì‡ í•©ë‹ˆë‹¤.",
      effect: "|âˆ‡E| ë¯¼ê°ë„ ì €ê°, 1/f ì „í•˜ì¡ìŒ ë‚´ì„± í–¥ìƒ, 77K DD-IC ìŠ¤ìœ„ì¹­ ë…¸ì´ì¦ˆ ì°¨í",
      kpi: "ì „ê³„ êµ¬ë°° |âˆ‡E| < 10 kV/cm, S_Q(1Hz) < 10â»Â³ e/âˆšHz",
    },
    {
      name: "Wall-3: BQB-B ë§¤ë¦½ ì¥ë²½",
      color: Q.green,
      physics: "Buried barrier/template layer",
      mech: "Si ê¸°íŒ ë‚´ë¶€ì— í˜•ì„±ëœ ê³ ë†ë„ ë„í•‘/ì‚°í™” ì¥ë²½(ê¹Šì´ 80~300nm, ê°œêµ¬ CD 40~120nm)ì´ ì´ì˜¨ ì£¼ì… ì‹œ ì¢…ë°©í–¥ ì¹¨íˆ¬ë¥¼ ë¬¼ë¦¬ì ìœ¼ë¡œ ì ˆë‹¨í•˜ê³ , íš¡ë°©í–¥ í™•ì‚°ì„ ê°œêµ¬ë¡œ ì œí•œí•©ë‹ˆë‹¤.",
      effect: "ì±„ë„ë§ tail ì ˆë‹¨, í™•ì‚° ì°¨ë‹¨, ê¸°í•˜í•™ì  ê³µì •ì°½ ê°•ì œ",
      kpi: "ì¥ë²½ ê¹Šì´ 80~300 nm, ê°œêµ¬ CD 40~120 nm (ì„¤ê³„ ë³€ìˆ˜ë¡œ ì¡°ì •). Ïƒ_xy/Ïƒ_z ê³µì •ì°½ ê°•ì œ",
    },
  ];

  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 24 }}>
      <GlowCard title="Triple-Wall QBQ: ë‹¤ì¸µ ë°©ì–´ ë¬¼ë¦¬" icon="ğŸ›¡ï¸" color={Q.magenta}>
        <p style={ps}>
          Triple-Wallì€ <Em c={Q.magenta}>ìƒì´í•œ ë¬¼ë¦¬ì  ë©”ì»¤ë‹ˆì¦˜</Em>ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ì„¸ ê²¹ì˜ ê²©ë¦¬ì¸µì…ë‹ˆë‹¤.
          ê° ë²½ì€ ë…ë¦½ì  ìœ„í˜‘ ë²¡í„°ë¥¼ ì°¨ë‹¨í•˜ë©°, ì§ë ¬ êµ¬ì¡°ë¡œ ì”ì—¬ ê°„ì„­ì„ ë‹¨ê³„ì ìœ¼ë¡œ ê°ì‡ ì‹œí‚µë‹ˆë‹¤.
        </p>
      </GlowCard>

      {/* Cross-section visual */}
      <div style={{
        background: Q.card, borderRadius: 12, padding: 24,
        border: `1px solid ${Q.border}`,
      }}>
        <div style={{ position: "relative", width: "100%", maxWidth: 400, margin: "0 auto", aspectRatio: "1.2/1" }}>
          {/* Walls as nested rects with glow */}
          {walls.map((w, i) => {
            const inset = i * 18 + 2;
            return (
              <div
                key={i}
                onClick={() => setDepth(i)}
                style={{
                  position: "absolute",
                  top: `${inset}%`, left: `${inset}%`,
                  right: `${inset}%`, bottom: `${inset}%`,
                  borderRadius: 12 - i * 2,
                  border: `2px solid ${depth === i ? w.color : `${w.color}30`}`,
                  background: depth === i ? `${w.color}10` : "transparent",
                  cursor: "pointer",
                  transition: "all 0.4s",
                  boxShadow: depth === i ? `0 0 30px ${w.color}20, inset 0 0 30px ${w.color}08` : "none",
                }}
              >
                <div style={{
                  position: "absolute", top: 6, left: 10,
                  fontSize: 10, fontWeight: 800, color: w.color,
                  fontFamily: font, letterSpacing: 1,
                  opacity: depth === i ? 1 : 0.5,
                }}>
                  W{i + 1}
                </div>
              </div>
            );
          })}

          {/* Core qubit */}
          <div style={{
            position: "absolute",
            top: "50%", left: "50%",
            transform: "translate(-50%,-50%)",
          }}>
            <QuantumAtom size={60} color={Q.glow} />
          </div>
        </div>

        <div style={{ textAlign: "center", margin: "12px 0 0", fontSize: 11, color: Q.textMuted }}>
          ê° ë²½ì„ í´ë¦­í•˜ì—¬ ë¬¼ë¦¬ì  ë©”ì»¤ë‹ˆì¦˜ í™•ì¸
        </div>
      </div>

      {/* Wall detail */}
      <div style={{
        background: `${walls[depth].color}06`,
        borderRadius: 12, padding: 24,
        border: `1px solid ${walls[depth].color}20`,
        transition: "all 0.4s",
      }}>
        <div style={{ fontSize: 16, fontWeight: 800, color: walls[depth].color, marginBottom: 4, fontFamily: font }}>
          {walls[depth].name}
        </div>
        <div style={{ fontSize: 11, color: Q.textMuted, fontFamily: font, marginBottom: 16 }}>
          {walls[depth].physics}
        </div>

        {[
          { label: "ë©”ì»¤ë‹ˆì¦˜", value: walls[depth].mech },
          { label: "íš¨ê³¼", value: walls[depth].effect },
          { label: "ì •ëŸ‰ ì§€í‘œ", value: walls[depth].kpi },
        ].map((item, i) => (
          <div key={i} style={{
            padding: "10px 14px", marginBottom: 8,
            background: `${Q.void}60`,
            borderRadius: 8,
            borderLeft: `3px solid ${walls[depth].color}40`,
          }}>
            <div style={{ fontSize: 10, fontWeight: 700, color: walls[depth].color, fontFamily: font, marginBottom: 4, letterSpacing: 1 }}>
              {item.label.toUpperCase()}
            </div>
            <div style={{ fontSize: 13, color: Q.textDim, lineHeight: 1.7 }}>{item.value}</div>
          </div>
        ))}
      </div>
    </div>
  );
}

/* â”€â”€â”€ SEC 4: ì´ì˜¨ ì£¼ì… ì‹œë®¬ë ˆì´ì…˜ â”€â”€â”€ */
function SimulationSection() {
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 24 }}>
      <GlowCard title="ì´ì˜¨ ì£¼ì… ì‹œë®¬ë ˆì´ì…˜: ë¹„êµ¬ì† vs BQB êµ¬ì†" icon="ğŸ”¬" color={Q.cyan}>
        <p style={ps}>
          ë™ì¼í•œ 60ê°œ ì´ì˜¨ì„ ì£¼ì…í–ˆì„ ë•Œ, BQB ì¥ë²½ ìœ ë¬´ì— ë”°ë¥¸ ìˆ˜ìœ¨ ì°¨ì´ë¥¼ ì‹œê°ì ìœ¼ë¡œ ë¹„êµí•©ë‹ˆë‹¤.
          <Em c={Q.cyan}> ë…¹ìƒ‰ ì </Em>ì€ ê³µì •ì°½ ë‚´ ì •ì°©, <Em c={Q.red}> ì ìƒ‰ ì </Em>ì€ ê³µì •ì°½ ì´íƒˆì…ë‹ˆë‹¤.
        </p>
      </GlowCard>

      <div style={{ display: "flex", gap: 20, flexWrap: "wrap", justifyContent: "center" }}>
        <div style={{
          background: Q.card, borderRadius: 12, padding: 20,
          border: `1px solid ${Q.red}20`,
          flex: "1 1 220px", maxWidth: 260,
        }}>
          <div style={{ fontSize: 13, fontWeight: 700, color: Q.red, fontFamily: font, marginBottom: 12, textAlign: "center" }}>
            âŒ ë¹„êµ¬ì† ì£¼ì… (Conventional)
          </div>
          <StraggleSim withBQB={false} />
        </div>
        <div style={{
          background: Q.card, borderRadius: 12, padding: 20,
          border: `1px solid ${Q.green}20`,
          flex: "1 1 220px", maxWidth: 260,
        }}>
          <div style={{ fontSize: 13, fontWeight: 700, color: Q.green, fontFamily: font, marginBottom: 12, textAlign: "center" }}>
            âœ… BQB êµ¬ì† ì£¼ì…
          </div>
          <StraggleSim withBQB />
        </div>
      </div>

      <Callout color={Q.glow} icon="ğŸ“Š">
        ë°°ì—´ ìˆ˜ìœ¨ì€ ê°œë³„ ì‚¬ì´íŠ¸ ìˆ˜ìœ¨ì˜ <M>ê±°ë“­ì œê³±</M>ì…ë‹ˆë‹¤.
        ì‚¬ì´íŠ¸ ìˆ˜ìœ¨ 95%ë¡œ 256ê°œ ë°°ì—´ì„ ë§Œë“¤ë©´ ì „ì²´ ìˆ˜ìœ¨ì€ 0.95Â²âµâ¶ â‰ˆ <Em c={Q.red}>0.0002%</Em>.
        ì‚¬ì´íŠ¸ ìˆ˜ìœ¨ì„ 99.5%ë¡œ ì˜¬ë¦¬ë©´ 0.995Â²âµâ¶ â‰ˆ <Em c={Q.green}>28%</Em>.
        ì´ê²ƒì´ ê³µì •ì°½ ê´€ë¦¬ê°€ í•„ìˆ˜ì¸ ì •ëŸ‰ì  ê·¼ê±°ì…ë‹ˆë‹¤.
      </Callout>
    </div>
  );
}

/* â”€â”€â”€ SEC 5: íë£¨í”„ ê³µì • ì²´ê³„ â”€â”€â”€ */
function ClosedLoopSection() {
  const [phase, setPhase] = useState(0);
  const phases = [
    {
      icon: "âš’ï¸", title: "ìƒì„± (Generate)", color: Q.red,
      tools: "BQB í…œí”Œë¦¿ + ë‹¨ì¼ ì´ì˜¨ ì£¼ì… + ì €ì—´ì˜ˆì‚° í™œì„±í™”(low thermal budget activation)",
      detail: "BQB ê°œêµ¬ê°€ ì •ì˜í•œ ì¢Œí‘œì— ë‹¨ì¼ Â³Â¹Pâº ì´ì˜¨ì„ ì£¼ì…í•©ë‹ˆë‹¤. í™œì„±í™” ì–´ë‹ì€ ë„ë„ˆ í™•ì‚°ì„ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ RTA(rapid thermal anneal) ë˜ëŠ” ë ˆì´ì € ì–´ë‹ë¡œ ì—´ì˜ˆì‚°ì„ ì—„ê²©íˆ ì œí•œí•©ë‹ˆë‹¤.",
      output: "Q ìƒì„± ì›¨ì´í¼ (ë„ë„ˆ ìœ„ì¹˜ ë¯¸í™•ì¸ ìƒíƒœ)",
    },
    {
      icon: "ğŸ”¬", title: "ê²€ì¦ (Verify)", color: Q.yellow,
      tools: "nano-CT/XRD-CT + APT + SIMS + TEM + ì €ì˜¨ ì „ê¸°Â·ê´‘í•™ ë§µ",
      detail: "3D ë‹¨ì¸µì´¬ì˜(nano-CT)ìœ¼ë¡œ ë„ë„ˆ ìœ„ì¹˜ë¥¼ ë¹„íŒŒê´´ ë§¤í•‘í•˜ê³ , APT/SIMS/TEM êµì°¨ê²€ì¦ìœ¼ë¡œ ì¡°ì„±ê³¼ tail ê¹Šì´ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. ì›¨ì´í¼ ê²€ì‚¬ ì¥ë¹„ë¡œ ì „ê¸°ì /ê´‘í•™ì  ë§µì„ ì €ì˜¨ì—ì„œ ì·¨ë“í•©ë‹ˆë‹¤.",
      output: "3D ì¢Œí‘œ ë§µ + ì „ê¸°í™˜ê²½ ë§µ + ê³µì •ì°½ ì¤€ìˆ˜ ì—¬ë¶€ íŒì •",
    },
    {
      icon: "ğŸ”§", title: "ë³´ì • (Correct)", color: Q.green,
      tools: "íŒŒë¼ë¯¸í„° ê°±ì‹  + DD-IC ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ì—…ë°ì´íŠ¸",
      detail: "ì£¼ì… ì—ë„ˆì§€Â·ê°ë„Â·ì„ ëŸ‰, ê°œêµ¬ í˜•ìƒ, íŒ¨ì‹œë² ì´ì…˜ ì¡°ê±´, ì–´ë‹ íŒŒí˜•ì„ ê°±ì‹ í•©ë‹ˆë‹¤. ë™ì‹œì— 77K DD-ICì˜ ê²Œì´íŠ¸ ì „ì•• ë³´ì • í…Œì´ë¸”ë„ ì‹¤ì¸¡ ê¸°ë°˜ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.",
      output: "â‘  ê³µì •ì°½ í—ˆìš©ì¹˜ â‘¡ outlier ëª¨ë¸ â‘¢ die-map ì¬ë§¤í•‘ â‘£ ë³´ì • í…Œì´ë¸”",
    },
  ];

  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 24 }}>
      <GlowCard title="Generate â†’ Verify â†’ Correct íë£¨í”„" icon="ğŸ”„" color={Q.green}>
        <p style={ps}>
          BQB ê³µì •ì€ <Em c={Q.green}>ë‹¨ë°©í–¥ ì œì‘ì´ ì•„ë‹Œ ë°˜ë³µ ìˆ˜ë ´ ì²´ê³„</Em>ì…ë‹ˆë‹¤.
          ë§¤ íšŒì „(iteration)ë§ˆë‹¤ ê³µì •ì°½ ë‚´ ìˆ˜ìœ¨ì´ ì¸¡ì •ë˜ê³ ,
          ì´íƒˆ ì›ì¸ì´ ë¶„ë¥˜ë˜ì–´ ë‹¤ìŒ íšŒì „ì˜ ê³µì • ì¡°ê±´ì— ë°˜ì˜ë©ë‹ˆë‹¤.
        </p>
      </GlowCard>

      {/* Loop visual */}
      <div style={{
        background: Q.card, borderRadius: 12, padding: 24,
        border: `1px solid ${Q.border}`,
      }}>
        <div style={{ display: "flex", justifyContent: "center", alignItems: "center", gap: 4, marginBottom: 20, flexWrap: "wrap" }}>
          {phases.map((p, i) => (
            <div key={i} style={{ display: "flex", alignItems: "center", gap: 4 }}>
              <button
                onClick={() => setPhase(i)}
                style={{
                  width: 56, height: 56,
                  borderRadius: "50%",
                  border: `2px solid ${phase === i ? p.color : Q.border}`,
                  background: phase === i ? `${p.color}15` : "transparent",
                  boxShadow: phase === i ? `0 0 20px ${p.color}30` : "none",
                  cursor: "pointer",
                  fontSize: 24,
                  display: "flex", alignItems: "center", justifyContent: "center",
                  transition: "all 0.3s",
                }}
              >
                {p.icon}
              </button>
              {i < 2 && <span style={{ color: Q.textMuted, fontSize: 16 }}>â†’</span>}
            </div>
          ))}
          <span style={{ color: Q.green, fontSize: 14, fontFamily: font, marginLeft: 8 }}>â†» ë°˜ë³µ</span>
        </div>

        <div style={{
          background: `${phases[phase].color}08`,
          borderRadius: 10, padding: 20,
          border: `1px solid ${phases[phase].color}20`,
        }}>
          <div style={{ fontSize: 15, fontWeight: 800, color: phases[phase].color, marginBottom: 12, fontFamily: font }}>
            {phases[phase].icon} {phases[phase].title}
          </div>
          {[
            { label: "ë„êµ¬/ë°©ë²•", value: phases[phase].tools },
            { label: "ìƒì„¸", value: phases[phase].detail },
            { label: "ì‚°ì¶œë¬¼", value: phases[phase].output },
          ].map((item, i) => (
            <div key={i} style={{
              padding: "8px 12px", marginBottom: 6,
              background: `${Q.void}50`, borderRadius: 6,
              borderLeft: `2px solid ${phases[phase].color}30`,
            }}>
              <div style={{ fontSize: 10, fontWeight: 700, color: phases[phase].color, fontFamily: font, marginBottom: 2, letterSpacing: 1 }}>
                {item.label.toUpperCase()}
              </div>
              <div style={{ fontSize: 12, color: Q.textDim, lineHeight: 1.7 }}>{item.value}</div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
}

/* â”€â”€â”€ SEC 6: í†µí•© ì•„í‚¤í…ì²˜ â”€â”€â”€ */
function IntegrationSection() {
  const [showPhase, setShowPhase] = useState(0);
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 24 }}>
      <GlowCard title='"ê³µì • ë¶„ë¦¬í˜• í†µí•© ì „ëµ"ê³¼ 77K ê·¼ì ‘ ì œì–´' icon="ğŸ—ï¸" color={Q.orange}>
        <p style={ps}>
          22nm FD-SOI íŒŒìš´ë”ë¦¬ì—ì„œ <M>BQB-B + DD-IC + ê²Œì´íŠ¸/ì„¼ì„œ/ë°°ì„ </M>ì„
          <Em c={Q.orange}> ë™ì‹œ ì œì‘</Em>í•œ ë’¤,
          íë¹„íŠ¸ ìƒì„±(Q)ì€ <Em c={Q.orange}>í›„ê³µì •ìœ¼ë¡œ ë¶„ë¦¬</Em>í•©ë‹ˆë‹¤.
        </p>
      </GlowCard>

      <div style={{ display: "flex", gap: 8 }}>
        {[
          { label: "Phase 1: íŒŒìš´ë”ë¦¬", color: Q.orange },
          { label: "Phase 2: í›„ê³µì • Q ìƒì„±", color: Q.cyan },
          { label: "ë¶„ë¦¬ ì´ìœ ", color: Q.magenta },
        ].map((t, i) => (
          <TabBtn key={i} active={showPhase === i} color={t.color}
            onClick={() => setShowPhase(i)}>{t.label}</TabBtn>
        ))}
      </div>

      <div style={{
        background: Q.card, borderRadius: 12, padding: 24,
        border: `1px solid ${Q.border}`,
      }}>
        {showPhase === 0 && (
          <div>
            <SectionLabel color={Q.orange}>Phase 1 â€” 22nm FD-SOI íŒŒìš´ë”ë¦¬ ê³µì •</SectionLabel>
            <p style={ps}>
              ìƒìš© íŒŒìš´ë”ë¦¬ PDK/DRC ë£°ì„ ì¤€ìˆ˜í•˜ë©° ë‹¤ìŒì„ ë™ì‹œ êµ¬í˜„í•©ë‹ˆë‹¤:
            </p>
            <div style={{ display: "flex", flexDirection: "column", gap: 6, marginTop: 12 }}>
              {[
                { name: "BQB-B", desc: "ë§¤ë¦½ ì¥ë²½ + ê°œêµ¬ í…œí”Œë¦¿ (ì¢…Â·íš¡ ê³µì •ì°½ ë¬¼ë¦¬ì  ê°•ì œ)" },
                { name: "Triple-Wall", desc: "STI + T3 + guard ring (ë‹¤ì¸µ ê²©ë¦¬ êµ¬ì¡°)" },
                { name: "DD-IC", desc: "77K ë™ì‘ DD Pulse Generator IC (ê·¼ì ‘ ì œì–´ íšŒë¡œ)" },
                { name: "ê²Œì´íŠ¸/ì„¼ì„œ/BEOL", desc: "íë¹„íŠ¸ ì œì–´ ê²Œì´íŠ¸, íŒë… ì„¼ì„œ, ë°°ì„ /ì „ì›ë§" },
              ].map((item, i) => (
                <div key={i} style={{
                  display: "flex", gap: 12, padding: "8px 12px",
                  background: `${Q.orange}08`, borderRadius: 6,
                  borderLeft: `3px solid ${Q.orange}30`,
                }}>
                  <span style={{ fontSize: 12, fontWeight: 700, color: Q.orange, fontFamily: font, minWidth: 90 }}>
                    {item.name}
                  </span>
                  <span style={{ fontSize: 12, color: Q.textDim }}>{item.desc}</span>
                </div>
              ))}
            </div>
          </div>
        )}
        {showPhase === 1 && (
          <div>
            <SectionLabel color={Q.cyan}>Phase 2 â€” í›„ê³µì • íë¹„íŠ¸ ìƒì„±</SectionLabel>
            <p style={ps}>
              íŒŒìš´ë”ë¦¬ ì¹©ì„ ìˆ˜ë ¹í•œ ë’¤, <M>íë¹„íŠ¸ ìƒì„±ë§Œ ë…ë¦½ì ìœ¼ë¡œ ë°˜ë³µ</M>í•©ë‹ˆë‹¤.
              íë£¨í”„(Generate â†’ Verify â†’ Correct)ë¥¼ í†µí•´ ê³µì •ì°½ ë‚´ ìˆ˜ìœ¨ì„ ì ì§„ì ìœ¼ë¡œ ìˆ˜ë ´ì‹œí‚µë‹ˆë‹¤.
            </p>
            <p style={ps}>
              ì´ ë¶„ë¦¬ ë•ë¶„ì— íë¹„íŠ¸ ìƒì„± ì¡°ê±´(ì—ë„ˆì§€, ê°ë„, ì„ ëŸ‰)ì„ ììœ ë¡­ê²Œ ë³€ê²½í•˜ë©´ì„œ
              ë°˜ë³µ ì‹¤í—˜í•  ìˆ˜ ìˆìœ¼ë©°, íŒŒìš´ë”ë¦¬ ì œì‘ ë¹„ìš©ì„ ë‹¤ì‹œ ì§€ë¶ˆí•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.
            </p>
          </div>
        )}
        {showPhase === 2 && (
          <div>
            <SectionLabel color={Q.magenta}>ê³µì • ë¶„ë¦¬ì˜ ì„¸ ê°€ì§€ ì´ìœ </SectionLabel>
            <div style={{ display: "flex", flexDirection: "column", gap: 10, marginTop: 12 }}>
              {[
                { title: "ì˜¤ì—¼/ì—´ì˜ˆì‚° ê²©ë¦¬", desc: "ì´ì˜¨ ì£¼ì… ë° í™œì„±í™” ê³¼ì •ì˜ ì˜¤ì—¼Â·ì—´ì˜ˆì‚° ë¦¬ìŠ¤í¬ë¥¼ íŒŒìš´ë”ë¦¬ ê³µì •ìœ¼ë¡œë¶€í„° ì™„ì „íˆ ê²©ë¦¬í•©ë‹ˆë‹¤." },
                { title: "ë°˜ë³µ ìµœì í™”", desc: "Q ìƒì„±ì„ í›„ê³µì •ìœ¼ë¡œ ë¶„ë¦¬í•˜ë©´ íë£¨í”„ ë°˜ë³µì´ ê°€ëŠ¥í•´ì ¸ ê³µì •ì°½ ìˆ˜ë ´ ì†ë„ê°€ ë¹„ì•½ì ìœ¼ë¡œ í–¥ìƒë©ë‹ˆë‹¤." },
                { title: "ìŠ¤ì¼€ì¼ í™•ì¥", desc: "íŒŒìš´ë”ë¦¬ì—ì„œ BQB íƒ€ì¼ + DD-ICë¥¼ ë™ì¼ PDK ë£°ë¡œ ê²€ì¦í•´, ë°°ì—´ ë©´ì  í™•ëŒ€ ì‹œì—ë„ DRC/EM/IR ë¦¬ìŠ¤í¬ë¥¼ ìµœì†Œí™”í•©ë‹ˆë‹¤." },
              ].map((item, i) => (
                <div key={i} style={{
                  padding: "12px 16px",
                  background: `${Q.magenta}08`, borderRadius: 8,
                  borderLeft: `3px solid ${Q.magenta}30`,
                }}>
                  <div style={{ fontSize: 13, fontWeight: 700, color: Q.magenta, marginBottom: 4 }}>{item.title}</div>
                  <div style={{ fontSize: 12, color: Q.textDim, lineHeight: 1.7 }}>{item.desc}</div>
                </div>
              ))}
            </div>
          </div>
        )}
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â• SHARED COMPONENTS â•â•â•â•â•â•â• */

const ps = { fontSize: 14, color: Q.textDim, lineHeight: 1.9, margin: "0 0 8px" };

function M({ children }) {
  return <code style={{ color: Q.cyan, background: `${Q.cyan}10`, padding: "1px 5px", borderRadius: 3, fontSize: 13, fontFamily: font }}>{children}</code>;
}
function Em({ children, c }) {
  return <strong style={{ color: c || Q.text }}>{children}</strong>;
}

function GlowCard({ title, icon, color, children }) {
  return (
    <div style={{
      position: "relative",
      background: `linear-gradient(135deg, ${color}06, ${Q.card})`,
      borderRadius: 14, padding: 24,
      border: `1px solid ${color}20`,
      overflow: "hidden",
    }}>
      <div style={{
        position: "absolute", top: -40, right: -40,
        width: 120, height: 120, borderRadius: "50%",
        background: `radial-gradient(circle, ${color}12, transparent)`,
        filter: "blur(20px)",
      }} />
      <div style={{ position: "relative" }}>
        <div style={{ display: "flex", alignItems: "center", gap: 10, marginBottom: 14 }}>
          <span style={{ fontSize: 22 }}>{icon}</span>
          <h3 style={{ fontSize: 17, fontWeight: 800, color: Q.text, margin: 0 }}>{title}</h3>
        </div>
        {children}
      </div>
    </div>
  );
}

function TabBtn({ children, active, color, onClick }) {
  return (
    <button onClick={onClick} style={{
      flex: 1,
      background: active ? `${color}15` : "transparent",
      border: `1px solid ${active ? color : Q.border}`,
      color: active ? color : Q.textMuted,
      borderRadius: 8, padding: "8px 12px",
      cursor: "pointer", fontSize: 12,
      fontWeight: active ? 700 : 400,
      fontFamily: font,
      transition: "all 0.3s",
    }}>
      {children}
    </button>
  );
}

function Callout({ children, color, icon }) {
  return (
    <div style={{
      background: `${color}08`, borderRadius: 10, padding: "16px 20px",
      border: `1px solid ${color}15`,
      borderLeft: `3px solid ${color}`,
    }}>
      <div style={{ display: "flex", gap: 10, alignItems: "flex-start" }}>
        <span style={{ fontSize: 18, flexShrink: 0 }}>{icon}</span>
        <div style={{ fontSize: 13, color: Q.textDim, lineHeight: 1.8 }}>{children}</div>
      </div>
    </div>
  );
}

function ParamBox({ params }) {
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 4, marginTop: 12 }}>
      {params.map((p, i) => (
        <div key={i} style={{
          display: "flex", gap: 12, padding: "6px 10px",
          background: `${Q.void}60`, borderRadius: 6,
        }}>
          <span style={{ fontSize: 11, color: p.color || Q.textMuted, fontFamily: font, fontWeight: 700, minWidth: 50 }}>{p.name}</span>
          <span style={{ fontSize: 12, color: Q.textDim, fontFamily: font }}>{p.value}</span>
        </div>
      ))}
    </div>
  );
}

function SectionLabel({ children, color }) {
  return (
    <div style={{ fontSize: 14, fontWeight: 800, color, fontFamily: font, marginBottom: 8, letterSpacing: 1 }}>
      {children}
    </div>
  );
}

/* â•â•â•â•â•â•â• MAIN APP â•â•â•â•â•â•â• */

const sections = [
  { id: "physics", label: "ì´ì˜¨ ì£¼ì… ë¬¼ë¦¬", icon: "âš›ï¸" },
  { id: "pw", label: "ê³µì •ì°½ ê·œê²©", icon: "ğŸ“" },
  { id: "wall", label: "Triple-Wall", icon: "ğŸ›¡ï¸" },
  { id: "sim", label: "ì‹œë®¬ë ˆì´ì…˜", icon: "ğŸ”¬" },
  { id: "loop", label: "íë£¨í”„ ê³µì •", icon: "ğŸ”„" },
  { id: "arch", label: "í†µí•© ì•„í‚¤í…ì²˜", icon: "ğŸ—ï¸" },
];

const sectionComps = {
  physics: IonPhysicsSection,
  pw: ProcessWindowSection,
  wall: TripleWallSection,
  sim: SimulationSection,
  loop: ClosedLoopSection,
  arch: IntegrationSection,
};


function __BQBIntermediateRender__() {
  const [tab, setTab] = useState("physics");
  const Comp = sectionComps[tab];
  const idx = sections.findIndex(s => s.id === tab);

  return (
    <div style={{
      minHeight: "100vh",
      background: Q.void,
      fontFamily: "'Noto Sans KR', -apple-system, sans-serif",
      color: Q.text,
      position: "relative",
    }}>
      <QuantumBG />

      <div style={{ position: "relative", zIndex: 1 }}>
        {/* Header */}
        <div style={{
          padding: "36px 20px 20px",
          background: `linear-gradient(180deg, ${Q.glow}08, transparent)`,
        }}>
          <div style={{ maxWidth: 680, margin: "0 auto" }}>
            <div style={{ display: "flex", alignItems: "center", gap: 12, marginBottom: 8 }}>
              <QuantumAtom size={44} color={Q.glow} />
              <div>
                <div style={{ fontSize: 10, fontWeight: 800, color: Q.glow, letterSpacing: 4, fontFamily: font }}>
                  INTERMEDIATE GUIDE
                </div>
                <h1 style={{ fontSize: 22, fontWeight: 900, margin: 0, lineHeight: 1.3,
                  background: `linear-gradient(135deg, ${Q.text}, ${Q.cyan})`,
                  WebkitBackgroundClip: "text", WebkitTextFillColor: "transparent",
                }}>
                  BQB ê³µì • ë¬¼ë¦¬ì™€ ì„¤ê³„ ì›ë¦¬
                </h1>
              </div>
            </div>
            <p style={{ fontSize: 12, color: Q.textMuted, margin: 0, fontFamily: font }}>
              ë°˜ë„ì²´ íë¹„íŠ¸ ëŒ€ê·œëª¨ ë°°ì—´ â€” ê³µì •ì°½Â·Triple-WallÂ·íë£¨í”„ì˜ ì •ëŸ‰ì  ì´í•´
            </p>
          </div>
        </div>

        {/* Nav */}
        <div style={{
          position: "sticky", top: 52, zIndex: 9,
          background: `${Q.void}ee`,
          backdropFilter: "blur(12px)",
          borderBottom: `1px solid ${Q.border}`,
          overflowX: "auto",
        }}>
          <div style={{ maxWidth: 680, margin: "0 auto", display: "flex", padding: "0 8px" }}>
            {sections.map(s => (
              <button
                key={s.id}
                onClick={() => setTab(s.id)}
                style={{
                  background: "none", border: "none",
                  borderBottom: tab === s.id ? `2px solid ${Q.glow}` : "2px solid transparent",
                  padding: "10px 10px",
                  cursor: "pointer",
                  whiteSpace: "nowrap",
                  display: "flex", alignItems: "center", gap: 4,
                  transition: "all 0.2s",
                }}
              >
                <span style={{ fontSize: 13 }}>{s.icon}</span>
                <span style={{
                  fontSize: 11, fontFamily: font,
                  fontWeight: tab === s.id ? 700 : 400,
                  color: tab === s.id ? Q.glow : Q.textMuted,
                }}>
                  {s.label}
                </span>
              </button>
            ))}
          </div>
        </div>

        {/* Content */}
        <div style={{ maxWidth: 680, margin: "0 auto", padding: "28px 16px 80px" }}>
          <Comp />

          <div style={{ display: "flex", justifyContent: "space-between", marginTop: 36 }}>
            <NavBtn
              disabled={idx === 0}
              onClick={() => idx > 0 && setTab(sections[idx - 1].id)}
              color={Q.glow}
            >
              â† ì´ì „
            </NavBtn>
            <NavBtn
              disabled={idx === sections.length - 1}
              onClick={() => idx < sections.length - 1 && setTab(sections[idx + 1].id)}
              color={Q.glow}
            >
              ë‹¤ìŒ â†’
            </NavBtn>
          </div>
        </div>
      </div>
    </div>
  );
}

function NavBtn({ children, disabled, onClick, color }) {
  return (
    <button onClick={onClick} disabled={disabled} style={{
      background: disabled ? "transparent" : `${color}10`,
      border: `1px solid ${disabled ? Q.border : color}`,
      color: disabled ? Q.textMuted : color,
      borderRadius: 8, padding: "10px 20px",
      cursor: disabled ? "default" : "pointer",
      fontSize: 12, fontFamily: font, fontWeight: 600,
      opacity: disabled ? 0.3 : 1,
      transition: "all 0.3s",
    }}>
      {children}
    </button>
  );
}


  return <__BQBIntermediateRender__ />;
}

/* â•â•â•â•â•â•â• APP: Quantum World Explorer â•â•â•â•â•â•â• */
function QuantumWorldExplorer() {


/*
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  âš›ï¸ Quantum World Explorer
  ì–‘ì ì„¸ê³„ì˜ í•µì‹¬ ê°œë…ì„ ì¸í„°ë™í‹°ë¸Œ ì‹œê°í™”ë¡œ íƒí—˜
  ì¹´í…Œê³ ë¦¬: quantum
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
*/


function __QWERender__() {
  return <_QWECore />;
}

function _QWECore() {
  const [activeSection, setActiveSection] = useState("home");
  const [hoveredCard, setHoveredCard] = useState(null);

  const Q = {
    bg: "#030712",
    bgGlow: "#0a0f1e",
    card: "#0d1320",
    cardHover: "#111827",
    surface: "#141c2e",
    accent: "#06b6d4",
    accentAlt: "#8b5cf6",
    accentPink: "#ec4899",
    accentGreen: "#10b981",
    accentAmber: "#f59e0b",
    text: "#e2e8f0",
    textDim: "#94a3b8",
    textMuted: "#475569",
    border: "#1e293b",
    glow: "0 0 40px #06b6d420, 0 0 80px #8b5cf610",
  };

  const concepts = [
    {
      id: "why-quantum",
      icon: "ğŸ”§",
      title: "ì™œ ì–‘ìë¥¼ ê³µë¶€í•˜ëŠ”ê°€?",
      subtitle: "From Theory to Engineering",
      color: "#58a6ff",
      gradient: "linear-gradient(135deg, #58a6ff, #1f6feb)",
      desc: "ì–‘ìì—­í•™ì´ ì‹¤ì œ ì–‘ìì»´í“¨í„° ê¸°ìˆ ë¡œ ì´ì–´ì§€ëŠ” ì—¬ì • â€” BQB í”Œë«í¼",
      visual: WhyQuantumVisual,
      featured: true,
    },
    {
      id: "superposition",
      icon: "â—‰",
      title: "ì¤‘ì²©",
      subtitle: "Superposition",
      color: Q.accent,
      gradient: "linear-gradient(135deg, #06b6d4, #0891b2)",
      desc: "í•˜ë‚˜ì˜ ì–‘ìê°€ ë™ì‹œì— ì—¬ëŸ¬ ìƒíƒœì— ì¡´ì¬í•˜ëŠ” í˜„ìƒ",
      visual: SuperpositionVisual,
    },
    {
      id: "entanglement",
      icon: "â«˜",
      title: "ì–½í˜",
      subtitle: "Entanglement",
      color: Q.accentAlt,
      gradient: "linear-gradient(135deg, #8b5cf6, #7c3aed)",
      desc: "ë–¨ì–´ì§„ ë‘ ì…ìê°€ ì¦‰ì‹œ ì—°ê²°ë˜ëŠ” ê¸°ë¬˜í•œ ìƒê´€ê´€ê³„",
      visual: EntanglementVisual,
    },
    {
      id: "tunneling",
      icon: "â‡¥",
      title: "í„°ë„ë§",
      subtitle: "Quantum Tunneling",
      color: Q.accentGreen,
      gradient: "linear-gradient(135deg, #10b981, #059669)",
      desc: "ì¥ë²½ì„ ëš«ê³  ë„˜ì–´ê°€ëŠ” ì–‘ìì˜ í™•ë¥ ì  íˆ¬ê³¼",
      visual: TunnelingVisual,
    },
    {
      id: "measurement",
      icon: "â—",
      title: "ì¸¡ì •",
      subtitle: "Measurement Problem",
      color: Q.accentPink,
      gradient: "linear-gradient(135deg, #ec4899, #db2777)",
      desc: "ê´€ì°°í•˜ëŠ” ìˆœê°„ ìƒíƒœê°€ ê²°ì •ë˜ëŠ” ì–‘ìì˜ ìˆ˜ìˆ˜ê»˜ë¼",
      visual: MeasurementVisual,
    },
    {
      id: "wave",
      icon: "âˆ¿",
      title: "íŒŒë™-ì…ì ì´ì¤‘ì„±",
      subtitle: "Wave-Particle Duality",
      color: Q.accentAmber,
      gradient: "linear-gradient(135deg, #f59e0b, #d97706)",
      desc: "ë¹›ê³¼ ë¬¼ì§ˆì´ íŒŒë™ì´ë©´ì„œ ë™ì‹œì— ì…ìì¸ ì„¸ê³„",
      visual: WaveDualityVisual,
    },
    {
      id: "uncertainty",
      icon: "Î”",
      title: "ë¶ˆí™•ì •ì„± ì›ë¦¬",
      subtitle: "Uncertainty Principle",
      color: "#f43f5e",
      gradient: "linear-gradient(135deg, #f43f5e, #e11d48)",
      desc: "ìœ„ì¹˜ì™€ ìš´ë™ëŸ‰ì„ ë™ì‹œì— ì •í™•íˆ ì•Œ ìˆ˜ ì—†ëŠ” ê·¼ë³¸ì  í•œê³„",
      visual: UncertaintyVisual,
    },
  ];

  const activeConcept = concepts.find((c) => c.id === activeSection);

  if (activeSection !== "home" && activeConcept) {
    const Visual = activeConcept.visual;
    return (
      <div style={{ minHeight: "100vh", background: Q.bg, fontFamily: "'Noto Sans KR', system-ui, sans-serif", color: Q.text }}>
        {/* Ambient glow */}
        <div style={{ position: "fixed", top: -200, left: "50%", transform: "translateX(-50%)", width: 600, height: 600, borderRadius: "50%", background: `radial-gradient(circle, ${activeConcept.color}08, transparent 70%)`, pointerEvents: "none", zIndex: 0 }} />

        <div style={{ position: "relative", zIndex: 1 }}>
          {/* Top bar */}
          <div style={{ padding: "16px 20px", borderBottom: `1px solid ${Q.border}` }}>
            <div style={{ maxWidth: 680, margin: "0 auto", display: "flex", alignItems: "center", gap: 14 }}>
              <button
                onClick={() => setActiveSection("home")}
                style={{
                  background: `${activeConcept.color}10`,
                  border: `1px solid ${activeConcept.color}30`,
                  color: activeConcept.color,
                  borderRadius: 10,
                  padding: "8px 18px",
                  cursor: "pointer",
                  fontSize: 13,
                  fontWeight: 700,
                  transition: "all 0.2s",
                }}
              >
                â† ëŒì•„ê°€ê¸°
              </button>
              <div style={{ width: 1, height: 24, background: Q.border }} />
              <span style={{ fontSize: 22, fontWeight: 900, color: activeConcept.color }}>{activeConcept.icon}</span>
              <span style={{ fontSize: 15, fontWeight: 700 }}>{activeConcept.title}</span>
              <span style={{ fontSize: 11, color: Q.textMuted, fontStyle: "italic" }}>{activeConcept.subtitle}</span>
            </div>
          </div>

          {/* Content */}
          <div style={{ maxWidth: 680, margin: "0 auto", padding: "32px 20px 80px" }}>
            <Visual Q={Q} color={activeConcept.color} />
          </div>
        </div>
      </div>
    );
  }

  // â”€â”€â”€ HOME â”€â”€â”€
  return (
    <div style={{ minHeight: "100vh", background: Q.bg, fontFamily: "'Noto Sans KR', system-ui, sans-serif", color: Q.text, overflow: "hidden" }}>
      {/* Ambient background glows */}
      <div style={{ position: "fixed", top: -300, right: -200, width: 700, height: 700, borderRadius: "50%", background: "radial-gradient(circle, #06b6d406, transparent 70%)", pointerEvents: "none" }} />
      <div style={{ position: "fixed", bottom: -300, left: -200, width: 700, height: 700, borderRadius: "50%", background: "radial-gradient(circle, #8b5cf606, transparent 70%)", pointerEvents: "none" }} />

      {/* Floating particles */}
      <div style={{ position: "fixed", inset: 0, pointerEvents: "none", overflow: "hidden" }}>
        {Array.from({ length: 30 }).map((_, i) => (
          <div
            key={i}
            style={{
              position: "absolute",
              width: i % 3 === 0 ? 3 : 2,
              height: i % 3 === 0 ? 3 : 2,
              borderRadius: "50%",
              background: [Q.accent, Q.accentAlt, Q.accentPink, Q.accentGreen][i % 4],
              opacity: 0.15 + (i % 5) * 0.06,
              left: `${(i * 37 + 13) % 100}%`,
              top: `${(i * 53 + 7) % 100}%`,
              animation: `floatParticle ${6 + (i % 4) * 2}s ease-in-out infinite`,
              animationDelay: `${i * 0.3}s`,
            }}
          />
        ))}
      </div>

      <style>{`
        @keyframes floatParticle {
          0%, 100% { transform: translateY(0) translateX(0); opacity: 0.15; }
          25% { transform: translateY(-20px) translateX(10px); opacity: 0.3; }
          50% { transform: translateY(-8px) translateX(-8px); opacity: 0.2; }
          75% { transform: translateY(-25px) translateX(5px); opacity: 0.35; }
        }
        @keyframes pulseRing {
          0%, 100% { transform: scale(1); opacity: 0.4; }
          50% { transform: scale(1.15); opacity: 0.8; }
        }
        @keyframes fadeSlideUp {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes shimmer {
          0% { background-position: -200% center; }
          100% { background-position: 200% center; }
        }
        @keyframes orbitalSpin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `}</style>

      <div style={{ position: "relative", zIndex: 1 }}>
        {/* Header */}
        <div style={{ padding: "48px 20px 40px", textAlign: "center" }}>
          {/* Atom icon */}
          <div style={{ position: "relative", width: 80, height: 80, margin: "0 auto 24px" }}>
            <div style={{ position: "absolute", inset: 0, borderRadius: "50%", border: `2px solid ${Q.accent}20`, animation: "pulseRing 3s ease-in-out infinite" }} />
            <div style={{ position: "absolute", inset: 8, borderRadius: "50%", border: `1.5px solid ${Q.accentAlt}25`, animation: "orbitalSpin 8s linear infinite" }} />
            <div style={{ position: "absolute", inset: 16, borderRadius: "50%", border: `1px dashed ${Q.accentPink}20`, animation: "orbitalSpin 12s linear infinite reverse" }} />
            <div style={{ position: "absolute", top: "50%", left: "50%", transform: "translate(-50%, -50%)", width: 16, height: 16, borderRadius: "50%", background: `radial-gradient(circle, ${Q.accent}, ${Q.accentAlt})`, boxShadow: `0 0 20px ${Q.accent}40, 0 0 40px ${Q.accentAlt}20` }} />
            {/* Orbital dots */}
            {[0, 120, 240].map((deg, i) => (
              <div
                key={i}
                style={{
                  position: "absolute",
                  top: "50%",
                  left: "50%",
                  width: 6,
                  height: 6,
                  borderRadius: "50%",
                  background: [Q.accent, Q.accentAlt, Q.accentPink][i],
                  transform: `rotate(${deg}deg) translateX(32px) translateY(-50%)`,
                  boxShadow: `0 0 8px ${[Q.accent, Q.accentAlt, Q.accentPink][i]}60`,
                  animation: `orbitalSpin ${6 + i * 2}s linear infinite`,
                  transformOrigin: "50% 50%",
                }}
              />
            ))}
          </div>

          <div style={{ fontSize: 11, fontWeight: 800, letterSpacing: 6, color: Q.accent, marginBottom: 12, textTransform: "uppercase" }}>
            Quantum World
          </div>
          <h1
            style={{
              fontSize: 32,
              fontWeight: 900,
              margin: "0 0 12px",
              lineHeight: 1.2,
              background: `linear-gradient(135deg, ${Q.accent}, ${Q.accentAlt}, ${Q.accentPink})`,
              WebkitBackgroundClip: "text",
              WebkitTextFillColor: "transparent",
              backgroundSize: "200% auto",
              animation: "shimmer 4s linear infinite",
            }}
          >
            ì–‘ì ì„¸ê³„ íƒí—˜
          </h1>
          <p style={{ fontSize: 14, color: Q.textDim, lineHeight: 1.7, maxWidth: 400, margin: "0 auto" }}>
            ëˆˆì— ë³´ì´ì§€ ì•ŠëŠ” ì–‘ìì˜ ì„¸ê³„ë¥¼<br />
            ì¸í„°ë™í‹°ë¸Œ ì‹œê°í™”ë¡œ ì§ì ‘ ì²´í—˜í•˜ì„¸ìš”
          </p>
        </div>

        {/* Cards Grid */}
        <div style={{ maxWidth: 680, margin: "0 auto", padding: "0 16px 80px" }}>

          {/* â”€â”€â”€ Featured Card: ì™œ ì–‘ìì¸ê°€? â”€â”€â”€ */}
          {(() => {
            const feat = concepts.find(c => c.featured);
            if (!feat) return null;
            const isH = hoveredCard === feat.id;
            return (
              <div
                onClick={() => setActiveSection(feat.id)}
                onMouseEnter={() => setHoveredCard(feat.id)}
                onMouseLeave={() => setHoveredCard(null)}
                style={{
                  position: "relative", marginBottom: 20,
                  background: isH ? `${feat.color}08` : Q.card,
                  borderRadius: 18, padding: "28px 28px 24px",
                  border: `1px solid ${isH ? `${feat.color}40` : Q.border}`,
                  cursor: "pointer", transition: "all 0.3s ease",
                  transform: isH ? "translateY(-3px)" : "none",
                  boxShadow: isH ? `0 8px 40px ${feat.color}12, 0 0 0 1px ${feat.color}15` : "none",
                  animation: "fadeSlideUp 0.5s ease forwards", opacity: 0,
                  overflow: "hidden",
                }}
              >
                {/* Glow */}
                <div style={{ position: "absolute", top: -60, right: -60, width: 200, height: 200, borderRadius: "50%", background: `radial-gradient(circle, ${feat.color}${isH ? "10" : "04"}, transparent 70%)`, pointerEvents: "none", transition: "all 0.3s" }} />
                <div style={{ position: "absolute", bottom: -40, left: -40, width: 160, height: 160, borderRadius: "50%", background: `radial-gradient(circle, ${Q.accentAlt}06, transparent 70%)`, pointerEvents: "none" }} />

                <div style={{ position: "relative", zIndex: 1 }}>
                  <div style={{ display: "flex", alignItems: "center", gap: 6, marginBottom: 12 }}>
                    <span style={{ fontSize: 9, fontWeight: 800, color: feat.color, letterSpacing: 3, textTransform: "uppercase" }}>Featured</span>
                    <div style={{ flex: 1, height: 1, background: `${feat.color}20` }} />
                    <span style={{ fontSize: 16 }}>â†’</span>
                  </div>
                  <div style={{ display: "flex", alignItems: "center", gap: 16 }}>
                    <div style={{
                      width: 56, height: 56, borderRadius: 16,
                      background: `linear-gradient(135deg, ${feat.color}15, ${Q.accentAlt}10)`,
                      border: `1px solid ${feat.color}25`,
                      display: "flex", alignItems: "center", justifyContent: "center",
                      fontSize: 28, flexShrink: 0,
                      boxShadow: isH ? `0 0 20px ${feat.color}20` : "none",
                      transition: "all 0.3s",
                    }}>{feat.icon}</div>
                    <div style={{ flex: 1 }}>
                      <div style={{ fontSize: 17, fontWeight: 800, color: Q.text, marginBottom: 4, lineHeight: 1.3 }}>{feat.title}</div>
                      <div style={{ fontSize: 12, color: Q.textDim, lineHeight: 1.6 }}>{feat.desc}</div>
                    </div>
                  </div>
                  {/* Mini pipeline preview */}
                  <div style={{ display: "flex", alignItems: "center", justifyContent: "center", gap: 8, marginTop: 18, padding: "10px 0", borderTop: `1px solid ${Q.border}` }}>
                    {[
                      { label: "ì–‘ì ì´ë¡ ", icon: "âš›ï¸", c: Q.accent },
                      { label: "â†’", c: Q.textMuted },
                      { label: "BQB ì„¤ê³„", icon: "ğŸ”¬", c: "#3fb950" },
                      { label: "â†’", c: Q.textMuted },
                      { label: "ì–‘ìì»´í“¨í„°", icon: "ğŸ’»", c: "#58a6ff" },
                    ].map((s, i) => s.icon ? (
                      <div key={i} style={{ display: "flex", alignItems: "center", gap: 4 }}>
                        <span style={{ fontSize: 14 }}>{s.icon}</span>
                        <span style={{ fontSize: 10, fontWeight: 700, color: s.c }}>{s.label}</span>
                      </div>
                    ) : (
                      <span key={i} style={{ fontSize: 11, color: s.c, opacity: 0.5 }}>{s.label}</span>
                    ))}
                  </div>
                </div>
              </div>
            );
          })()}

          {/* â”€â”€â”€ Section Label â”€â”€â”€ */}
          <div style={{ display: "flex", alignItems: "center", gap: 10, marginBottom: 14, padding: "0 4px" }}>
            <span style={{ fontSize: 10, fontWeight: 800, color: Q.accent, letterSpacing: 3, textTransform: "uppercase" }}>Core Concepts</span>
            <div style={{ flex: 1, height: 1, background: `${Q.accent}15` }} />
            <span style={{ fontSize: 10, color: Q.textMuted }}>{concepts.filter(c => !c.featured).length}ê°œ ì£¼ì œ</span>
          </div>

          <div style={{ display: "grid", gridTemplateColumns: "repeat(auto-fill, minmax(200px, 1fr))", gap: 14 }}>
            {concepts.filter(c => !c.featured).map((c, idx) => (
              <div
                key={c.id}
                onClick={() => setActiveSection(c.id)}
                onMouseEnter={() => setHoveredCard(c.id)}
                onMouseLeave={() => setHoveredCard(null)}
                style={{
                  position: "relative",
                  background: hoveredCard === c.id ? Q.cardHover : Q.card,
                  borderRadius: 16,
                  padding: 24,
                  border: `1px solid ${hoveredCard === c.id ? c.color + "40" : Q.border}`,
                  cursor: "pointer",
                  transition: "all 0.3s ease",
                  transform: hoveredCard === c.id ? "translateY(-4px)" : "none",
                  boxShadow: hoveredCard === c.id ? `0 8px 32px ${c.color}15, 0 0 0 1px ${c.color}20` : "none",
                  animation: "fadeSlideUp 0.5s ease forwards",
                  animationDelay: `${idx * 0.08}s`,
                  opacity: 0,
                  animationFillMode: "forwards",
                  overflow: "hidden",
                }}
              >
                {/* Card glow orb */}
                <div
                  style={{
                    position: "absolute",
                    top: -30,
                    right: -30,
                    width: 100,
                    height: 100,
                    borderRadius: "50%",
                    background: `radial-gradient(circle, ${c.color}${hoveredCard === c.id ? "12" : "06"}, transparent 70%)`,
                    transition: "all 0.3s",
                    pointerEvents: "none",
                  }}
                />

                <div style={{ position: "relative", zIndex: 1 }}>
                  {/* Icon */}
                  <div
                    style={{
                      width: 48,
                      height: 48,
                      borderRadius: 14,
                      background: `${c.color}12`,
                      border: `1px solid ${c.color}25`,
                      display: "flex",
                      alignItems: "center",
                      justifyContent: "center",
                      fontSize: 22,
                      fontWeight: 900,
                      color: c.color,
                      marginBottom: 16,
                      transition: "all 0.3s",
                      boxShadow: hoveredCard === c.id ? `0 0 16px ${c.color}20` : "none",
                    }}
                  >
                    {c.icon}
                  </div>

                  <div style={{ fontSize: 16, fontWeight: 800, color: Q.text, marginBottom: 4 }}>{c.title}</div>
                  <div style={{ fontSize: 10, fontWeight: 600, color: c.color, letterSpacing: 1, marginBottom: 10, textTransform: "uppercase" }}>
                    {c.subtitle}
                  </div>
                  <div style={{ fontSize: 12, color: Q.textMuted, lineHeight: 1.6 }}>{c.desc}</div>

                  {/* Bottom accent line */}
                  <div
                    style={{
                      marginTop: 16,
                      height: 2,
                      borderRadius: 1,
                      background: `linear-gradient(90deg, ${c.color}${hoveredCard === c.id ? "60" : "20"}, transparent)`,
                      transition: "all 0.3s",
                    }}
                  />
                </div>
              </div>
            ))}
          </div>

          {/* Bottom quote */}
          <div style={{ textAlign: "center", marginTop: 48, padding: "24px 0" }}>
            <div style={{ fontSize: 12, color: Q.textMuted, fontStyle: "italic", lineHeight: 1.8 }}>
              "ì–‘ìì—­í•™ì„ ì´í•´í–ˆë‹¤ê³  ìƒê°í•œë‹¤ë©´,<br />
              ì–‘ìì—­í•™ì„ ì´í•´í•˜ì§€ ëª»í•œ ê²ƒì´ë‹¤."
            </div>
            <div style={{ fontSize: 11, color: Q.textMuted, marginTop: 8, opacity: 0.6 }}>â€” Richard Feynman</div>
          </div>
        </div>
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ“¦ ê° ê°œë…ë³„ ì‹œê°í™” ì»´í¬ë„ŒíŠ¸
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

function SectionBlock({ Q, color, title, children }) {
  return (
    <div style={{ background: Q.card, borderRadius: 16, border: `1px solid ${Q.border}`, padding: 28, marginBottom: 16 }}>
      {title && <div style={{ fontSize: 16, fontWeight: 800, color: color, marginBottom: 16 }}>{title}</div>}
      {children}
    </div>
  );
}

function Insight({ Q, color, emoji, children }) {
  return (
    <div style={{ background: `${color}08`, border: `1px solid ${color}20`, borderRadius: 12, padding: "16px 20px", marginTop: 16, display: "flex", gap: 12, alignItems: "flex-start" }}>
      <span style={{ fontSize: 20, flexShrink: 0 }}>{emoji}</span>
      <div style={{ fontSize: 13, color: Q.textDim, lineHeight: 1.7 }}>{children}</div>
    </div>
  );
}

/* â”€â”€â”€ ì¤‘ì²© Superposition â”€â”€â”€ */
function SuperpositionVisual({ Q, color }) {
  const [observed, setObserved] = useState(false);
  const [result, setResult] = useState(null);

  function observe() {
    setObserved(true);
    setResult(Math.random() > 0.5 ? "up" : "down");
  }
  function reset() {
    setObserved(false);
    setResult(null);
  }

  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 16 }}>
      <SectionBlock Q={Q} color={color} title="ì–‘ì ì¤‘ì²©ì´ë€?">
        <p style={{ fontSize: 14, color: Q.textDim, lineHeight: 1.8, margin: 0 }}>
          ê³µì¤‘ì— ë˜ì§„ ë™ì „ì€ ì‹¤ì œë¡œëŠ” ë§¤ ìˆœê°„ ì•ë©´ ë˜ëŠ” ë’·ë©´ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤ â€” ìš°ë¦¬ê°€ <em>ëª¨ë¥¼ ë¿</em>ì´ì£ .
          í•˜ì§€ë§Œ ì–‘ì ì„¸ê³„ì˜ ì…ìëŠ” ë‹¤ë¦…ë‹ˆë‹¤. ì¸¡ì • ì „ì—ëŠ” <span style={{ color, fontWeight: 700 }}>ë‘ ìƒíƒœê°€ ë¬¼ë¦¬ì ìœ¼ë¡œ ë™ì‹œì— ì¡´ì¬</span>í•©ë‹ˆë‹¤.
          ì´ê²ƒì€ "ëª¨ë¥¸ë‹¤"ê°€ ì•„ë‹ˆë¼, ìì—°ì´ <span style={{ color, fontWeight: 700 }}>ì •ë§ë¡œ ê²¹ì³ ìˆëŠ” ìƒíƒœ</span>ì…ë‹ˆë‹¤.
        </p>
        <Insight Q={Q} color={color} emoji="ğŸŒ¡ï¸">
          <strong style={{ color }}>ë””ì½”íˆì–´ëŸ°ìŠ¤:</strong> ì¤‘ì²© ìƒíƒœëŠ” ì£¼ë³€ í™˜ê²½ê³¼ ìƒí˜¸ì‘ìš©í•˜ë©´ ê¸‰ê²©íˆ ë¬´ë„ˆì§‘ë‹ˆë‹¤.
          ì´ê²ƒì´ ê±°ì‹œ ì„¸ê³„ì—ì„œ ê³ ì–‘ì´ê°€ "ì‚´ì•„ ìˆìœ¼ë©´ì„œ ë™ì‹œì— ì£½ì–´ ìˆëŠ”" ìƒíƒœë¥¼ ë³¼ ìˆ˜ ì—†ëŠ” ì´ìœ ì…ë‹ˆë‹¤.
          ì–‘ìì»´í“¨í„°ê°€ ê·¹ì €ì˜¨ í™˜ê²½ì„ í•„ìš”ë¡œ í•˜ëŠ” ê²ƒë„ ì¤‘ì²©ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ì„œì…ë‹ˆë‹¤.
        </Insight>
      </SectionBlock>

      <SectionBlock Q={Q} color={color} title="ì§ì ‘ ì²´í—˜í•˜ê¸°">
        <div style={{ textAlign: "center", padding: "20px 0" }}>
          {/* Quantum coin */}
          <div
            style={{
              width: 120,
              height: 120,
              borderRadius: "50%",
              margin: "0 auto 24px",
              display: "flex",
              alignItems: "center",
              justifyContent: "center",
              fontSize: observed ? 40 : 28,
              fontWeight: 900,
              color: observed ? (result === "up" ? "#10b981" : "#f43f5e") : color,
              background: observed ? `${result === "up" ? "#10b981" : "#f43f5e"}12` : `linear-gradient(135deg, ${color}15, ${Q.accentAlt}15)`,
              border: `3px solid ${observed ? (result === "up" ? "#10b981" : "#f43f5e") : color}40`,
              boxShadow: observed ? `0 0 30px ${result === "up" ? "#10b981" : "#f43f5e"}20` : `0 0 30px ${color}15, 0 0 60px ${Q.accentAlt}10`,
              transition: "all 0.5s ease",
              animation: observed ? "none" : "pulseRing 2s ease-in-out infinite",
            }}
          >
            {observed ? (result === "up" ? "â†‘" : "â†“") : "â†‘â†“"}
          </div>

          <div style={{ fontSize: 14, color: Q.textDim, marginBottom: 20 }}>
            {observed ? (
              <span>
                ì¸¡ì • ê²°ê³¼: <strong style={{ color: result === "up" ? "#10b981" : "#f43f5e" }}>{result === "up" ? "ìŠ¤í•€ ì—… â†‘" : "ìŠ¤í•€ ë‹¤ìš´ â†“"}</strong>
              </span>
            ) : (
              <span>
                í˜„ì¬ ìƒíƒœ: <strong style={{ color }}>â†‘ + â†“ ì¤‘ì²©</strong>
              </span>
            )}
          </div>

          <div style={{ display: "flex", gap: 10, justifyContent: "center" }}>
            {!observed ? (
              <button
                onClick={observe}
                style={{
                  background: `${color}15`,
                  border: `2px solid ${color}40`,
                  color: color,
                  borderRadius: 12,
                  padding: "12px 32px",
                  cursor: "pointer",
                  fontSize: 14,
                  fontWeight: 700,
                  transition: "all 0.2s",
                }}
              >
                ğŸ‘ï¸ ì¸¡ì •í•˜ê¸°
              </button>
            ) : (
              <button
                onClick={reset}
                style={{
                  background: `${Q.accentAlt}15`,
                  border: `2px solid ${Q.accentAlt}40`,
                  color: Q.accentAlt,
                  borderRadius: 12,
                  padding: "12px 32px",
                  cursor: "pointer",
                  fontSize: 14,
                  fontWeight: 700,
                }}
              >
                ğŸ”„ ë‹¤ì‹œ ì¤‘ì²©ì‹œí‚¤ê¸°
              </button>
            )}
          </div>
        </div>

        <Insight Q={Q} color={color} emoji="ğŸ’¡">
          <strong style={{ color }}>í•µì‹¬:</strong> ì–‘ì ì¤‘ì²©ì€ "ëª¨ë¥¸ë‹¤"ê°€ ì•„ë‹™ë‹ˆë‹¤.
          ì¸¡ì • ì „ì—ëŠ” <em>ì •ë§ë¡œ</em> ë‘ ìƒíƒœê°€ ë™ì‹œì— ì¡´ì¬í•˜ë©°, ì¸¡ì •í•˜ëŠ” ìˆœê°„ í•˜ë‚˜ë¡œ 'ë¶•ê´´'í•©ë‹ˆë‹¤.
        </Insight>
      </SectionBlock>

      {/* Math representation */}
      <SectionBlock Q={Q} color={color} title="ìˆ˜í•™ì  í‘œí˜„">
        <div style={{ textAlign: "center", padding: 20, background: `${color}06`, borderRadius: 12 }}>
          <div style={{ fontFamily: "serif", fontSize: 20, color: Q.text, letterSpacing: 2 }}>
            |ÏˆâŸ© = Î±|â†‘âŸ© + Î²|â†“âŸ©
          </div>
          <div style={{ fontSize: 12, color: Q.textMuted, marginTop: 12, lineHeight: 1.7 }}>
            |Î±|Â² + |Î²|Â² = 1 (ê° ìƒíƒœë¥¼ ì¸¡ì •í•  í™•ë¥ ì˜ í•©ì€ í•­ìƒ 1)
          </div>
          <div style={{ fontSize: 11, color: Q.textMuted, marginTop: 8, lineHeight: 1.7, fontStyle: "italic" }}>
            Î±, Î²ëŠ” ë³µì†Œìˆ˜ â€” |Î±|Â²ëŠ” â†‘ì„ ì¸¡ì •í•  í™•ë¥ , |Î²|Â²ëŠ” â†“ì„ ì¸¡ì •í•  í™•ë¥ 
          </div>
        </div>
      </SectionBlock>
    </div>
  );
}

/* â”€â”€â”€ ì–½í˜ Entanglement â”€â”€â”€ */
function EntanglementVisual({ Q, color }) {
  const [entangled, setEntangled] = useState(false);
  const [results, setResults] = useState(null);

  function measure() {
    const r = Math.random() > 0.5 ? "up" : "down";
    setEntangled(true);
    setResults({ a: r, b: r === "up" ? "down" : "up" });
  }
  function reset() {
    setEntangled(false);
    setResults(null);
  }

  const ParticleOrb = ({ label, state, particleColor, side }) => (
    <div style={{ textAlign: "center", flex: 1 }}>
      <div style={{ fontSize: 11, fontWeight: 700, color: Q.textMuted, marginBottom: 8, letterSpacing: 2, textTransform: "uppercase" }}>{label}</div>
      <div
        style={{
          width: 80,
          height: 80,
          borderRadius: "50%",
          margin: "0 auto 12px",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: state ? 32 : 20,
          fontWeight: 900,
          color: state ? (state === "up" ? "#10b981" : "#f43f5e") : color,
          background: state ? `${state === "up" ? "#10b981" : "#f43f5e"}12` : `${color}10`,
          border: `2px solid ${state ? (state === "up" ? "#10b981" : "#f43f5e") : color}40`,
          boxShadow: `0 0 24px ${state ? (state === "up" ? "#10b981" : "#f43f5e") : color}15`,
          transition: "all 0.4s",
        }}
      >
        {state ? (state === "up" ? "â†‘" : "â†“") : "?"}
      </div>
      <div style={{ fontSize: 13, color: state ? (state === "up" ? "#10b981" : "#f43f5e") : Q.textMuted, fontWeight: 600 }}>
        {state ? (state === "up" ? "ìŠ¤í•€ ì—…" : "ìŠ¤í•€ ë‹¤ìš´") : "ë¯¸í™•ì •"}
      </div>
    </div>
  );

  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 16 }}>
      <SectionBlock Q={Q} color={color} title="ì–‘ì ì–½í˜ì´ë€?">
        <p style={{ fontSize: 14, color: Q.textDim, lineHeight: 1.8, margin: 0 }}>
          ë‘ ì…ìê°€ <span style={{ color, fontWeight: 700 }}>ì–½íˆë©´</span>, ì•„ë¬´ë¦¬ ë©€ë¦¬ ë–¨ì–´ì ¸ ìˆì–´ë„
          í•œìª½ì„ ì¸¡ì •í•˜ë©´ <span style={{ color, fontWeight: 700 }}>ë‹¤ë¥¸ ìª½ì˜ ìƒíƒœê°€ ì¦‰ì‹œ ê²°ì •</span>ë©ë‹ˆë‹¤.
          ì•„ì¸ìŠˆíƒ€ì¸ì€ ì´ë¥¼ "ìœ¼ìŠ¤ìŠ¤í•œ ì›ê²© ì‘ìš©(spooky action at a distance)"ì´ë¼ ë¶ˆë €ìŠµë‹ˆë‹¤.
        </p>
        <p style={{ fontSize: 13, color: Q.textDim, lineHeight: 1.8, margin: "12px 0 0" }}>
          ì•„ë˜ëŠ” <span style={{ color, fontWeight: 600 }}>ì‹±ê¸€ë › ìƒíƒœ(singlet state)</span>ì˜ ì–½í˜ì…ë‹ˆë‹¤.
          ì´ ìŠ¤í•€ì´ 0ì´ë¯€ë¡œ, í•œ ìª½ì´ â†‘ì´ë©´ ë‹¤ë¥¸ ìª½ì€ ë°˜ë“œì‹œ â†“ì´ ë©ë‹ˆë‹¤.
        </p>
      </SectionBlock>

      <SectionBlock Q={Q} color={color} title="ì–½íŒ ì…ì ìŒ ì‹¤í—˜">
        <div style={{ display: "flex", alignItems: "center", gap: 0, padding: "20px 0" }}>
          <ParticleOrb label="ì…ì A" state={results?.a} particleColor={color} side="left" />

          {/* Connection */}
          <div style={{ display: "flex", flexDirection: "column", alignItems: "center", gap: 4, padding: "0 8px" }}>
            <div style={{ width: 60, height: 2, background: entangled ? `${color}60` : `${color}20`, transition: "all 0.4s", boxShadow: entangled ? `0 0 10px ${color}40` : "none" }} />
            <div style={{ fontSize: 16, opacity: 0.5 }}>â«˜</div>
            <div style={{ width: 60, height: 2, background: entangled ? `${color}60` : `${color}20`, transition: "all 0.4s" }} />
          </div>

          <ParticleOrb label="ì…ì B" state={results?.b} particleColor={color} side="right" />
        </div>

        <div style={{ textAlign: "center", marginBottom: 16, fontSize: 13, color: Q.textMuted }}>
          {entangled ? "Aë¥¼ ì¸¡ì •í•˜ë‹ˆ â†’ Bë„ ì¦‰ì‹œ ê²°ì •!" : "ë‘ ì…ìê°€ ì–½íŒ ìƒíƒœì…ë‹ˆë‹¤"}
        </div>

        <div style={{ display: "flex", gap: 10, justifyContent: "center" }}>
          {!entangled ? (
            <button onClick={measure} style={{ background: `${color}15`, border: `2px solid ${color}40`, color, borderRadius: 12, padding: "12px 32px", cursor: "pointer", fontSize: 14, fontWeight: 700 }}>
              ğŸ”¬ ì…ì A ì¸¡ì •
            </button>
          ) : (
            <button onClick={reset} style={{ background: `${Q.accentPink}15`, border: `2px solid ${Q.accentPink}40`, color: Q.accentPink, borderRadius: 12, padding: "12px 32px", cursor: "pointer", fontSize: 14, fontWeight: 700 }}>
              ğŸ”„ ë‹¤ì‹œ ì–½ê¸°
            </button>
          )}
        </div>

        <Insight Q={Q} color={color} emoji="ğŸŒŒ">
          "ê²°ê³¼ê°€ ë¯¸ë¦¬ ì •í•´ì ¸ ìˆëŠ” ê²ƒ ì•„ëƒ?" â€” ì•„ì¸ìŠˆíƒ€ì¸ë„ ê·¸ë ‡ê²Œ ìƒê°í–ˆìŠµë‹ˆë‹¤(ìˆ¨ì€ ë³€ìˆ˜ ê°€ì„¤).
          í•˜ì§€ë§Œ 1964ë…„ <strong style={{ color }}>ë²¨ì˜ ì •ë¦¬</strong>ê°€, ê·¸ë¦¬ê³  ì´í›„ì˜ ì‹¤í—˜ë“¤ì´ ì´ë¥¼ ë¶€ì •í–ˆìŠµë‹ˆë‹¤.
          ì–‘ì ì–½í˜ì˜ ìƒê´€ê´€ê³„ëŠ” ì–´ë–¤ ê³ ì „ì  ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œë„ ì„¤ëª…í•  ìˆ˜ ì—†ëŠ”, <strong style={{ color }}>ìˆœìˆ˜í•˜ê²Œ ì–‘ìì ì¸ í˜„ìƒ</strong>ì…ë‹ˆë‹¤.
        </Insight>
        <Insight Q={Q} color={color} emoji="ğŸš«">
          <strong style={{ color }}>ì¤‘ìš”:</strong> ì–½í˜ìœ¼ë¡œ ì •ë³´ë¥¼ ì´ˆê´‘ì† ì „ì†¡í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤.
          ì¸¡ì • ê²°ê³¼ëŠ” ë¬´ì‘ìœ„ì´ë¯€ë¡œ, ìƒëŒ€ë°©ì˜ ê²°ê³¼ë¥¼ ì•Œë ¤ë©´ ê²°êµ­ ê³ ì „ì  í†µì‹ ì´ í•„ìš”í•©ë‹ˆë‹¤.
          ì´ê²ƒì´ <strong style={{ color }}>ë¹„ì‹ í˜¸ ì •ë¦¬(no-signaling theorem)</strong>ì…ë‹ˆë‹¤.
        </Insight>
      </SectionBlock>
    </div>
  );
}

/* â”€â”€â”€ í„°ë„ë§ Tunneling â”€â”€â”€ */
function TunnelingVisual({ Q, color }) {
  const [attempts, setAttempts] = useState([]);
  const [shooting, setShooting] = useState(false);

  function shoot() {
    if (shooting) return;
    setShooting(true);
    const passed = Math.random() < 0.3;
    setTimeout(() => {
      setAttempts((p) => [...p, passed]);
      setShooting(false);
    }, 600);
  }

  const total = attempts.length;
  const passed = attempts.filter(Boolean).length;

  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 16 }}>
      <SectionBlock Q={Q} color={color} title="ì–‘ì í„°ë„ë§ì´ë€?">
        <p style={{ fontSize: 14, color: Q.textDim, lineHeight: 1.8, margin: 0 }}>
          ê³ ì „ ë¬¼ë¦¬ì—ì„œ ê³µì´ ë²½ì„ ë„˜ìœ¼ë ¤ë©´ ì¶©ë¶„í•œ ì—ë„ˆì§€ê°€ í•„ìš”í•©ë‹ˆë‹¤.
          í•˜ì§€ë§Œ ì–‘ì ì„¸ê³„ì—ì„œ ì…ìëŠ” ì—ë„ˆì§€ê°€ ë¶€ì¡±í•´ë„ <span style={{ color, fontWeight: 700 }}>í™•ë¥ ì ìœ¼ë¡œ ì¥ë²½ì„ íˆ¬ê³¼</span>í•©ë‹ˆë‹¤.
          ì´ê²ƒì€ ì…ìì˜ íŒŒë™í•¨ìˆ˜ê°€ ì¥ë²½ ë‚´ë¶€ì—ì„œ ì™„ì „íˆ 0ì´ ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
        </p>
        <div style={{ textAlign: "center", padding: "16px 0 8px", margin: "16px 0 0", borderTop: `1px solid ${Q.border}` }}>
          <div style={{ fontFamily: "serif", fontSize: 18, color: Q.text, letterSpacing: 2 }}>
            T âˆ e<sup>âˆ’2ÎºL</sup>
          </div>
          <div style={{ fontSize: 11, color: Q.textMuted, marginTop: 10, lineHeight: 1.7 }}>
            Îº = âˆš(2m(Vâˆ’E)) / â„ Â· L = ì¥ë²½ ë‘ê»˜
          </div>
          <div style={{ fontSize: 11, color: Q.textMuted, lineHeight: 1.7, fontStyle: "italic" }}>
            ì¥ë²½ì´ ë†’ê±°ë‚˜(Vâ†‘) ë‘êº¼ìš¸ìˆ˜ë¡(Lâ†‘) íˆ¬ê³¼ í™•ë¥ ì€ ì§€ìˆ˜ì ìœ¼ë¡œ ê°ì†Œ
          </div>
        </div>
      </SectionBlock>

      <SectionBlock Q={Q} color={color} title="í„°ë„ë§ ì‹œë®¬ë ˆì´ì…˜">
        {/* Barrier visualization */}
        <div style={{ position: "relative", height: 160, background: `${Q.bg}`, borderRadius: 12, overflow: "hidden", border: `1px solid ${Q.border}`, marginBottom: 20 }}>
          {/* Barrier */}
          <div style={{ position: "absolute", left: "45%", top: 0, bottom: 0, width: 30, background: `linear-gradient(180deg, #f43f5e15, #f43f5e08)`, borderLeft: `2px solid #f43f5e40`, borderRight: `2px solid #f43f5e40` }}>
            <div style={{ position: "absolute", top: "50%", left: "50%", transform: "translate(-50%,-50%) rotate(-90deg)", fontSize: 10, fontWeight: 700, color: "#f43f5e", whiteSpace: "nowrap", letterSpacing: 2 }}>BARRIER</div>
          </div>

          {/* Particle */}
          <div
            style={{
              position: "absolute",
              top: "50%",
              transform: "translateY(-50%)",
              left: shooting ? "75%" : "15%",
              width: 16,
              height: 16,
              borderRadius: "50%",
              background: color,
              boxShadow: `0 0 12px ${color}60, 0 0 24px ${color}30`,
              transition: shooting ? "left 0.6s ease-in-out" : "left 0.3s ease",
              opacity: shooting && attempts.length > 0 && !attempts[attempts.length] ? 1 : 1,
            }}
          />

          {/* Labels */}
          <div style={{ position: "absolute", bottom: 8, left: 16, fontSize: 10, color: Q.textMuted }}>ì…ì â†’</div>
          <div style={{ position: "absolute", bottom: 8, right: 16, fontSize: 10, color: Q.textMuted }}>í†µê³¼!</div>
        </div>

        <div style={{ display: "flex", justifyContent: "center", gap: 20, marginBottom: 16 }}>
          <button onClick={shoot} disabled={shooting} style={{ background: `${color}15`, border: `2px solid ${color}40`, color, borderRadius: 12, padding: "12px 32px", cursor: shooting ? "wait" : "pointer", fontSize: 14, fontWeight: 700, opacity: shooting ? 0.5 : 1 }}>
            âš¡ ì…ì ë°œì‚¬
          </button>
          <button onClick={() => setAttempts([])} style={{ background: `${Q.border}`, border: `1px solid ${Q.border}`, color: Q.textMuted, borderRadius: 12, padding: "12px 20px", cursor: "pointer", fontSize: 13, fontWeight: 600 }}>
            ì´ˆê¸°í™”
          </button>
        </div>

        {total > 0 && (
          <div style={{ display: "flex", gap: 16, justifyContent: "center", marginBottom: 16 }}>
            <div style={{ textAlign: "center" }}>
              <div style={{ fontSize: 24, fontWeight: 900, color }}>{total}</div>
              <div style={{ fontSize: 11, color: Q.textMuted }}>ì‹œë„</div>
            </div>
            <div style={{ width: 1, background: Q.border }} />
            <div style={{ textAlign: "center" }}>
              <div style={{ fontSize: 24, fontWeight: 900, color: "#10b981" }}>{passed}</div>
              <div style={{ fontSize: 11, color: Q.textMuted }}>í†µê³¼</div>
            </div>
            <div style={{ width: 1, background: Q.border }} />
            <div style={{ textAlign: "center" }}>
              <div style={{ fontSize: 24, fontWeight: 900, color: "#f43f5e" }}>{total - passed}</div>
              <div style={{ fontSize: 11, color: Q.textMuted }}>ë°˜ì‚¬</div>
            </div>
          </div>
        )}

        {/* Attempt history */}
        {total > 0 && (
          <div style={{ display: "flex", gap: 4, flexWrap: "wrap", justifyContent: "center" }}>
            {attempts.map((p, i) => (
              <div key={i} style={{ width: 12, height: 12, borderRadius: 3, background: p ? "#10b981" : "#f43f5e", opacity: 0.7 }} />
            ))}
          </div>
        )}

        <Insight Q={Q} color={color} emoji="âš¡">
          í„°ë„ë§ì€ í˜„ì‹¤ ì„¸ê³„ì—ì„œ <strong style={{ color }}>ì‹¤ì œë¡œ ì¼ì–´ë‚˜ëŠ” í˜„ìƒ</strong>ì…ë‹ˆë‹¤.
          <strong style={{ color }}>STM(ì£¼ì‚¬í„°ë„ë§í˜„ë¯¸ê²½)</strong>ì€ í„°ë„ë§ ì „ë¥˜ë¡œ ì›ìë¥¼ í•˜ë‚˜ì”© ë³¼ ìˆ˜ ìˆê³ ,
          <strong style={{ color }}>í”Œë˜ì‹œ ë©”ëª¨ë¦¬</strong>ëŠ” ì „ìì˜ í„°ë„ë§ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì €ì¥Â·ì‚­ì œí•©ë‹ˆë‹¤.
          íƒœì–‘ì˜ í•µìœµí•©ë„ ì–‘ì„±ìê°€ ì¿¨ë¡± ì¥ë²½ì„ í„°ë„ë§í•´ì•¼ ê°€ëŠ¥í•˜ë©°,
          <strong style={{ color }}>ì•ŒíŒŒ ë¶•ê´´</strong>ëŠ” ì•ŒíŒŒ ì…ìê°€ í•µì˜ í¼í…ì…œ ì¥ë²½ì„ íˆ¬ê³¼í•˜ëŠ” í„°ë„ë§ í˜„ìƒì…ë‹ˆë‹¤.
        </Insight>
      </SectionBlock>
    </div>
  );
}

/* â”€â”€â”€ ì¸¡ì • Measurement â”€â”€â”€ */
function MeasurementVisual({ Q, color }) {
  const [mode, setMode] = useState("cloud");
  const [dots, setDots] = useState([]);

  function addDot() {
    const x = 50 + (Math.random() - 0.5) * 60 * Math.exp(-Math.pow(Math.random() - 0.5, 2) * 4);
    const y = 50 + (Math.random() - 0.5) * 60 * Math.exp(-Math.pow(Math.random() - 0.5, 2) * 4);
    setDots((p) => [...p, { x, y, id: Date.now() + Math.random() }]);
  }

  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 16 }}>
      <SectionBlock Q={Q} color={color} title="ì¸¡ì • ë¬¸ì œë€?">
        <p style={{ fontSize: 14, color: Q.textDim, lineHeight: 1.8, margin: 0 }}>
          ì–‘ì ì…ìëŠ” ì¸¡ì • ì „ì— <span style={{ color, fontWeight: 700 }}>í™•ë¥ ì˜ êµ¬ë¦„(íŒŒë™í•¨ìˆ˜)</span>ìœ¼ë¡œ í¼ì ¸ ìˆìŠµë‹ˆë‹¤.
          ì¸¡ì •í•˜ë©´ êµ¬ë¦„ì´ ì‚¬ë¼ì§€ê³  <span style={{ color, fontWeight: 700 }}>í•œ ì </span>ì— ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
          ì´ "íŒŒë™í•¨ìˆ˜ ë¶•ê´´"ê°€ ì™œ, ì–´ë–»ê²Œ ì¼ì–´ë‚˜ëŠ”ì§€ëŠ” ì–‘ìì—­í•™ ìµœëŒ€ì˜ ë¯¸í•´ê²° ë¬¸ì œì…ë‹ˆë‹¤.
        </p>
        <div style={{ display: "flex", gap: 8, marginTop: 16 }}>
          {[
            { label: "ì½”íœí•˜ê² í•´ì„", desc: "ì¸¡ì •ì´ íŒŒë™í•¨ìˆ˜ë¥¼ ë¶•ê´´ì‹œí‚¨ë‹¤. ë¶•ê´´ ì „ì˜ ìƒíƒœëŠ” ë¬¼ë¦¬ì  ì‹¤ì¬ê°€ ì•„ë‹ˆë‹¤.", color: "#ec4899" },
            { label: "ë‹¤ì„¸ê³„ í•´ì„", desc: "ë¶•ê´´ëŠ” ì—†ë‹¤. ëª¨ë“  ê°€ëŠ¥í•œ ê²°ê³¼ê°€ ê°ê°ì˜ í‰í–‰ ìš°ì£¼ì—ì„œ ì‹¤í˜„ëœë‹¤.", color: "#8b5cf6" },
          ].map((interp, i) => (
            <div key={i} style={{ flex: 1, background: `${interp.color}06`, border: `1px solid ${interp.color}15`, borderRadius: 10, padding: 14 }}>
              <div style={{ fontSize: 11, fontWeight: 800, color: interp.color, marginBottom: 6 }}>{interp.label}</div>
              <div style={{ fontSize: 11, color: Q.textDim, lineHeight: 1.6 }}>{interp.desc}</div>
            </div>
          ))}
        </div>
      </SectionBlock>

      <SectionBlock Q={Q} color={color} title="í™•ë¥  êµ¬ë¦„ â†’ ì¸¡ì •">
        <div style={{ display: "flex", gap: 8, marginBottom: 16 }}>
          {[{ id: "cloud", label: "í™•ë¥  êµ¬ë¦„" }, { id: "detect", label: "ì…ì ê²€ì¶œ" }].map((m) => (
            <button
              key={m.id}
              onClick={() => {
                setMode(m.id);
                if (m.id === "cloud") setDots([]);
              }}
              style={{
                flex: 1,
                background: mode === m.id ? `${color}15` : "transparent",
                border: `1px solid ${mode === m.id ? color : Q.border}`,
                color: mode === m.id ? color : Q.textMuted,
                borderRadius: 10,
                padding: "10px 16px",
                cursor: "pointer",
                fontSize: 13,
                fontWeight: 700,
              }}
            >
              {m.label}
            </button>
          ))}
        </div>

        <div
          onClick={mode === "detect" ? addDot : undefined}
          style={{
            position: "relative",
            height: 240,
            background: Q.bg,
            borderRadius: 12,
            border: `1px solid ${Q.border}`,
            overflow: "hidden",
            cursor: mode === "detect" ? "crosshair" : "default",
          }}
        >
          {mode === "cloud" ? (
            <div style={{ position: "absolute", inset: 0, display: "flex", alignItems: "center", justifyContent: "center" }}>
              <div
                style={{
                  width: 160,
                  height: 160,
                  borderRadius: "50%",
                  background: `radial-gradient(circle, ${color}25, ${color}08, transparent)`,
                  animation: "pulseRing 3s ease-in-out infinite",
                }}
              />
              <div style={{ position: "absolute", fontSize: 11, fontWeight: 700, color: Q.textMuted }}>|Ïˆ|Â² í™•ë¥  ë°€ë„</div>
            </div>
          ) : (
            <>
              {/* Gaussian guide */}
              <div style={{ position: "absolute", top: "50%", left: "50%", transform: "translate(-50%, -50%)", width: 120, height: 120, borderRadius: "50%", border: `1px dashed ${color}15` }} />
              {dots.map((d) => (
                <div
                  key={d.id}
                  style={{
                    position: "absolute",
                    left: `${d.x}%`,
                    top: `${d.y}%`,
                    width: 5,
                    height: 5,
                    borderRadius: "50%",
                    background: color,
                    boxShadow: `0 0 4px ${color}80`,
                    transform: "translate(-50%, -50%)",
                  }}
                />
              ))}
              <div style={{ position: "absolute", bottom: 10, left: 0, right: 0, textAlign: "center", fontSize: 11, color: Q.textMuted }}>
                í´ë¦­í•˜ì—¬ ì…ì ê²€ì¶œ ({dots.length}íšŒ)
              </div>
            </>
          )}
        </div>

        <Insight Q={Q} color={color} emoji="ğŸ²">
          ë§ì´ ê²€ì¶œí• ìˆ˜ë¡ í™•ë¥  ë¶„í¬ê°€ ë“œëŸ¬ë‚©ë‹ˆë‹¤. ì´ê²ƒì´ <strong style={{ color }}>ì–‘ìì—­í•™ì˜ í†µê³„ì  ë³¸ì§ˆ</strong>ì…ë‹ˆë‹¤.
          ê°œë³„ ê²°ê³¼ëŠ” ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•˜ì§€ë§Œ, íŒ¨í„´ì€ ì •í™•íˆ ì˜ˆì¸¡ë©ë‹ˆë‹¤.
        </Insight>
      </SectionBlock>
    </div>
  );
}

/* â”€â”€â”€ íŒŒë™-ì…ì ì´ì¤‘ì„± â”€â”€â”€ */
function WaveDualityVisual({ Q, color }) {
  const [mode, setMode] = useState("wave");

  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 16 }}>
      <SectionBlock Q={Q} color={color} title="ì´ì¤‘ì„±ì´ë€?">
        <p style={{ fontSize: 14, color: Q.textDim, lineHeight: 1.8, margin: 0 }}>
          ë¹›ì€ <span style={{ color, fontWeight: 700 }}>íŒŒë™</span>ì¼ê¹Œ, <span style={{ color, fontWeight: 700 }}>ì…ì(ê´‘ì)</span>ì¼ê¹Œ?
          ë‹µ: <span style={{ color, fontWeight: 700 }}>ë‘˜ ë‹¤</span>. ì‹¤í—˜ ë°©ì‹ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ë³´ì…ë‹ˆë‹¤.
          ì´ê²ƒì€ ë¹›ë§Œì´ ì•„ë‹ˆë¼ ì „ì, ì¤‘ì„±ì, ì‹¬ì§€ì–´ Câ‚†â‚€(í’€ëŸ¬ë Œ) ë¶„ìì—ë„ ì ìš©ë©ë‹ˆë‹¤.
        </p>
        <div style={{ textAlign: "center", padding: "16px 0 8px", margin: "16px 0 0", borderTop: `1px solid ${Q.border}` }}>
          <div style={{ fontSize: 10, fontWeight: 700, color, letterSpacing: 2, marginBottom: 8 }}>ë“œë¸Œë¡œì´ ë¬¼ì§ˆíŒŒ</div>
          <div style={{ fontFamily: "serif", fontSize: 20, color: Q.text, letterSpacing: 2 }}>
            Î» = h / p
          </div>
          <div style={{ fontSize: 11, color: Q.textMuted, marginTop: 10, lineHeight: 1.7 }}>
            ëª¨ë“  ë¬¼ì§ˆì€ ìš´ë™ëŸ‰ pì— ë°˜ë¹„ë¡€í•˜ëŠ” íŒŒì¥ Î»ë¥¼ ê°–ëŠ”ë‹¤
          </div>
          <div style={{ fontSize: 11, color: Q.textMuted, lineHeight: 1.7, fontStyle: "italic" }}>
            ë¬´ê±°ìš´ ë¬¼ì²´ì¼ìˆ˜ë¡ íŒŒì¥ì´ ê·¹ë„ë¡œ ì§§ì•„ì ¸ íŒŒë™ ì„±ì§ˆì´ ê´€ì¸¡ë˜ì§€ ì•ŠìŒ
          </div>
        </div>
      </SectionBlock>

      <SectionBlock Q={Q} color={color} title="ì´ì¤‘ ìŠ¬ë¦¿ ì‹¤í—˜">
        <div style={{ display: "flex", gap: 8, marginBottom: 20 }}>
          {[{ id: "wave", label: "ğŸŒŠ ê´€ì¸¡ ì—†ì´ (íŒŒë™)" }, { id: "particle", label: "ğŸ”¬ ìŠ¬ë¦¿ì— ê´€ì¸¡ê¸° ë¶€ì°©" }].map((m) => (
            <button
              key={m.id}
              onClick={() => setMode(m.id)}
              style={{
                flex: 1,
                background: mode === m.id ? `${color}15` : "transparent",
                border: `1px solid ${mode === m.id ? color : Q.border}`,
                color: mode === m.id ? color : Q.textMuted,
                borderRadius: 10,
                padding: "12px 16px",
                cursor: "pointer",
                fontSize: 13,
                fontWeight: 700,
                transition: "all 0.2s",
              }}
            >
              {m.label}
            </button>
          ))}
        </div>

        <div style={{ position: "relative", height: 200, background: Q.bg, borderRadius: 12, border: `1px solid ${Q.border}`, overflow: "hidden" }}>
          {/* Source */}
          <div style={{ position: "absolute", left: 20, top: "50%", transform: "translateY(-50%)", width: 14, height: 14, borderRadius: "50%", background: color, boxShadow: `0 0 12px ${color}60` }} />

          {/* Barrier with slits */}
          <div style={{ position: "absolute", left: "35%", top: 0, bottom: 0, width: 6, background: `${Q.textMuted}40` }}>
            <div style={{ position: "absolute", top: "32%", width: "100%", height: 16, background: Q.bg }} />
            <div style={{ position: "absolute", top: "58%", width: "100%", height: 16, background: Q.bg }} />
          </div>

          {/* Screen / Result */}
          <div style={{ position: "absolute", right: 20, top: "10%", bottom: "10%", width: 40, borderRadius: 4, overflow: "hidden" }}>
            {mode === "wave" ? (
              // Interference pattern
              <div style={{ width: "100%", height: "100%", display: "flex", flexDirection: "column" }}>
                {Array.from({ length: 20 }).map((_, i) => {
                  const intensity = Math.pow(Math.cos((i / 20) * Math.PI * 3), 2);
                  return <div key={i} style={{ flex: 1, background: color, opacity: intensity * 0.7 + 0.05 }} />;
                })}
              </div>
            ) : (
              // Two blobs
              <div style={{ width: "100%", height: "100%", position: "relative" }}>
                <div style={{ position: "absolute", top: "28%", left: 0, right: 0, height: "16%", background: `${color}50`, borderRadius: 4 }} />
                <div style={{ position: "absolute", top: "56%", left: 0, right: 0, height: "16%", background: `${color}50`, borderRadius: 4 }} />
              </div>
            )}
          </div>

          {/* Rays */}
          {mode === "wave" && (
            <svg style={{ position: "absolute", inset: 0, width: "100%", height: "100%", opacity: 0.15 }}>
              <line x1="10%" y1="50%" x2="35%" y2="38%" stroke={color} strokeWidth="1" />
              <line x1="10%" y1="50%" x2="35%" y2="62%" stroke={color} strokeWidth="1" />
              <line x1="38%" y1="38%" x2="80%" y2="20%" stroke={color} strokeWidth="0.5" strokeDasharray="4 4" />
              <line x1="38%" y1="38%" x2="80%" y2="50%" stroke={color} strokeWidth="0.5" strokeDasharray="4 4" />
              <line x1="38%" y1="62%" x2="80%" y2="50%" stroke={color} strokeWidth="0.5" strokeDasharray="4 4" />
              <line x1="38%" y1="62%" x2="80%" y2="80%" stroke={color} strokeWidth="0.5" strokeDasharray="4 4" />
            </svg>
          )}

          {/* Labels */}
          <div style={{ position: "absolute", bottom: 6, left: 12, fontSize: 9, color: Q.textMuted }}>ê´‘ì›</div>
          <div style={{ position: "absolute", bottom: 6, left: "34%", fontSize: 9, color: Q.textMuted }}>ì´ì¤‘ ìŠ¬ë¦¿</div>
          <div style={{ position: "absolute", bottom: 6, right: 12, fontSize: 9, color: Q.textMuted }}>ìŠ¤í¬ë¦°</div>
        </div>

        <Insight Q={Q} color={color} emoji="ğŸŒŠ">
          {mode === "wave" ? (
            <>
              ê´€ì¸¡ê¸° ì—†ì´ ì‹¤í—˜í•˜ë©´ <strong style={{ color }}>ê°„ì„­ ë¬´ëŠ¬</strong>ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
              ì…ìë¥¼ í•˜ë‚˜ì”© ë³´ë‚´ë„ ê°„ì„­ ë¬´ëŠ¬ê°€ í˜•ì„±ë©ë‹ˆë‹¤ â€” ì…ì í•˜ë‚˜ê°€ ë‘ ìŠ¬ë¦¿ì„ <strong style={{ color }}>ë™ì‹œì—</strong> í†µê³¼í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
            </>
          ) : (
            <>
              ìŠ¬ë¦¿ì— ê´€ì¸¡ê¸°ë¥¼ ë‹¬ì•„ "ì–´ëŠ ìŠ¬ë¦¿ì„ í†µê³¼í–ˆëŠ”ì§€" í™•ì¸í•˜ë©´
              ê°„ì„­ ë¬´ëŠ¬ê°€ <strong style={{ color }}>ì‚¬ë¼ì§€ê³ </strong> ì…ìì²˜ëŸ¼ ë‘ ì¤„ë§Œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
              <strong style={{ color }}>"ì–´ëŠ ê²½ë¡œ?" ì •ë³´ë¥¼ ì–»ëŠ” í–‰ìœ„</strong> ìì²´ê°€ íŒŒë™ í–‰ë™ì„ íŒŒê´´í•©ë‹ˆë‹¤.
            </>
          )}
        </Insight>
      </SectionBlock>
    </div>
  );
}

/* â”€â”€â”€ ì™œ ì–‘ìë¥¼ ê³µë¶€í•˜ëŠ”ê°€ â€” BQB í”Œë«í¼ â”€â”€â”€ */
function WhyQuantumVisual({ Q, color }) {
  const [expandedMap, setExpandedMap] = useState(null);

  const bqbColor = "#58a6ff";
  const greenColor = "#3fb950";
  const orangeColor = "#f0883e";
  const cyanColor = "#39d9f0";
  const purpleColor = "#bc8cff";

  const pipeline = [
    { key: "phys", label: "N_phys", sub: "ë¬¼ë¦¬ì  ë°°ì—´", value: "íë¹„íŠ¸ ì‚¬ì´íŠ¸ ìƒì„±", color: cyanColor, loss: "ìœ„ì¹˜ ì˜¤ì°¨, ë¹„í™œì„±, ì±„ë„ë§ tail", solution: "BQB í…œí”Œë¦¿ self-alignment" },
    { key: "op", label: "N_op", sub: "ìš´ìš© ê°€ëŠ¥", value: "ì „ê¸°ì ìœ¼ë¡œ ë™ì‘í•˜ëŠ” íë¹„íŠ¸", color: greenColor, loss: "outlier, ì „í•˜ ë¶ˆì•ˆì •, T2 ë¯¸ë‹¬", solution: "Triple-Wall QBQ + íë£¨í”„ ë³´ì •" },
    { key: "link", label: "N_link", sub: "ì–½í˜ ì—°ê²°", value: "2-qubit ê²Œì´íŠ¸ ê°€ëŠ¥í•œ ìŒ", color: bqbColor, loss: "ì œì–´ ë¹„ë™ê¸°, ì»¤í”Œë§ ë¶ˆê· ì¼", solution: "77K DD-IC ë™ê¸° í„ìŠ¤ + ìŠ¤í ë³´ì •" },
  ];

  const conceptMap = [
    { concept: "ì¤‘ì²©", icon: "â—‰", cColor: Q.accent, tech: "íë¹„íŠ¸ ìƒíƒœ |0âŸ©+|1âŸ©", detail: "BQBëŠ” 31P ë„ë„ˆ ì „ìì˜ ìŠ¤í•€ ì¤‘ì²©ì„ íë¹„íŠ¸ë¡œ í™œìš©í•©ë‹ˆë‹¤. ì¤‘ì²©ì„ ì˜¤ë˜ ìœ ì§€í•˜ëŠ” ê²ƒ(T2 â‰¥ 1s)ì´ í•µì‹¬ ë„ì „ì´ë©°, 28Si ë™ìœ„ì›ì†Œ ìˆœë„ì™€ Triple-Wall ê²©ë¦¬ê°€ ì´ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.", kpi: "F1q â‰¥ 0.999 (5ì°¨)" },
    { concept: "ì–½í˜", icon: "â«˜", cColor: Q.accentAlt, tech: "2-qubit ê²Œì´íŠ¸ (N_link)", detail: "ì¸ì ‘ íë¹„íŠ¸ ê°„ êµí™˜ ìƒí˜¸ì‘ìš©(J-coupling)ìœ¼ë¡œ ì–½í˜ì„ ìƒì„±í•©ë‹ˆë‹¤. N_physì—ì„œ N_linkë¡œì˜ ì „í™˜ìœ¨ì´ ì‹œìŠ¤í…œ ì„±ëŠ¥ì„ ê²°ì •í•˜ë©°, 5ì°¨ ëª©í‘œëŠ” â‰¥16ìŒì˜ CHSH ìœ„ë°˜ ê²€ì¦ì…ë‹ˆë‹¤.", kpi: "F2q â‰¥ 0.99, â‰¥16ìŒ" },
    { concept: "í„°ë„ë§", icon: "â‡¥", cColor: Q.accentGreen, tech: "ì´ì˜¨ ì£¼ì… + ì¥ë²½ ì„¤ê³„", detail: "FIB ë‹¨ì¼ ì´ì˜¨ ì£¼ì… ì‹œ 31P ì´ì˜¨ì´ BQB-B ë§¤ë¦½ ì¥ë²½ì„ íˆ¬ê³¼í•˜ëŠ” í™•ë¥ ì´ ê³§ implant windowë¥¼ ê²°ì •í•©ë‹ˆë‹¤. ì¥ë²½ ë‘ê»˜Â·ë†’ì´ì˜ ì •ë°€ ì œì–´ê°€ Ïƒ_z ê³µì •ì°½ì„ í™•ë³´í•©ë‹ˆë‹¤.", kpi: "overlay â‰¤ 15nm (5ì°¨)" },
    { concept: "ì¸¡ì •", icon: "â—", cColor: Q.accentPink, tech: "ë‹¨ì¼ ì „ì ì½ê¸°(SET/RF)", detail: "íë¹„íŠ¸ ìƒíƒœë¥¼ single-shotìœ¼ë¡œ ì½ì–´ë‚´ëŠ” ê²ƒì´ ì¸¡ì •ì…ë‹ˆë‹¤. ë‹¨ì¼ì „ìíŠ¸ëœì§€ìŠ¤í„°(SET) ë˜ëŠ” RF ë°˜ì‚¬ì¸¡ì •ìœ¼ë¡œ ìŠ¤í•€ ìƒíƒœë¥¼ ë¹„íŒŒê´´ì ìœ¼ë¡œ ê²€ì¶œí•˜ë©°, ê²€ì¶œ ì¶©ì‹¤ë„ â‰¥99%ê°€ ëª©í‘œì…ë‹ˆë‹¤.", kpi: "ë‹¨ì¼ì´ì˜¨ ê²€ì¶œ â‰¥ 99%" },
    { concept: "íŒŒë™-ì…ì ì´ì¤‘ì„±", icon: "âˆ¿", cColor: Q.accentAmber, tech: "ë¬¼ì§ˆíŒŒ Â· ë‚˜ë…¸êµ¬ì¡° ë‚´ ì „ì", detail: "ë‚˜ë…¸ë¯¸í„° ìŠ¤ì¼€ì¼ì˜ ê²Œì´íŠ¸ êµ¬ì¡°ì—ì„œ ì „ìëŠ” ëª…í™•í•œ ë¬¼ì§ˆíŒŒ ì„±ì§ˆì„ ë³´ì…ë‹ˆë‹¤. ë“œë¸Œë¡œì´ íŒŒì¥ì— ê¸°ë°˜í•œ ì–‘ì ê°„ì„­ì´ ê²Œì´íŠ¸ ì„¤ê³„(A-gate Stark shift, FDM ì£¼íŒŒìˆ˜ ë¶„ë¦¬)ì˜ ë¬¼ë¦¬ì  ê¸°ì´ˆì…ë‹ˆë‹¤.", kpi: "FDM â‰¥ 5MHz ê°„ê²©" },
    { concept: "ë¶ˆí™•ì •ì„± ì›ë¦¬", icon: "Î”", cColor: "#f43f5e", tech: "ë””ì½”íˆì–´ëŸ°ìŠ¤ Â· ë…¸ì´ì¦ˆ í•œê³„", detail: "ì—ë„ˆì§€-ì‹œê°„ ë¶ˆí™•ì •ì„±(Î”EÂ·Î”t â‰¥ â„/2)ì€ íë¹„íŠ¸ì˜ ì½”íˆì–´ëŸ°ìŠ¤ ì‹œê°„ T2ì— ê·¼ë³¸ì  ì œì•½ì„ ê²ë‹ˆë‹¤. 1/f ì „í•˜ì¡ìŒ, ìê¸°ì¥ ìš”ë™ ë“± í™˜ê²½ ë…¸ì´ì¦ˆê°€ DD(ë™ì  ë””ì»¤í”Œë§) ì‹œí€€ìŠ¤ë¡œ ì–µì œë©ë‹ˆë‹¤.", kpi: "T2 â‰¥ 1s (CPMG)" },
  ];

  const milestones = [
    { yr: "1ì°¨", label: "'26", size: "ë‹¨ì¼~ì†Œìˆ˜", trl: "3â†’3+", color: Q.textDim, highlight: "í”Œë«í¼ í™•ì •" },
    { yr: "2ì°¨", label: "'27", size: "2Ã—2", trl: "3+â†’4", color: cyanColor, highlight: "ìê°€ì •ë ¬ ì •ë°€í™”" },
    { yr: "3ì°¨", label: "'28", size: "4Ã—4", trl: "4", color: greenColor, highlight: "2-qubit ì—°ê²°" },
    { yr: "4ì°¨", label: "'29", size: "8Ã—8", trl: "4â†’5-", color: orangeColor, highlight: "256-class í™•ì¥" },
    { yr: "5ì°¨", label: "'30", size: "16Ã—16", trl: "5", color: bqbColor, highlight: "TRL5 í†µí•© ì‹œì—°" },
  ];

  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 16 }}>

      {/* â”€â”€â”€ ì¸íŠ¸ë¡œ â”€â”€â”€ */}
      <SectionBlock Q={Q} color={color} title="ì´ë¡ ì—ì„œ ê¸°ìˆ ë¡œ">
        <p style={{ fontSize: 14, color: Q.textDim, lineHeight: 1.9, margin: 0 }}>
          ì•ì„œ íƒí—˜í•œ 6ê°€ì§€ ì–‘ì ê°œë… â€” ì¤‘ì²©, ì–½í˜, í„°ë„ë§, ì¸¡ì •, ì´ì¤‘ì„±, ë¶ˆí™•ì •ì„± â€”
          ì´ê²ƒë“¤ì€ êµê³¼ì„œ ì† ì¶”ìƒì´ ì•„ë‹™ë‹ˆë‹¤.
        </p>
        <p style={{ fontSize: 14, color: Q.textDim, lineHeight: 1.9, margin: "12px 0 0" }}>
          <span style={{ color: bqbColor, fontWeight: 700 }}>BQB(Barrier-defined Qubit in Buried template)</span> í”Œë«í¼ì€
          ì´ ì›ë¦¬ë“¤ì„ <span style={{ color: greenColor, fontWeight: 700 }}>22nm FD-SOI ë°˜ë„ì²´ ê³µì • ìœ„ì—ì„œ</span> ì‹¤í˜„í•˜ì—¬,
          ëŒ€ê·œëª¨ ì–‘ìì»´í“¨í„°ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ 5ê°œë…„ ì—”ì§€ë‹ˆì–´ë§ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.
        </p>
        <p style={{ fontSize: 14, color: Q.textDim, lineHeight: 1.9, margin: "12px 0 0" }}>
          ì‹¤ë¦¬ì½˜ ì† <span style={{ color: purpleColor, fontWeight: 700 }}>31P(ì¸) ë„ë„ˆ ì›ì</span>ì˜ ì „ì ìŠ¤í•€ì„ íë¹„íŠ¸ë¡œ ì“°ê³ ,
          ë§¤ë¦½ ì¥ë²½ìœ¼ë¡œ 3ì°¨ì› ìœ„ì¹˜ë¥¼ ë‚˜ë…¸ë¯¸í„° ë‹¨ìœ„ë¡œ ì œì–´í•˜ë©°,
          ê·¹ì €ì˜¨(4K)ì—ì„œ ì–‘ì ìƒíƒœë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.
        </p>
      </SectionBlock>

      {/* â”€â”€â”€ í•µì‹¬ ë„ì „: N_phys â†’ N_op â†’ N_link â”€â”€â”€ */}
      <SectionBlock Q={Q} color={color} title="í•µì‹¬ ë„ì „: ì „í™˜ íŒŒì´í”„ë¼ì¸">
        <p style={{ fontSize: 13, color: Q.textDim, lineHeight: 1.8, margin: "0 0 20px" }}>
          ë¬¼ë¦¬ì ìœ¼ë¡œ íë¹„íŠ¸ë¥¼ ë§Œë“œëŠ” ê²ƒë§Œìœ¼ë¡œëŠ” ë¶€ì¡±í•©ë‹ˆë‹¤.
          ì§„ì •í•œ ë³‘ëª©ì€ <span style={{ color: bqbColor, fontWeight: 700 }}>ë§Œë“  íë¹„íŠ¸ë¥¼ ì‹¤ì œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë§Œë“œëŠ” ì „í™˜ìœ¨</span>ì…ë‹ˆë‹¤.
        </p>
        <div style={{ display: "flex", flexDirection: "column", gap: 0 }}>
          {pipeline.map((p, i) => (
            <div key={p.key}>
              <div style={{
                background: `${p.color}06`, border: `1px solid ${p.color}15`,
                borderRadius: 12, padding: "16px 18px",
              }}>
                <div style={{ display: "flex", alignItems: "center", gap: 12, marginBottom: 8 }}>
                  <div style={{
                    width: 36, height: 36, borderRadius: 10,
                    background: `${p.color}12`, border: `1px solid ${p.color}25`,
                    display: "flex", alignItems: "center", justifyContent: "center",
                    fontSize: 12, fontWeight: 900, color: p.color, fontFamily: "monospace",
                  }}>{i + 1}</div>
                  <div>
                    <div style={{ fontSize: 14, fontWeight: 800, color: p.color, fontFamily: "monospace" }}>{p.label}</div>
                    <div style={{ fontSize: 11, color: Q.textMuted }}>{p.sub}</div>
                  </div>
                </div>
                <div style={{ display: "flex", gap: 8, fontSize: 11, lineHeight: 1.6, marginLeft: 48 }}>
                  <div style={{ flex: 1 }}>
                    <div style={{ color: "#f43f5e", fontWeight: 700, fontSize: 10, marginBottom: 3 }}>ì†ì‹¤ ì›ì¸</div>
                    <div style={{ color: Q.textDim }}>{p.loss}</div>
                  </div>
                  <div style={{ width: 1, background: Q.border }} />
                  <div style={{ flex: 1 }}>
                    <div style={{ color: greenColor, fontWeight: 700, fontSize: 10, marginBottom: 3 }}>BQB í•´ë²•</div>
                    <div style={{ color: Q.textDim }}>{p.solution}</div>
                  </div>
                </div>
              </div>
              {i < pipeline.length - 1 && (
                <div style={{ display: "flex", justifyContent: "center", padding: "4px 0" }}>
                  <div style={{ width: 2, height: 16, background: `linear-gradient(${pipeline[i].color}40, ${pipeline[i+1].color}40)` }} />
                </div>
              )}
            </div>
          ))}
        </div>
        <Insight Q={Q} color={color} emoji="ğŸ“">
          5ì°¨ ëª©í‘œ: 16Ã—16 ë°°ì—´(256 ì‚¬ì´íŠ¸)ì—ì„œ ì‚¬ì´íŠ¸ ìˆ˜ìœ¨ <strong style={{ color: greenColor }}>â‰¥99%</strong>,
          ì–´ë ˆì´ ìˆ˜ìœ¨ <strong style={{ color: greenColor }}>â‰¥70%</strong>,
          ì–½í˜ ë§í¬ <strong style={{ color: bqbColor }}>â‰¥16ìŒ</strong>.
        </Insight>
      </SectionBlock>

      {/* â”€â”€â”€ 6ê°œ ê°œë… Ã— BQB ê¸°ìˆ  ë§¤í•‘ â”€â”€â”€ */}
      <SectionBlock Q={Q} color={color} title="6ê°œ ì–‘ì ê°œë…ì´ ë§Œë‚˜ëŠ” ê¸°ìˆ ">
        <p style={{ fontSize: 13, color: Q.textDim, lineHeight: 1.8, margin: "0 0 16px" }}>
          ê° ê°œë…ì„ í´ë¦­í•˜ë©´ BQB ì—”ì§€ë‹ˆì–´ë§ì—ì„œ ì–´ë–¤ ì—­í• ì„ í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </p>
        <div style={{ display: "flex", flexDirection: "column", gap: 8 }}>
          {conceptMap.map((cm, idx) => {
            const isOpen = expandedMap === idx;
            return (
              <div key={idx}
                onClick={() => setExpandedMap(isOpen ? null : idx)}
                style={{
                  background: isOpen ? `${cm.cColor}06` : Q.bg,
                  border: `1px solid ${isOpen ? `${cm.cColor}25` : Q.border}`,
                  borderRadius: 12, padding: isOpen ? "16px 16px 14px" : "12px 16px",
                  cursor: "pointer", transition: "all 0.25s",
                }}
              >
                <div style={{ display: "flex", alignItems: "center", gap: 12 }}>
                  <span style={{ fontSize: 18, fontWeight: 900, color: cm.cColor, width: 24, textAlign: "center" }}>{cm.icon}</span>
                  <div style={{ flex: 1 }}>
                    <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
                      <span style={{ fontSize: 13, fontWeight: 700, color: Q.text }}>{cm.concept}</span>
                      <span style={{ fontSize: 11, color: cm.cColor }}>â†’</span>
                      <span style={{ fontSize: 12, fontWeight: 600, color: cm.cColor }}>{cm.tech}</span>
                    </div>
                  </div>
                  <span style={{ fontSize: 12, color: Q.textMuted, transition: "transform 0.2s", transform: isOpen ? "rotate(180deg)" : "none" }}>â–¾</span>
                </div>
                {isOpen && (
                  <div style={{ marginTop: 12, marginLeft: 36 }}>
                    <div style={{ fontSize: 12, color: Q.textDim, lineHeight: 1.8, marginBottom: 10 }}>{cm.detail}</div>
                    <div style={{ display: "inline-flex", alignItems: "center", gap: 6, background: `${cm.cColor}10`, border: `1px solid ${cm.cColor}20`, borderRadius: 6, padding: "4px 10px" }}>
                      <span style={{ fontSize: 9, fontWeight: 800, color: cm.cColor, letterSpacing: 1 }}>KPI</span>
                      <span style={{ fontSize: 11, fontWeight: 700, color: cm.cColor }}>{cm.kpi}</span>
                    </div>
                  </div>
                )}
              </div>
            );
          })}
        </div>
      </SectionBlock>

      {/* â”€â”€â”€ BQB 4ëŒ€ í•µì‹¬ ê¸°ìˆ  â”€â”€â”€ */}
      <SectionBlock Q={Q} color={color} title="BQB 4ëŒ€ í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ">
        <div style={{ display: "grid", gridTemplateColumns: "repeat(2, 1fr)", gap: 8 }}>
          {[
            { icon: "ğŸ›¡ï¸", name: "Triple-Wall QBQ", desc: "3ì¤‘ ê²©ë¦¬ë²½ìœ¼ë¡œ íë¹„íŠ¸ë¥¼ ì™¸ë¶€ ë…¸ì´ì¦ˆë¡œë¶€í„° ë³´í˜¸", c: greenColor, detail: "STI moat + T3 ì‹¤ë“œì›° + BQB-B ë§¤ë¦½ ì¥ë²½" },
            { icon: "âš¡", name: "77K DD-IC", desc: "ê·¹ì €ì˜¨ ê·¼ì ‘ ì œì–´ì¹©ìœ¼ë¡œ ë™ê¸° í„ìŠ¤ ìƒì„±", c: orangeColor, detail: "22nm FD-SOI Â· Broadcast+ì„ íƒ Â· O(âˆšN) ìŠ¤ì¼€ì¼ë§" },
            { icon: "â„ï¸", name: "Split-Stage íŒ¨í‚¤ì§•", desc: "77K(ì œì–´)ì™€ 4K(íë¹„íŠ¸) ì—´ì  ë¶„ë¦¬", c: cyanColor, detail: "2-Deck ì§€ê·¸ Â· G10 ìŠ¤í˜ì´ì„œ Â· NbTi ë™ì¶•" },
            { icon: "ğŸ”„", name: "íë£¨í”„ ìˆ˜ë ´", desc: "Generateâ†’Verifyâ†’Correct ë°˜ë³µìœ¼ë¡œ ìˆ˜ìœ¨ ìˆ˜ë ´", c: purpleColor, detail: "nano-CT ê²€ì¦ Â· die-map ì¬ë§¤í•‘ Â· ìº˜ë¦¬ë¸Œë ˆì´ì…˜" },
          ].map((t, i) => (
            <div key={i} style={{
              background: `${t.c}04`, border: `1px solid ${t.c}12`,
              borderRadius: 12, padding: 14,
            }}>
              <div style={{ fontSize: 20, marginBottom: 8 }}>{t.icon}</div>
              <div style={{ fontSize: 12, fontWeight: 800, color: t.c, marginBottom: 4 }}>{t.name}</div>
              <div style={{ fontSize: 11, color: Q.textDim, lineHeight: 1.5, marginBottom: 6 }}>{t.desc}</div>
              <div style={{ fontSize: 10, color: Q.textMuted, lineHeight: 1.5, fontStyle: "italic" }}>{t.detail}</div>
            </div>
          ))}
        </div>
      </SectionBlock>

      {/* â”€â”€â”€ 5ê°œë…„ ë¡œë“œë§µ â”€â”€â”€ */}
      <SectionBlock Q={Q} color={color} title="5ê°œë…„ ë¡œë“œë§µ: TRL 3 â†’ 5">
        <div style={{ position: "relative", padding: "0 0 8px" }}>
          {/* Timeline line */}
          <div style={{ position: "absolute", left: 18, top: 0, bottom: 0, width: 2, background: `linear-gradient(${Q.textMuted}20, ${bqbColor}40, ${bqbColor}20)` }} />

          {milestones.map((m, i) => (
            <div key={i} style={{ display: "flex", gap: 16, marginBottom: i < milestones.length - 1 ? 16 : 0, position: "relative" }}>
              {/* Dot */}
              <div style={{
                width: 38, height: 38, borderRadius: 10, flexShrink: 0,
                background: `${m.color}10`, border: `1px solid ${m.color}30`,
                display: "flex", alignItems: "center", justifyContent: "center",
                fontSize: 11, fontWeight: 900, color: m.color, fontFamily: "monospace",
                zIndex: 1,
              }}>{m.yr}</div>
              <div style={{ flex: 1, paddingTop: 2 }}>
                <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 4 }}>
                  <span style={{ fontSize: 13, fontWeight: 800, color: m.color }}>{m.highlight}</span>
                  <span style={{ fontSize: 9, fontWeight: 700, color: Q.textMuted, background: `${Q.textMuted}12`, padding: "2px 6px", borderRadius: 4 }}>TRL {m.trl}</span>
                </div>
                <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
                  <span style={{ fontSize: 11, color: Q.textDim }}>ë°°ì—´: <strong style={{ color: m.color }}>{m.size}</strong></span>
                  <span style={{ fontSize: 9, color: Q.textMuted }}>{m.label}</span>
                </div>
              </div>
            </div>
          ))}
        </div>
        <Insight Q={Q} color={color} emoji="ğŸ¯">
          ìµœì¢… ëª©í‘œ: <strong style={{ color: bqbColor }}>16Ã—16 (256 íë¹„íŠ¸)</strong> ë°°ì—´ì—ì„œ
          F1q â‰¥ 0.999, F2q â‰¥ 0.99, T2 â‰¥ 1s, ì–½í˜ â‰¥ 16ìŒì„ ë‹¬ì„±í•˜ì—¬
          <strong style={{ color: greenColor }}> ê¸°ìˆ  ì„±ìˆ™ë„ TRL 5</strong>ë¥¼ ì‹œì—°í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
        </Insight>
      </SectionBlock>

      {/* â”€â”€â”€ ìˆ˜ìœ¨ ê±°ë“­ì œê³±ì˜ ë¬´ì„œì›€ â”€â”€â”€ */}
      <SectionBlock Q={Q} color={color} title="ìˆ˜ìœ¨ì˜ ê±°ë“­ì œê³± ë²•ì¹™">
        <p style={{ fontSize: 13, color: Q.textDim, lineHeight: 1.8, margin: "0 0 16px" }}>
          ë°°ì—´ ìˆ˜ìœ¨ì€ ê°œë³„ ì‚¬ì´íŠ¸ ìˆ˜ìœ¨ì˜ <span style={{ color: "#f43f5e", fontWeight: 700 }}>ê±°ë“­ì œê³±</span>ìœ¼ë¡œ ê°ì‡ í•©ë‹ˆë‹¤.
          ì‚¬ì´íŠ¸ ìˆ˜ìœ¨ 1%ì˜ ì°¨ì´ê°€ ì‹œìŠ¤í…œ ìˆ˜ì¤€ì—ì„œ ê·¹ì ì¸ ê²°ê³¼ë¥¼ ë§Œë“­ë‹ˆë‹¤.
        </p>
        <div style={{ display: "flex", flexDirection: "column", gap: 6, marginBottom: 12 }}>
          {[
            { p: "99.0%", y: "7.6%", bar: 7.6, c: "#f43f5e" },
            { p: "99.5%", y: "27.7%", bar: 27.7, c: orangeColor },
            { p: "99.9%", y: "77.4%", bar: 77.4, c: greenColor },
          ].map((r, i) => (
            <div key={i} style={{ display: "flex", alignItems: "center", gap: 10 }}>
              <div style={{ width: 60, fontSize: 12, fontWeight: 700, color: Q.textDim, textAlign: "right", fontFamily: "monospace" }}>p={r.p}</div>
              <div style={{ flex: 1, height: 20, background: Q.bg, borderRadius: 4, overflow: "hidden", border: `1px solid ${Q.border}` }}>
                <div style={{ width: `${r.bar}%`, height: "100%", background: `${r.c}40`, borderRadius: 3, transition: "width 0.5s ease" }} />
              </div>
              <div style={{ width: 44, fontSize: 12, fontWeight: 800, color: r.c, fontFamily: "monospace" }}>{r.y}</div>
            </div>
          ))}
        </div>
        <div style={{ fontSize: 11, color: Q.textMuted, textAlign: "center", fontFamily: "serif", letterSpacing: 1 }}>
          Y_array = p_site<sup>N</sup> (N = 256 ì‚¬ì´íŠ¸ ê¸°ì¤€)
        </div>
      </SectionBlock>

      {/* â”€â”€â”€ ë§ˆë¬´ë¦¬ â”€â”€â”€ */}
      <div style={{
        background: `linear-gradient(135deg, ${bqbColor}08, ${purpleColor}06, ${greenColor}04)`,
        border: `1px solid ${bqbColor}15`, borderRadius: 16, padding: "28px 24px",
        textAlign: "center",
      }}>
        <div style={{ fontSize: 24, marginBottom: 12 }}>âš›ï¸ â†’ ğŸ”§ â†’ ğŸ’»</div>
        <p style={{ fontSize: 14, color: Q.textDim, lineHeight: 1.9, maxWidth: 500, margin: "0 auto" }}>
          ì–‘ìì—­í•™ì˜ ì›ë¦¬ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì€
          <span style={{ color: bqbColor, fontWeight: 700 }}> ì–‘ìì»´í“¨í„°ë¥¼ ì„¤ê³„í•˜ëŠ” ì—”ì§€ë‹ˆì–´ì˜ ì²«ê±¸ìŒ</span>ì…ë‹ˆë‹¤.
        </p>
        <p style={{ fontSize: 13, color: Q.textMuted, lineHeight: 1.8, maxWidth: 500, margin: "12px auto 0" }}>
          ì¤‘ì²©ì´ íë¹„íŠ¸ë¥¼, ì–½í˜ì´ ê²Œì´íŠ¸ë¥¼, í„°ë„ë§ì´ ê³µì •ì„,
          ì¸¡ì •ì´ ì½ê¸°ë¥¼, ë¶ˆí™•ì •ì„±ì´ í•œê³„ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
          ì´ ëª¨ë“  ê²ƒì„ ì‹¤ë¦¬ì½˜ ìœ„ì— êµ¬í˜„í•˜ëŠ” ê²ƒì´ BQBì˜ ë„ì „ì…ë‹ˆë‹¤.
        </p>
      </div>
    </div>
  );
}

/* â”€â”€â”€ ë¶ˆí™•ì •ì„± ì›ë¦¬ â”€â”€â”€ */
function UncertaintyVisual({ Q, color }) {
  const [focus, setFocus] = useState(50);

  const positionSpread = 100 - focus;
  const momentumSpread = focus;

  return (
    <div style={{ display: "flex", flexDirection: "column", gap: 16 }}>
      <SectionBlock Q={Q} color={color} title="ë¶ˆí™•ì •ì„± ì›ë¦¬ë€?">
        <p style={{ fontSize: 14, color: Q.textDim, lineHeight: 1.8, margin: 0 }}>
          í•˜ì´ì  ë² ë¥´í¬ì˜ ì›ë¦¬: ì…ìì˜ <span style={{ color, fontWeight: 700 }}>ìœ„ì¹˜</span>ë¥¼ ì •í™•íˆ ì•Œìˆ˜ë¡
          <span style={{ color: "#06b6d4", fontWeight: 700 }}> ìš´ë™ëŸ‰</span>ì€ ë” ë¶ˆí™•ì‹¤í•´ì§€ê³ , ê·¸ ë°˜ëŒ€ë„ ë§ˆì°¬ê°€ì§€ì…ë‹ˆë‹¤.
          ì´ê²ƒì€ <span style={{ color, fontWeight: 700 }}>ì¸¡ì • ê¸°ìˆ ì˜ í•œê³„ê°€ ì•„ë‹ˆë¼ ìì—°ì˜ ê·¼ë³¸ì  ì„±ì§ˆ</span>ì…ë‹ˆë‹¤.
        </p>
      </SectionBlock>

      <SectionBlock Q={Q} color={color} title="ì§ì ‘ ì¡°ì ˆí•´ ë³´ê¸°">
        <div style={{ textAlign: "center", padding: "0 0 8px" }}>
          <div style={{ fontSize: 22, fontFamily: "serif", color: Q.text, marginBottom: 20, letterSpacing: 2 }}>
            Î”x Â· Î”p â‰¥ â„/2
          </div>

          {/* Position visualization */}
          <div style={{ display: "flex", gap: 20, marginBottom: 24 }}>
            <div style={{ flex: 1, textAlign: "center" }}>
              <div style={{ fontSize: 12, fontWeight: 700, color, marginBottom: 8 }}>ìœ„ì¹˜ (Î”x)</div>
              <div style={{ position: "relative", height: 80, background: Q.bg, borderRadius: 8, border: `1px solid ${Q.border}`, overflow: "hidden" }}>
                <div
                  style={{
                    position: "absolute",
                    top: "50%",
                    left: "50%",
                    transform: "translate(-50%, -50%)",
                    width: `${Math.max(10, positionSpread)}%`,
                    height: `${Math.max(10, positionSpread)}%`,
                    borderRadius: "50%",
                    background: `radial-gradient(circle, ${color}40, ${color}10, transparent)`,
                    transition: "all 0.3s",
                  }}
                />
                <div style={{ position: "absolute", top: "50%", left: "50%", transform: "translate(-50%, -50%)", width: 6, height: 6, borderRadius: "50%", background: color, boxShadow: `0 0 8px ${color}60` }} />
              </div>
              <div style={{ fontSize: 11, color: Q.textMuted, marginTop: 6 }}>ë¶ˆí™•ì‹¤ì„±: {positionSpread}%</div>
            </div>

            <div style={{ flex: 1, textAlign: "center" }}>
              <div style={{ fontSize: 12, fontWeight: 700, color: "#06b6d4", marginBottom: 8 }}>ìš´ë™ëŸ‰ (Î”p)</div>
              <div style={{ position: "relative", height: 80, background: Q.bg, borderRadius: 8, border: `1px solid ${Q.border}`, overflow: "hidden" }}>
                {Array.from({ length: 8 }).map((_, i) => (
                  <div
                    key={i}
                    style={{
                      position: "absolute",
                      top: "50%",
                      left: `${50 + (Math.random() - 0.5) * momentumSpread * 0.8}%`,
                      transform: "translateY(-50%)",
                      width: `${2 + momentumSpread * 0.3}px`,
                      height: 2,
                      background: "#06b6d4",
                      opacity: 0.4 + Math.random() * 0.4,
                      borderRadius: 1,
                    }}
                  />
                ))}
                <div style={{ position: "absolute", top: "50%", left: "50%", transform: "translate(-50%, -50%)", fontSize: 16, color: "#06b6d4" }}>â†’</div>
              </div>
              <div style={{ fontSize: 11, color: Q.textMuted, marginTop: 6 }}>ë¶ˆí™•ì‹¤ì„±: {momentumSpread}%</div>
            </div>
          </div>

          {/* Slider */}
          <div style={{ padding: "0 20px" }}>
            <div style={{ display: "flex", justifyContent: "space-between", fontSize: 11, color: Q.textMuted, marginBottom: 6 }}>
              <span>â† ìš´ë™ëŸ‰ ì •í™•</span>
              <span>ìœ„ì¹˜ ì •í™• â†’</span>
            </div>
            <input
              type="range"
              min="5"
              max="95"
              value={focus}
              onChange={(e) => setFocus(Number(e.target.value))}
              style={{ width: "100%", accentColor: color }}
            />
          </div>
        </div>

        <Insight Q={Q} color={color} emoji="âš–ï¸">
          ìŠ¬ë¼ì´ë”ë¥¼ ì›€ì§ì—¬ ë³´ì„¸ìš”. í•œìª½ì„ ì¤„ì´ë©´ ë‹¤ë¥¸ ìª½ì´ ë°˜ë“œì‹œ ì»¤ì§‘ë‹ˆë‹¤.
          ì´ê²ƒì´ <strong style={{ color }}>ìì—°ì´ ì •í•œ ì ˆëŒ€ì  í•œê³„</strong>ì…ë‹ˆë‹¤.
        </Insight>
      </SectionBlock>

      <SectionBlock Q={Q} color={color} title="ì—ë„ˆì§€-ì‹œê°„ ë¶ˆí™•ì •ì„±">
        <div style={{ textAlign: "center", padding: 16, background: `${color}06`, borderRadius: 12, marginBottom: 16 }}>
          <div style={{ fontFamily: "serif", fontSize: 20, color: Q.text, letterSpacing: 2 }}>
            Î”E Â· Î”t â‰¥ â„/2
          </div>
          <div style={{ fontSize: 12, color: Q.textMuted, marginTop: 10, lineHeight: 1.7 }}>
            ì—ë„ˆì§€ë¥¼ ì •í™•íˆ ì¸¡ì •í•˜ë ¤ë©´ ì¶©ë¶„í•œ ì‹œê°„ì´ í•„ìš”í•˜ê³ , ì§§ì€ ì‹œê°„ì—ëŠ” ì—ë„ˆì§€ê°€ í¬ê²Œ ìš”ë™ì¹  ìˆ˜ ìˆë‹¤
          </div>
        </div>
        <p style={{ fontSize: 13, color: Q.textDim, lineHeight: 1.8, margin: 0 }}>
          ì´ ì›ë¦¬ ë•ë¶„ì— <span style={{ color, fontWeight: 700 }}>ì§„ê³µì—ì„œë„ ì—ë„ˆì§€ê°€ 0ì´ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤(ì˜ì ì—ë„ˆì§€)</span>.
          ì–‘ìì¥ë¡ ì—ì„œ ì§„ê³µì€ "ì•„ë¬´ê²ƒë„ ì—†ëŠ” ê²ƒ"ì´ ì•„ë‹ˆë¼, ì…ì-ë°˜ì…ì ìŒì´ ìˆœê°„ì ìœ¼ë¡œ ìƒê²¼ë‹¤ê°€ ì‚¬ë¼ì§€ëŠ”
          <span style={{ color, fontWeight: 700 }}> ì–‘ì ìš”ë™</span>ìœ¼ë¡œ ëŠì„ì—†ì´ ë“¤ë“ëŠ” ê³µê°„ì…ë‹ˆë‹¤.
          ì´ íš¨ê³¼ëŠ” <span style={{ color, fontWeight: 700 }}>ì¹´ì‹œë¯¸ë¥´ íš¨ê³¼</span>ë¡œ ì‹¤í—˜ì ìœ¼ë¡œ ê²€ì¦ë˜ì—ˆìŠµë‹ˆë‹¤.
        </p>
      </SectionBlock>
    </div>
  );
}


  return <_QWECore />;
}

/* â•â•â•â•â•â•â• APP: BQB ê³ ê¸‰ ê°€ì´ë“œ â•â•â•â•â•â•â• */
function BQBAdvancedGuide() {

const B = {
  bg: "#060a14", bgSub: "#0a0f1e", card: "#0d1525", cardHover: "#111d32",
  surface: "#162038", accent: "#58a6ff", accentDim: "#1f6feb",
  green: "#3fb950", greenDim: "#238636",
  orange: "#f0883e", orangeDim: "#bd561d",
  cyan: "#39d9f0", cyanDim: "#0e7490",
  purple: "#bc8cff", purpleDim: "#8b5cf6",
  red: "#f85149", redDim: "#da3633",
  yellow: "#fde047",
  text: "#e6edf3", textDim: "#8b949e", textMuted: "#484f58",
  border: "#21262d", borderLight: "#30363d",
};

const sections = [
  { id: "overview", label: "ê°œìš”", icon: "ğŸ“", color: B.accent },
  { id: "error-budget", label: "ì˜¤ì°¨ ì˜ˆì‚°", icon: "ğŸ“", color: B.accent },
  { id: "triple-wall", label: "Triple-Wall", icon: "ğŸ›¡ï¸", color: B.green },
  { id: "dd-ic", label: "DD-IC", icon: "âš¡", color: B.orange },
  { id: "thermal", label: "ì—´ì„¤ê³„", icon: "â„ï¸", color: B.cyan },
  { id: "closed-loop", label: "íë£¨í”„", icon: "ğŸ”„", color: B.purple },
  { id: "kpi", label: "KPI", icon: "ğŸ“Š", color: B.orange },
  { id: "risk", label: "ë¦¬ìŠ¤í¬", icon: "âš ï¸", color: B.red },
];

const [activeSection, setActiveSection] = useState("overview");

const font = "'Noto Sans KR', system-ui, sans-serif";
const mono = "'JetBrains Mono', 'SF Mono', monospace";

/* â”€â”€â”€ ê³µí†µ ì»´í¬ë„ŒíŠ¸ â”€â”€â”€ */
function Card({ children, style, glow }) {
  return (
    <div style={{
      background: B.card, borderRadius: 14, border: `1px solid ${B.border}`,
      padding: 24, marginBottom: 14,
      boxShadow: glow ? `0 0 20px ${glow}08` : "none",
      ...style,
    }}>{children}</div>
  );
}

function STitle({ color, children, sub }) {
  return (
    <div style={{ marginBottom: 20 }}>
      <div style={{ fontSize: 18, fontWeight: 800, color, lineHeight: 1.3 }}>{children}</div>
      {sub && <div style={{ fontSize: 12, color: B.textDim, marginTop: 6, lineHeight: 1.6 }}>{sub}</div>}
    </div>
  );
}

function Badge({ color, children }) {
  return (
    <span style={{
      fontSize: 9, fontWeight: 800, color,
      background: `${color}12`, border: `1px solid ${color}20`,
      borderRadius: 4, padding: "2px 7px", letterSpacing: 0.5,
    }}>{children}</span>
  );
}

function Spec({ label, value, color, unit }) {
  return (
    <div style={{ textAlign: "center" }}>
      <div style={{ fontSize: 20, fontWeight: 900, color: color || B.accent, fontFamily: mono }}>{value}</div>
      {unit && <div style={{ fontSize: 10, color: color || B.accent, fontWeight: 600 }}>{unit}</div>}
      <div style={{ fontSize: 10, color: B.textMuted, marginTop: 2 }}>{label}</div>
    </div>
  );
}

function DataRow({ cells, header, color }) {
  return (
    <div style={{
      display: "grid", gridTemplateColumns: cells.map(c => c.w || "1fr").join(" "),
      gap: 1, marginBottom: 1,
    }}>
      {cells.map((c, i) => (
        <div key={i} style={{
          padding: "8px 10px", fontSize: header ? 10 : 11,
          fontWeight: header ? 800 : 400,
          color: header ? (color || B.accent) : (c.highlight ? c.highlight : B.textDim),
          background: header ? `${color || B.accent}08` : B.bg,
          fontFamily: c.mono ? mono : "inherit",
          letterSpacing: header ? 1 : 0,
          lineHeight: 1.5,
        }}>{c.text || c}</div>
      ))}
    </div>
  );
}

/* â•â•â• ê°œìš” ì„¹ì…˜ â•â•â• */
function OverviewSection() {
  return (
    <div>
      <Card>
        <STitle color={B.accent}>BQB ê³ ê¸‰ ê°€ì´ë“œ</STitle>
        <p style={{ fontSize: 13, color: B.textDim, lineHeight: 1.9, margin: 0 }}>
          ë³¸ ê°€ì´ë“œëŠ” BQB í”Œë«í¼ì˜ <span style={{ color: B.accent, fontWeight: 700 }}>ì„¤ê³„ ê²°ì • ê·¼ê±°ì™€ ì •ëŸ‰ì  ìŠ¤í™</span>ì„
          ì—”ì§€ë‹ˆì–´ë§ ë ˆí¼ëŸ°ìŠ¤ ìˆ˜ì¤€ìœ¼ë¡œ ì •ë¦¬í•œ ë¬¸ì„œì…ë‹ˆë‹¤.
        </p>
        <p style={{ fontSize: 13, color: B.textDim, lineHeight: 1.9, margin: "12px 0 0" }}>
          <span style={{ color: B.orange, fontWeight: 700 }}>ëŒ€ìƒ ë…ì:</span> ë°˜ë„ì²´ ê³µì •/íšŒë¡œ ì„¤ê³„ ê²½í—˜ì´ ìˆê³ ,
          TCAD ì‹œë®¬ë ˆì´ì…˜Â·PDK ì„¤ê³„ ê·œì¹™Â·í¬ë¼ì´ì˜¤ íŒ¨í‚¤ì§•Â·RF íšŒë¡œì— ëŒ€í•œ ë°°ê²½ì§€ì‹ì„ ë³´ìœ í•œ ì—”ì§€ë‹ˆì–´Â·ì—°êµ¬ì.
        </p>
        <div style={{ display: "flex", flexWrap: "wrap", gap: 6, marginTop: 16 }}>
          {[
            { label: "22nm FD-SOI", c: B.cyan },
            { label: "28Si / 31P Donor", c: B.purple },
            { label: "TRL 3â†’5", c: B.green },
            { label: "5ê°œë…„ KPI", c: B.orange },
          ].map((b, i) => <Badge key={i} color={b.c}>{b.label}</Badge>)}
        </div>
      </Card>

      <Card>
        <STitle color={B.textDim} sub="ê° ì„¹ì…˜ì„ í´ë¦­í•˜ì—¬ ìƒì„¸ ë‚´ìš©ì„ í™•ì¸í•˜ì„¸ìš”">ëª©ì°¨</STitle>
        <div style={{ display: "flex", flexDirection: "column", gap: 6 }}>
          {sections.filter(s => s.id !== "overview").map((s, i) => (
            <div key={s.id} onClick={() => setActiveSection(s.id)}
              style={{
                display: "flex", alignItems: "center", gap: 12,
                padding: "12px 14px", borderRadius: 10, cursor: "pointer",
                background: B.bg, border: `1px solid ${B.border}`,
                transition: "all 0.2s",
              }}
              onMouseEnter={e => { e.currentTarget.style.borderColor = `${s.color}30`; e.currentTarget.style.background = `${s.color}06`; }}
              onMouseLeave={e => { e.currentTarget.style.borderColor = B.border; e.currentTarget.style.background = B.bg; }}
            >
              <span style={{ fontSize: 16 }}>{s.icon}</span>
              <div style={{ flex: 1 }}>
                <div style={{ fontSize: 13, fontWeight: 700, color: s.color }}>{s.label}</div>
              </div>
              <span style={{ fontSize: 11, color: B.textMuted }}>â†’</span>
            </div>
          ))}
        </div>
      </Card>
    </div>
  );
}

/* â•â•â• 1. ì˜¤ì°¨ ì˜ˆì‚° ë¶„í•´ â•â•â• */
function ErrorBudgetSection() {
  const [showDetail, setShowDetail] = useState(null);

  const stages = [
    { key: "phys", label: "N_phys", sub: "ë¬¼ë¦¬ì  ë°°ì—´", color: B.cyan,
      loss: "ìœ„ì¹˜ ì˜¤ì°¨, ë¹„í™œì„± ì‚¬ì´íŠ¸, ì±„ë„ë§ tail",
      solution: "BQB í…œí”Œë¦¿ self-alignmentìœ¼ë¡œ ì–µì œ",
      detail: "FIB ë‹¨ì¼ ì´ì˜¨ ì£¼ì… ì‹œ BQB-B ë§¤ë¦½ ì¥ë²½ì´ 3D ì¢Œí‘œë¥¼ ì •ì˜. ì±„ë„ë§ tailì€ ì¥ë²½ ë‘ê»˜/ì—ë„ˆì§€ë¡œ ì œì–´." },
    { key: "op", label: "N_op", sub: "ìš´ìš© ê°€ëŠ¥", color: B.green,
      loss: "outlier, ì „í•˜ ë¶ˆì•ˆì •, T2 ë¯¸ë‹¬",
      solution: "Triple-Wall QBQ + íë£¨í”„ ë³´ì •ìœ¼ë¡œ ì–µì œ",
      detail: "Wall-1(STI moat) + Wall-2(T3 ì‹¤ë“œì›°) + Wall-3(BQB-B)ì˜ 3ì¤‘ ê²©ë¦¬ë¡œ ì „í•˜ì¡ìŒ ë° í¬ë¡œìŠ¤í† í¬ ê°ì†Œ." },
    { key: "link", label: "N_link", sub: "ì–½í˜ ì—°ê²°", color: B.accent,
      loss: "ì œì–´ ë¹„ë™ê¸°, ì»¤í”Œë§ ë¶ˆê· ì¼",
      solution: "77K DD-IC ë™ê¸° í„ìŠ¤ + ìŠ¤í ë³´ì •ìœ¼ë¡œ ì–µì œ",
      detail: "ì˜¨ì¹© TDCë¡œ ìŠ¤í ì¸¡ì • â†’ Delay-trim ë³´ì •. Broadcast+ì„ íƒ êµ¬ë™ìœ¼ë¡œ O(âˆšN) ìŠ¤ì¼€ì¼ë§ ë‹¬ì„±." },
  ];

  const kpiData = [
    { label: "ë°°ì—´ ê·œëª¨", vals: ["ë‹¨ì¼~ì†Œìˆ˜", "2Ã—2", "4Ã—4", "8Ã—8", "16Ã—16"] },
    { label: "overlay (nm)", vals: ["â‰¤50", "â‰¤35", "â‰¤25", "â‰¤20", "â‰¤15"], highlight: true },
    { label: "outlier (%)", vals: ["ê¸°ì¤€ì •ì˜", "â‰¤5", "â‰¤3", "â‰¤2", "â‰¤1"], highlight: true },
    { label: "F1q", vals: ["ê¸°ì¤€í™•ë¦½", "â‰¥0.99", "0.95~0.99", "â‰¥0.99", "â‰¥0.999"] },
    { label: "F2q", vals: ["ê¸°ì¤€í™•ë¦½", "â‰¥0.90", "â‰¥0.95", "â‰¥0.98", "â‰¥0.99"] },
    { label: "ì–½í˜ ë§í¬ (ìŒ)", vals: ["0", "â‰¥1", "â‰¥4", "â‰¥8", "â‰¥16"] },
    { label: "ì‚¬ì´íŠ¸ ìˆ˜ìœ¨", vals: ["â€”", "ë¶„ë¦¬ë³´ê³ ", "â‰¥95%", "â‰¥97%", "â‰¥99%"] },
    { label: "T2 (CPMG)", vals: ["ê¸°ì¤€ì„ ", "ê°œì„ ", "ê°œì„ ", "ê°œì„ ", "â‰¥1 s"] },
    { label: "Î”R/R", vals: ["â‰¤10%", "â‰¤7%", "â‰¤5%", "â‰¤3%", "â‰¤2%"] },
  ];

  return (
    <div>
      <Card glow={B.accent}>
        <STitle color={B.accent} sub="ëŒ€ê·œëª¨ ë°°ì—´ í™•ì¥ì˜ ì‹¤ì§ˆì  ë³‘ëª©: ë¬¼ë¦¬ì  ì‚¬ì´íŠ¸ â†’ ìš´ìš© â†’ ì–½í˜ ì „í™˜ìœ¨">
          ì „í™˜ êµ¬ì¡°: N_phys â†’ N_op â†’ N_link
        </STitle>

        <div style={{ display: "flex", flexDirection: "column", gap: 0 }}>
          {stages.map((s, i) => (
            <div key={s.key}>
              <div
                onClick={() => setShowDetail(showDetail === s.key ? null : s.key)}
                style={{
                  background: showDetail === s.key ? `${s.color}08` : B.bg,
                  border: `1px solid ${showDetail === s.key ? `${s.color}25` : B.border}`,
                  borderRadius: 12, padding: "16px 18px", cursor: "pointer",
                  transition: "all 0.2s",
                }}
              >
                <div style={{ display: "flex", alignItems: "center", gap: 12 }}>
                  <div style={{
                    width: 40, height: 40, borderRadius: 10,
                    background: `${s.color}10`, border: `1px solid ${s.color}25`,
                    display: "flex", alignItems: "center", justifyContent: "center",
                    fontSize: 14, fontWeight: 900, color: s.color, fontFamily: mono,
                  }}>{s.label.split("_")[1]}</div>
                  <div style={{ flex: 1 }}>
                    <div style={{ fontSize: 14, fontWeight: 800, color: s.color, fontFamily: mono }}>{s.label}</div>
                    <div style={{ fontSize: 11, color: B.textMuted }}>{s.sub}</div>
                  </div>
                  <span style={{ fontSize: 11, color: B.textMuted, transition: "transform 0.2s", transform: showDetail === s.key ? "rotate(180deg)" : "none" }}>â–¾</span>
                </div>

                <div style={{ display: "flex", gap: 8, marginTop: 12, marginLeft: 52 }}>
                  <div style={{ flex: 1, fontSize: 11, color: B.textDim, lineHeight: 1.6 }}>
                    <div style={{ color: B.red, fontWeight: 700, fontSize: 9, marginBottom: 3, letterSpacing: 1 }}>LOSS</div>
                    {s.loss}
                  </div>
                  <div style={{ width: 1, background: B.border }} />
                  <div style={{ flex: 1, fontSize: 11, color: B.textDim, lineHeight: 1.6 }}>
                    <div style={{ color: B.green, fontWeight: 700, fontSize: 9, marginBottom: 3, letterSpacing: 1 }}>SOLUTION</div>
                    {s.solution}
                  </div>
                </div>

                {showDetail === s.key && (
                  <div style={{
                    marginTop: 12, marginLeft: 52, padding: "10px 14px",
                    background: `${s.color}06`, borderRadius: 8, border: `1px solid ${s.color}12`,
                    fontSize: 11, color: B.textDim, lineHeight: 1.7,
                  }}>
                    ğŸ’¡ {s.detail}
                  </div>
                )}
              </div>
              {i < stages.length - 1 && (
                <div style={{ display: "flex", justifyContent: "center", padding: "4px 0" }}>
                  <div style={{ width: 2, height: 20, background: `linear-gradient(${stages[i].color}30, ${stages[i+1].color}30)` }} />
                </div>
              )}
            </div>
          ))}
        </div>
      </Card>

      <Card>
        <STitle color={B.accent} sub="5ê°œë…„ ì—°ì°¨ë³„ í•µì‹¬ ìˆ˜ì¹˜ ëª©í‘œ">KPI ë§¤íŠ¸ë¦­ìŠ¤</STitle>
        <div style={{ overflowX: "auto", borderRadius: 8, border: `1px solid ${B.border}` }}>
          <DataRow header color={B.accent} cells={[
            { text: "ì§€í‘œ", w: "120px" },
            { text: "1ì°¨" }, { text: "2ì°¨" }, { text: "3ì°¨" }, { text: "4ì°¨" }, { text: "5ì°¨" },
          ]} />
          {kpiData.map((row, i) => (
            <DataRow key={i} cells={[
              { text: row.label, w: "120px" },
              ...row.vals.map((v, j) => ({
                text: v, mono: true,
                highlight: row.highlight && j === 4 ? B.green : undefined,
              })),
            ]} />
          ))}
        </div>
      </Card>
    </div>
  );
}

/* â•â•â• 2. Triple-Wall QBQ ì„¤ê³„ ê·œì¹™ â•â•â• */
function TripleWallSection() {
  const [activeWall, setActiveWall] = useState(1);

  const walls = [
    {
      num: 1, name: "ì™¸ê³½ ê²©ë¦¬ë²½", color: B.cyan,
      pdk: "STI ê¸°ë°˜ isolation moat(íƒ€ì¼ ê²½ê³„) ë° keep-out êµ¬ì¡°",
      knobs: "moat í­/ê°„ê²©, íƒ€ì¼ pitch, ê¸ˆì†/ë¹„ì•„ keep-out",
      kpi: "íƒ€ì¼ ê°„ ê¸°íŒ ì»¤í”Œë§/í¬ë¡œìŠ¤í† í¬ ê°ì†Œ, overlay ê¸°ì¤€ ê²½ê³„ í™•ë³´",
    },
    {
      num: 2, name: "ì „ê¸°ì  ì‹¤ë“œì›°", color: B.green,
      pdk: "T3(True Triple Well) isolationìœ¼ë¡œ back-gate/ì›° ë„ë©”ì¸ ë¶„ë¦¬ + quiet guard ring + ì „ìš© ë¦¬í„´/ì‹¤ë“œ",
      knobs: "V_BG_i(íƒ€ì¼ back-gate), V_well_shield, guard ring bias(V_SSQ), ë¼ì¸ RC í•„í„°/ì°¨í",
      kpi: "|âˆ‡E| ë° 1/f ì „í•˜ì¡ìŒ ë¯¼ê°ë„ ì €ê°, detune/tune-in ì•ˆì •, 77K DD-IC ê·¼ì ‘ ë…¸ì´ì¦ˆ ë‚´ì„± í–¥ìƒ",
    },
    {
      num: 3, name: "BQB-B ë§¤ë¦½ ì¥ë²½", color: B.purple,
      pdk: "BQB-B(ë§¤ë¦½ ì¥ë²½/í…œí”Œë¦¿ ì¸µ)ë¡œ í™•ì‚° ì°¨ë‹¨ ë° ê¹Šì´ ì°½ ì •ì˜, implant window self-alignment",
      knobs: "ì¥ë²½ ê¹Šì´/ë‘ê»˜, ê°œêµ¬ CD/í˜•ìƒ, ì €ì—´ì˜ˆì‚° í™œì„±í™” íŒŒí˜•",
      kpi: "ì±„ë„ë§ tail/outlier ì–µì œ, Ïƒ_xy/Ïƒ_z ê³µì •ì°½ í™•ëŒ€, BEOL/ê¸ˆì† ì—´ì˜ˆì‚° ì•ˆì „ì„± ê°•í™”",
    },
  ];

  const w = walls[activeWall - 1];

  return (
    <div>
      <Card glow={B.green}>
        <STitle color={B.green} sub="STI moat + T3 ì‹¤ë“œì›° + BQB-B ë§¤ë¦½ ì¥ë²½ì˜ 3ì¤‘ ê²©ë¦¬">
          Triple-Wall QBQ êµ¬ì¡°
        </STitle>

        {/* Wall diagram */}
        <div style={{ position: "relative", height: 140, background: B.bg, borderRadius: 12, border: `1px solid ${B.border}`, overflow: "hidden", marginBottom: 16 }}>
          {/* Wall-1: outermost */}
          <div style={{
            position: "absolute", inset: "10px 12px",
            border: `2px solid ${B.cyan}${activeWall===1?"60":"20"}`,
            borderRadius: 12, transition: "all 0.3s",
            boxShadow: activeWall===1 ? `0 0 16px ${B.cyan}15` : "none",
          }}>
            <div style={{ position: "absolute", top: 4, left: 8, fontSize: 9, color: B.cyan, fontWeight: 700, fontFamily: mono }}>W1: STI Moat</div>
          </div>
          {/* Wall-2: middle */}
          <div style={{
            position: "absolute", inset: "28px 32px",
            border: `2px solid ${B.green}${activeWall===2?"60":"20"}`,
            borderRadius: 10, transition: "all 0.3s",
            boxShadow: activeWall===2 ? `0 0 16px ${B.green}15` : "none",
          }}>
            <div style={{ position: "absolute", top: 4, left: 8, fontSize: 9, color: B.green, fontWeight: 700, fontFamily: mono }}>W2: T3 Shield</div>
          </div>
          {/* Wall-3: innermost */}
          <div style={{
            position: "absolute", inset: "46px 52px",
            border: `2px solid ${B.purple}${activeWall===3?"60":"20"}`,
            borderRadius: 8, transition: "all 0.3s",
            background: `${B.purple}${activeWall===3?"08":"03"}`,
            boxShadow: activeWall===3 ? `0 0 16px ${B.purple}15` : "none",
          }}>
            <div style={{ position: "absolute", top: 4, left: 8, fontSize: 9, color: B.purple, fontWeight: 700, fontFamily: mono }}>W3: BQB-B</div>
          </div>
          {/* Qubit core */}
          <div style={{
            position: "absolute", top: "50%", left: "50%", transform: "translate(-50%, -50%)",
            width: 24, height: 24, borderRadius: "50%",
            background: `radial-gradient(circle, ${B.accent}60, ${B.accent}20)`,
            boxShadow: `0 0 12px ${B.accent}40`,
          }} />
          <div style={{ position: "absolute", top: "50%", left: "50%", transform: "translate(-50%, calc(-50% + 18px))", fontSize: 8, fontWeight: 700, color: B.accent, fontFamily: mono }}>QUBIT</div>
        </div>

        {/* Wall selector */}
        <div style={{ display: "flex", gap: 6, marginBottom: 16 }}>
          {walls.map(wl => (
            <button key={wl.num} onClick={() => setActiveWall(wl.num)} style={{
              flex: 1, padding: "10px 8px", borderRadius: 10, cursor: "pointer",
              background: activeWall === wl.num ? `${wl.color}10` : "transparent",
              border: `1px solid ${activeWall === wl.num ? wl.color : B.border}`,
              color: activeWall === wl.num ? wl.color : B.textMuted,
              fontSize: 11, fontWeight: 700, transition: "all 0.2s",
            }}>
              Wall-{wl.num}: {wl.name}
            </button>
          ))}
        </div>

        {/* Detail */}
        <div style={{
          background: `${w.color}04`, borderRadius: 12, border: `1px solid ${w.color}15`,
          padding: 18, transition: "all 0.3s",
        }}>
          {[
            { label: "PDK êµ¬í˜„", value: w.pdk, badge: "PDK" },
            { label: "ì„¤ê³„ ë…¸ë¸Œ", value: w.knobs, badge: "KNOB" },
            { label: "KPI ê¸°ì—¬", value: w.kpi, badge: "KPI" },
          ].map((item, i) => (
            <div key={i} style={{ marginBottom: i < 2 ? 14 : 0 }}>
              <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 4 }}>
                <Badge color={w.color}>{item.badge}</Badge>
                <span style={{ fontSize: 11, fontWeight: 700, color: w.color }}>{item.label}</span>
              </div>
              <div style={{ fontSize: 12, color: B.textDim, lineHeight: 1.7, marginLeft: 4 }}>{item.value}</div>
            </div>
          ))}
        </div>
      </Card>

      <Card>
        <STitle color={B.green} sub="DC ë°”ì´ì–´ìŠ¤, ë¦¬í„´ ê²½ë¡œ, ìº˜ë¦¬ë¸Œë ˆì´ì…˜">ë°”ì´ì–´ìŠ¤ ìš´ìš© ê·œì¹™</STitle>
        {[
          { label: "V_BG_i (íƒ€ì¼ back-gate)", rules: ["DCë¡œ ì²œì²œíˆ ìŠ¤ìœ•/ê³ ì • (ë™ì  ìŠ¤ìœ„ì¹­ ì§€ì–‘)", "77K ìŠ¤í…Œì´ì§€ì—ì„œ RC ì €ì—­í†µê³¼ í•„í„°ë¡œ ë…¸ì´ì¦ˆ ìœ ì… ì°¨ë‹¨"], color: B.cyan },
          { label: "T3 ì‹¤ë“œì›° + guard ring", rules: ["quiet reference(V_SSQ)ì— ì—°ê²°", "DD-IC ìŠ¤ìœ„ì¹­ ì „ë¥˜ ë¦¬í„´ì´ Q ì£¼ë³€ìœ¼ë¡œ íë¥´ì§€ ì•Šë„ë¡ ê²©ë¦¬"], color: B.green },
          { label: "íƒ€ì¼ ë‹¨ìœ„ V_BG_i ë¶„í• ", rules: ["detune/tune-in ì„ íƒì„± ë° ì „í•˜í™˜ê²½ íŠ¸ë¦¼ì„ ê³µí†µëª¨ë“œí™”", "ë°°ì—´ í™•ì¥ ì‹œ ìº˜ë¦¬ë¸Œë ˆì´ì…˜ í…Œì´ë¸” ì¬ì‚¬ìš©ì„± í–¥ìƒ"], color: B.purple },
        ].map((b, i) => (
          <div key={i} style={{
            background: `${b.color}04`, borderRadius: 10, border: `1px solid ${b.color}12`,
            padding: "12px 14px", marginBottom: i < 2 ? 8 : 0,
          }}>
            <div style={{ fontSize: 12, fontWeight: 800, color: b.color, fontFamily: mono, marginBottom: 6 }}>{b.label}</div>
            {b.rules.map((r, j) => (
              <div key={j} style={{ display: "flex", gap: 8, marginBottom: j < b.rules.length - 1 ? 4 : 0 }}>
                <span style={{ color: b.color, fontSize: 8, marginTop: 5 }}>â—</span>
                <span style={{ fontSize: 11, color: B.textDim, lineHeight: 1.6 }}>{r}</span>
              </div>
            ))}
          </div>
        ))}
      </Card>
    </div>
  );
}

/* â•â•â• 3. DD-IC íšŒë¡œ ë¸”ë¡ ì•„í‚¤í…ì²˜ â•â•â• */
function DDICSection() {
  const [activeBlock, setActiveBlock] = useState(null);

  const blocks = [
    { id: "pll", label: "LO-PLL", sub: "ê¸°ì¤€ í´ëŸ­ 25-200MHz", color: B.orange, detail: "ìœ„ìƒì¡ìŒ â‰¤-100 dBc/Hz @1MHz offset. ì˜¨ë„ ë³€ë™ì— ëŒ€í•œ ì£¼íŒŒìˆ˜ ì•ˆì •ì„± í™•ë³´ê°€ í•µì‹¬." },
    { id: "dco", label: "DCO", sub: "ìºë¦¬ì–´ ìƒì„±", color: B.cyan, detail: "ë””ì§€í„¸ ì œì–´ ë°œì§„ê¸°. I/Q ì—…ì»¨ë²„ì „ìœ¼ë¡œ ESR ëŒ€ì—­(28-42 GHz) ì»¤ë²„. DRAG/ê°€ìš°ì‹œì•ˆ íŒŒí˜• ì§€ì›." },
    { id: "seq", label: "ì´ë²¤íŠ¸ ì‹œí€€ì„œ", sub: "ë£¨í”„/ë¶„ê¸° ì œì–´", color: B.green, detail: "DD ì‹œí€€ìŠ¤(CPMG/XY) íŒ¨í„´ì„ ë©”ëª¨ë¦¬ì—ì„œ ì½ì–´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‹¤í–‰. ì¡°ê±´ë¶€ ë¶„ê¸° ê°€ëŠ¥." },
    { id: "tdc", label: "ì˜¨ì¹© TDC", sub: "ìŠ¤í ì¸¡ì •/ë³´ì •", color: B.purple, detail: "ì±„ë„ ê°„ ìŠ¤íë¥¼ í”¼ì½”ì´ˆ ì •ë°€ë„ë¡œ ì¸¡ì •í•˜ê³  Delay-trimìœ¼ë¡œ ì‹¤ì‹œê°„ ë³´ì •." },
    { id: "broadcast", label: "Broadcast+ì„ íƒ", sub: "O(âˆšN) ìŠ¤ì¼€ì¼ë§", color: B.accent, detail: "ê³µìœ  í„ìŠ¤ ë²„ìŠ¤ë¡œ ì „ì²´ ë°°ì—´ì— DD ì‹œí€€ìŠ¤ ë™ì‹œ ë¶„ë°°. BQBì˜ detune/tune-inìœ¼ë¡œ ì„ íƒì  êµ¬ë™." },
  ];

  const specData = [
    { label: "ì±„ë„ ìˆ˜", vals: ["â‰¤32", "â‰¥64", "â‰¥128", "256-class", "256-class"] },
    { label: "ìŠ¤í (RMS)", vals: ["â‰¤50ps", "â‰¤20ps", "â‰¤10ps", "â‰¤5ps", "â‰¤5ps"] },
    { label: "ì „ë ¥", vals: ["â€”", "â€”", "â€”", "â‰¤5mW/ch", "â‰¤0.8W/chip"] },
  ];

  return (
    <div>
      <Card glow={B.orange}>
        <STitle color={B.orange} sub="22nm FD-SOI ê¸°ë°˜ 77K DD Pulse Generator IC">
          íšŒë¡œ ë¸”ë¡ ì•„í‚¤í…ì²˜
        </STitle>

        <div style={{ display: "flex", flexDirection: "column", gap: 6, marginBottom: 20 }}>
          {blocks.map(b => (
            <div key={b.id}
              onClick={() => setActiveBlock(activeBlock === b.id ? null : b.id)}
              style={{
                background: activeBlock === b.id ? `${b.color}08` : B.bg,
                border: `1px solid ${activeBlock === b.id ? `${b.color}25` : B.border}`,
                borderRadius: 10, padding: "12px 14px", cursor: "pointer",
                transition: "all 0.2s",
              }}
            >
              <div style={{ display: "flex", alignItems: "center", gap: 10 }}>
                <div style={{
                  width: 8, height: 8, borderRadius: "50%",
                  background: b.color, boxShadow: `0 0 6px ${b.color}50`,
                }} />
                <div style={{ flex: 1 }}>
                  <span style={{ fontSize: 13, fontWeight: 800, color: b.color, fontFamily: mono }}>{b.label}</span>
                  <span style={{ fontSize: 11, color: B.textMuted, marginLeft: 8 }}>{b.sub}</span>
                </div>
                <span style={{ fontSize: 10, color: B.textMuted, transition: "transform 0.2s", transform: activeBlock === b.id ? "rotate(180deg)" : "none" }}>â–¾</span>
              </div>
              {activeBlock === b.id && (
                <div style={{ marginTop: 10, marginLeft: 18, fontSize: 12, color: B.textDim, lineHeight: 1.7, padding: "8px 12px", background: `${b.color}06`, borderRadius: 8 }}>
                  {b.detail}
                </div>
              )}
            </div>
          ))}
        </div>
      </Card>

      <Card>
        <STitle color={B.orange} sub="ì—°ì°¨ë³„ ì±„ë„Â·ìŠ¤íÂ·ì „ë ¥ ëª©í‘œ">DD-IC í•µì‹¬ ìŠ¤í™</STitle>
        <div style={{ borderRadius: 8, border: `1px solid ${B.border}`, overflow: "hidden" }}>
          <DataRow header color={B.orange} cells={[
            { text: "ìŠ¤í™", w: "100px" },
            { text: "1ì°¨" }, { text: "2ì°¨" }, { text: "3ì°¨" }, { text: "4ì°¨" }, { text: "5ì°¨" },
          ]} />
          {specData.map((row, i) => (
            <DataRow key={i} cells={[
              { text: row.label, w: "100px" },
              ...row.vals.map(v => ({ text: v, mono: true })),
            ]} />
          ))}
        </div>
      </Card>

      <Card>
        <STitle color={B.orange}>ì œì–´ íŒŒí˜• ìŠ¤í™</STitle>
        <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 6 }}>
          {[
            { label: "ESR ëŒ€ì—­", value: "28â€“42 GHz", color: B.orange },
            { label: "NMR ëŒ€ì—­", value: "35â€“84 MHz", color: B.cyan },
            { label: "FDM ê°„ê²©", value: "â‰¥5 MHz", color: B.green },
            { label: "TDM ìŠ¤ìœ„ì¹­", value: "â‰¤1 Î¼s", color: B.purple },
            { label: "ì±„ë„ ê²©ë¦¬ë„", value: "â‰¥40 dB", color: B.accent },
            { label: "íŒŒí˜•", value: "DRAG/ê°€ìš°ì‹œì•ˆ", color: B.textDim },
          ].map((s, i) => (
            <div key={i} style={{ background: B.bg, borderRadius: 8, border: `1px solid ${B.border}`, padding: "10px 12px", textAlign: "center" }}>
              <div style={{ fontSize: 16, fontWeight: 900, color: s.color, fontFamily: mono }}>{s.value}</div>
              <div style={{ fontSize: 9, color: B.textMuted, marginTop: 4, fontWeight: 700 }}>{s.label}</div>
            </div>
          ))}
        </div>
      </Card>
    </div>
  );
}

/* â•â•â• 4. Split-Stage íŒ¨í‚¤ì§• ì—´ì„¤ê³„ â•â•â• */
function ThermalSection() {
  return (
    <div>
      <Card glow={B.cyan}>
        <STitle color={B.cyan} sub="1st Stage(50-80K) â†” 2nd Stage(4K) ì—´ì  ë¶„ë¦¬">
          2-Deck Split-Jig êµ¬ì¡°
        </STitle>

        {/* 77K Deck */}
        <div style={{
          background: `${B.orange}06`, borderRadius: 12, border: `1px solid ${B.orange}20`,
          padding: 16, marginBottom: 8,
        }}>
          <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 10 }}>
            <Badge color={B.orange}>77K DECK</Badge>
            <span style={{ fontSize: 11, fontWeight: 700, color: B.orange }}>1st Stage (50-80K)</span>
          </div>
          <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 6, fontSize: 11, color: B.textDim, lineHeight: 1.6 }}>
            <div>âš¡ DD-IC Module</div>
            <div>ğŸŒ¡ï¸ ì˜¨ë„ì„¼ì„œ + íˆí„°</div>
            <div>ğŸ“ Heat Spreader</div>
            <div>âš¡ â‰¤ 0.8W/chip</div>
          </div>
        </div>

        {/* Connector */}
        <div style={{ display: "flex", alignItems: "center", justifyContent: "center", gap: 8, padding: "6px 0" }}>
          <div style={{ height: 2, flex: 1, background: `linear-gradient(90deg, transparent, ${B.textMuted}30, transparent)` }} />
          <div style={{ fontSize: 9, color: B.textMuted, fontFamily: mono, textAlign: "center", lineHeight: 1.4 }}>
            Cryo-Flex Cable<br/>G10 Frame (â‰¤0.3 W/mÂ·K)
          </div>
          <div style={{ height: 2, flex: 1, background: `linear-gradient(90deg, transparent, ${B.textMuted}30, transparent)` }} />
        </div>

        {/* 4K Deck */}
        <div style={{
          background: `${B.cyan}06`, borderRadius: 12, border: `1px solid ${B.cyan}20`,
          padding: 16, marginTop: 8,
        }}>
          <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 10 }}>
            <Badge color={B.cyan}>4K DECK</Badge>
            <span style={{ fontSize: 11, fontWeight: 700, color: B.cyan }}>2nd Stage (4K)</span>
          </div>
          <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 6, fontSize: 11, color: B.textDim, lineHeight: 1.6 }}>
            <div>âš›ï¸ QPU Module</div>
            <div>ğŸŒ¡ï¸ PID íˆí„° (mK ì œì–´)</div>
            <div>ğŸ“ OFHC Cu Base</div>
            <div>ğŸ“¡ NbTi ë™ì¶• ì¼€ì´ë¸”</div>
          </div>
        </div>

        <div style={{
          marginTop: 16, padding: "12px 14px",
          background: `${B.accent}06`, borderRadius: 10, border: `1px solid ${B.accent}12`,
          fontSize: 12, color: B.textDim, lineHeight: 1.7,
        }}>
          ğŸ’¡ <strong style={{ color: B.accent }}>í•µì‹¬:</strong> Broadcast+ì„ íƒ êµ¬ë™ìœ¼ë¡œ ë¼ì¸ ìˆ˜ O(âˆšN) â†’ ì¼€ì´ë¸” ì „ë„ì—´â†“ â†’ 4K ìœ ì§€ ìš©ì´
        </div>
      </Card>

      <Card>
        <STitle color={B.cyan} sub="300K â†’ 4K ì „ì²´ ê²½ë¡œ">ì‹ í˜¸ ë¬´ê²°ì„±(SI) ìŠ¤í™</STitle>
        <div style={{ borderRadius: 8, border: `1px solid ${B.border}`, overflow: "hidden" }}>
          <DataRow header color={B.cyan} cells={[
            { text: "SI í•­ëª©", w: "130px" }, { text: "3ì°¨" }, { text: "4ì°¨" }, { text: "5ì°¨" },
          ]} />
          {[
            { label: "S11 (ë°˜ì‚¬ì†ì‹¤)", vals: ["ì²´ê³„ êµ¬ì¶•", "â‰¤-20dB @1GHz", "ê·œê²© ë™ê²°"] },
            { label: "í¬ë¡œìŠ¤í† í¬", vals: ["â€”", "â‰¤-30dB @1GHz", "ê·œê²© ë™ê²°"] },
            { label: "ì„í”¼ë˜ìŠ¤", vals: ["50Î© Â±10%", "ê²€ì¦", "300Kâ†’4K ì•ˆì •"] },
            { label: "ì—´ì‚¬ì´í´", vals: ["â€”", "â€”", "â‰¥10íšŒ í•©ê²©"] },
          ].map((row, i) => (
            <DataRow key={i} cells={[
              { text: row.label, w: "130px" },
              ...row.vals.map(v => ({ text: v, mono: true })),
            ]} />
          ))}
        </div>
      </Card>
    </div>
  );
}

/* â•â•â• 5. íë£¨í”„ ìˆ˜ë ´ â•â•â• */
function ClosedLoopSection() {
  return (
    <div>
      <Card glow={B.purple}>
        <STitle color={B.purple} sub="ì‚¬ì´íŠ¸ ìˆ˜ìœ¨ì˜ ê±°ë“­ì œê³±ì´ ë°°ì—´ ìˆ˜ìœ¨ì„ ê²°ì •í•œë‹¤">
          ìˆ˜ìœ¨ ê±°ë“­ì œê³± ê´€ê³„
        </STitle>

        <div style={{ textAlign: "center", padding: "8px 0 16px", fontFamily: "serif", fontSize: 18, color: B.text, letterSpacing: 2 }}>
          Y<sub>array</sub> = p<sub>site</sub><sup style={{ color: B.red }}>N</sup>
        </div>

        <div style={{ display: "flex", flexDirection: "column", gap: 6, marginBottom: 16 }}>
          {[
            { p: "0.990", y: "7.6%", bar: 7.6, c: B.red },
            { p: "0.995", y: "27.7%", bar: 27.7, c: B.orange },
            { p: "0.999", y: "77.4%", bar: 77.4, c: B.green },
          ].map((r, i) => (
            <div key={i} style={{ display: "flex", alignItems: "center", gap: 8 }}>
              <div style={{ width: 65, fontSize: 11, fontWeight: 700, color: B.textDim, textAlign: "right", fontFamily: mono }}>p={r.p}</div>
              <div style={{ flex: 1, height: 18, background: B.bg, borderRadius: 4, overflow: "hidden", border: `1px solid ${B.border}` }}>
                <div style={{ width: `${r.bar}%`, height: "100%", background: `${r.c}35`, borderRadius: 3 }} />
              </div>
              <div style={{ width: 50, fontSize: 12, fontWeight: 800, color: r.c, fontFamily: mono }}>{r.y}</div>
            </div>
          ))}
        </div>
        <div style={{ fontSize: 10, color: B.textMuted, textAlign: "center" }}>N = 256 (16Ã—16 ë°°ì—´) ê¸°ì¤€ Â· die-map ì¬ë§¤í•‘ìœ¼ë¡œ ì‹¤íš¨ ìˆ˜ìœ¨ ì¶”ê°€ ìƒìŠ¹ ê°€ëŠ¥</div>
      </Card>

      <Card>
        <STitle color={B.purple} sub="3ë‹¨ê³„ ë°˜ë³µìœ¼ë¡œ ìˆ˜ìœ¨ ìˆ˜ë ´">Generate â†’ Verify â†’ Correct</STitle>
        {[
          { step: "Generate", icon: "âš›ï¸", desc: "BQB í…œí”Œë¦¿ ê¸°ë°˜ 3D ì¢Œí‘œì— íë¹„íŠ¸ ìƒì„±", tools: "FIB ë‹¨ì¼ ì´ì˜¨ ì£¼ì…, ì €ì—´ì˜ˆì‚° í™œì„±í™”, ALD/ìˆ˜ì†Œ íŒ¨ì‹œë² ì´ì…˜", color: B.cyan },
          { step: "Verify", icon: "ğŸ”¬", desc: "3D ë‹¨ì¸µì´¬ì˜ + ì „ê¸°/ê´‘í•™ ë§µìœ¼ë¡œ ê²€ì¦", tools: "nano-CT, XRD-CT, SIMS/TEM, 77K-4K ì „ê¸° ë§µ", color: B.green },
          { step: "Correct", icon: "ğŸ”§", desc: "ê³µì • ë ˆì‹œí”¼ ë° DD-IC ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ë³´ì •", tools: "ë³´ì • í…Œì´ë¸” ê°±ì‹ , split-lot ìµœì í™”, die-map ì¬ë§¤í•‘", color: B.orange },
        ].map((s, i) => (
          <div key={i}>
            <div style={{
              background: `${s.color}04`, borderRadius: 10, border: `1px solid ${s.color}12`,
              padding: "14px 16px",
            }}>
              <div style={{ display: "flex", alignItems: "center", gap: 10, marginBottom: 8 }}>
                <span style={{ fontSize: 18 }}>{s.icon}</span>
                <div>
                  <div style={{ fontSize: 13, fontWeight: 800, color: s.color, fontFamily: mono }}>{s.step}</div>
                  <div style={{ fontSize: 11, color: B.textDim }}>{s.desc}</div>
                </div>
              </div>
              <div style={{ fontSize: 10, color: B.textMuted, marginLeft: 28, lineHeight: 1.6, fontStyle: "italic" }}>{s.tools}</div>
            </div>
            {i < 2 && (
              <div style={{ display: "flex", justifyContent: "center", padding: "3px 0" }}>
                <span style={{ fontSize: 12, color: B.textMuted }}>â†“</span>
              </div>
            )}
          </div>
        ))}
        <div style={{
          display: "flex", justifyContent: "center", marginTop: 12,
          padding: "8px 0", borderTop: `1px dashed ${B.purple}20`,
        }}>
          <span style={{ fontSize: 10, color: B.purple, fontWeight: 700, letterSpacing: 2 }}>â†» LOOP UNTIL CONVERGE</span>
        </div>
      </Card>

      <Card>
        <STitle color={B.purple}>í›„ê³µì • Q í˜•ì„± í”Œë¡œìš°</STitle>
        {[
          "íŒŒìš´ë”ë¦¬ ì‚°ì¶œë¬¼: BQB-B + ì œì–´ ê²Œì´íŠ¸/ì„¼ì„œ + DD-IC ë™ì‹œ ì œì‘",
          "í›„ê³µì • ë§ˆìŠ¤í¬: BQB implant window/ì ‘ê·¼ì°½ (EBL/DUV)",
          "ë‹¨ì¼ ì´ì˜¨/ê²°í•¨ ìƒì„±: FIB direct-write counted implantation",
          "ì €ì—´ì˜ˆì‚° í™œì„±í™”: msê¸‰ í”Œë˜ì‹œ/ë ˆì´ì €/ìŠ¤íŒŒì´í¬ ì–´ë‹ (BEOL ì´í•˜)",
          "íŒ¨ì‹œë² ì´ì…˜/ìº˜ë¦¬ë¸Œë ˆì´ì…˜: ALD/ìˆ˜ì†Œ ì²˜ë¦¬ â†’ ì €ì˜¨ bring-up â†’ die-map",
        ].map((step, i) => (
          <div key={i} style={{ display: "flex", gap: 10, marginBottom: 8 }}>
            <div style={{
              width: 24, height: 24, borderRadius: 6, flexShrink: 0,
              background: `${B.purple}10`, border: `1px solid ${B.purple}20`,
              display: "flex", alignItems: "center", justifyContent: "center",
              fontSize: 10, fontWeight: 900, color: B.purple, fontFamily: mono,
            }}>{i + 1}</div>
            <div style={{ fontSize: 11, color: B.textDim, lineHeight: 1.6, paddingTop: 3 }}>{step}</div>
          </div>
        ))}
      </Card>
    </div>
  );
}

/* â•â•â• 6. ì—°ì°¨ë³„ KPI â•â•â• */
function KPISection() {
  const [activeYear, setActiveYear] = useState(4);

  const years = [
    { yr: 1, trl: "3â†’3+", period: "'26.04~'26.12", title: "í”Œë«í¼ í™•ì • Â· ê¸°ì¤€ì„  í™•ë³´", color: B.textDim,
      items: ["BQB 3D ìœ„ì¹˜: â‰¤20nm (v0.5)", "Q í›„ê³µì •(FIB): â‰¤50nm (1Ïƒ), í™œì„±â‰¥32", "ì €ì—´ì˜ˆì‚°: Î”R/Râ‰¤10%", "DD-IC: spec v0.1, ì±„ë„â‰¤32, ìŠ¤íâ‰¤50ps"] },
    { yr: 2, trl: "3+â†’4", period: "'27.01~'27.12", title: "ìê°€ì •ë ¬ ì •ë°€í™” Â· ë™ì¼ì„± ì €ê°", color: B.cyan,
      items: ["BQB 3D ìœ„ì¹˜: â‰¤10nm (2Ïƒ)", "Q í›„ê³µì •: â‰¤35nm (1Ïƒ), í™œì„±â‰¥64, outlierâ‰¤5%", "ì €ì—´ì˜ˆì‚°: Î”R/Râ‰¤7%, ëˆ„ì„¤â‰¤1.5Ã—", "DD-IC: MPW í…Œì´í”„ì•„ì›ƒ, ì±„ë„â‰¥64"] },
    { yr: 3, trl: "4", period: "'28.01~'28.12", title: "2-qubit ì—°ê²° Â· íŒ¨í‚¤ì§• PoC", color: B.green,
      items: ["íŒ¨í‚¤ì§•/ì •ë ¬: â‰¤100nm (PoC)", "Q í›„ê³µì •: â‰¤25nm (1Ïƒ), í™œì„±â‰¥128, outlierâ‰¤3%", "ì €ì—´ì˜ˆì‚°: Î”R/Râ‰¤5%, 77K 1h ì•ˆì •", "DD-IC: bring-up, ì±„ë„â‰¥128, ìŠ¤íâ‰¤10ps"] },
    { yr: 4, trl: "4â†’5-", period: "'29.01~'29.12", title: "256-class í™•ì¥ Â· 3D íŒ¨í‚¤ì§•", color: B.orange,
      items: ["íŒ¨í‚¤ì§•/ì •ë ¬: â‰¤50nm", "Q í›„ê³µì •: â‰¤20nm (1Ïƒ), í™œì„±â‰¥256, outlierâ‰¤2%", "ì €ì—´ì˜ˆì‚°: Î”R/Râ‰¤3%, ì—´ì‚¬ì´í´ 10íšŒ", "DD-IC: broadcast+ì„ íƒ, 256-class, ìŠ¤íâ‰¤5ps"] },
    { yr: 5, trl: "5", period: "'30.01~'30.12", title: "TRL5 í†µí•© ì‹œì—° Â· ê·œê²© ë™ê²°", color: B.accent,
      items: ["ë°°ì—´: 16Ã—16 (256) / ë„ì „: 32Ã—32 (1024)", "outlier â‰¤1%, ì‚¬ì´íŠ¸ìˆ˜ìœ¨ â‰¥99%, ì–´ë ˆì´ìˆ˜ìœ¨ â‰¥70%", "F1q â‰¥0.999, F2q â‰¥0.99, T2 â‰¥1s", "DD-IC: 256-class, 24h ìë™ ìº˜ë¦¬ë¸Œë ˆì´ì…˜"] },
  ];

  const y = years[activeYear - 1];

  return (
    <div>
      <Card glow={B.orange}>
        <STitle color={B.orange} sub="31P ë„ë„ˆ ê¸°ë³¸í˜• ë§ˆì¼ìŠ¤í†¤">5ê°œë…„ KPI ì§„í™”</STitle>

        {/* Year selector */}
        <div style={{ display: "flex", gap: 4, marginBottom: 16 }}>
          {years.map(yr => (
            <button key={yr.yr} onClick={() => setActiveYear(yr.yr)} style={{
              flex: 1, padding: "10px 4px", borderRadius: 8, cursor: "pointer",
              background: activeYear === yr.yr ? `${yr.color}12` : B.bg,
              border: `1px solid ${activeYear === yr.yr ? yr.color : B.border}`,
              color: activeYear === yr.yr ? yr.color : B.textMuted,
              fontSize: 12, fontWeight: 800, fontFamily: mono,
              transition: "all 0.2s",
            }}>
              {yr.yr}ì°¨
            </button>
          ))}
        </div>

        {/* Active year detail */}
        <div style={{
          background: `${y.color}06`, borderRadius: 12, border: `1px solid ${y.color}18`,
          padding: 18,
        }}>
          <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 12 }}>
            <Badge color={y.color}>TRL {y.trl}</Badge>
            <span style={{ fontSize: 10, color: B.textMuted, fontFamily: mono }}>{y.period}</span>
          </div>
          <div style={{ fontSize: 14, fontWeight: 800, color: y.color, marginBottom: 14 }}>{y.title}</div>
          {y.items.map((item, i) => (
            <div key={i} style={{ display: "flex", gap: 8, marginBottom: i < y.items.length - 1 ? 8 : 0 }}>
              <span style={{ color: y.color, fontSize: 7, marginTop: 6 }}>â—†</span>
              <span style={{ fontSize: 12, color: B.textDim, lineHeight: 1.6, fontFamily: mono }}>{item}</span>
            </div>
          ))}
        </div>

        {/* Timeline bar */}
        <div style={{ display: "flex", gap: 2, marginTop: 16 }}>
          {years.map((yr, i) => (
            <div key={i} style={{
              flex: 1, height: 4, borderRadius: 2,
              background: i < activeYear ? yr.color : `${B.textMuted}20`,
              transition: "all 0.3s",
            }} />
          ))}
        </div>
      </Card>
    </div>
  );
}

/* â•â•â• 7. ìœ„í—˜ê´€ë¦¬ â•â•â• */
function RiskSection() {
  const [expandedRisk, setExpandedRisk] = useState(null);

  const risks = [
    { id: 0, title: "ìœ„ì¹˜ ì •ë°€ë„ ë¯¸ë‹¬", severity: "HIGH", color: B.red,
      response: "BQB êµ¬ì¡°/ì—´ì²˜ë¦¬ ì°½ ì¬ì„¤ê³„ + ë‹¤ì¤‘ ê³„ì¸¡ êµì°¨ê²€ì¦ìœ¼ë¡œ ì›ì¸ ë¶„í•´" },
    { id: 1, title: "ë™ì¼ì„±/ìŠ¤í™íŠ¸ëŸ´ ì•ˆì •ì„± ë¶€ì¡±", severity: "HIGH", color: B.red,
      response: "ì „í•˜íŠ¸ë© ì €ê°(ê³„ë©´/íŒ¨ì‹œë² ì´ì…˜) ë° ì‘ë ¥ ê´€ë¦¬ ê³µì • ë„ì…" },
    { id: 2, title: "T3 + Triple-Wall ì…€ ë¦¬ìŠ¤í¬", severity: "MED", color: B.orange,
      response: "test vehicle A/B ë¹„êµ(ë‹¨ì¼ë²½ vs Triple Wall)ë¡œ Dit/ì¡ìŒ/ë“œë¦¬í”„íŠ¸ ì •ëŸ‰í™”, ê³µì •ì°½ í•­ëª©ìœ¼ë¡œ í¬í•¨í•´ ì¡°ê¸° ìˆ˜ë ´" },
    { id: 3, title: "íŒ¨í‚¤ì§• ì •ë ¬ ì˜¤ì°¨", severity: "MED", color: B.orange,
      response: "ì–¼ë¼ì¸ ë§ˆí¬/ê³µì • ë³´ì • ë£¨í”„ + X-ray ê¸°ë°˜ ì •ë ¬ í”¼ë“œë°±" },
    { id: 4, title: "ì›¨ì´í¼ ë³¸ë”©/ì ì¸µ ë¦¬ìŠ¤í¬", severity: "MED", color: B.orange,
      response: "ë³¸ë”© test vehicle ê¸°ë°˜ ê³µì •ì°½ ì„¤ì •, IR/X-ray/ì´ˆìŒíŒŒ ê²€ì‚¬, 300K-77K ì—´ì‚¬ì´í´ ì‹ ë¢°ì„± í‰ê°€" },
    { id: 5, title: "77K DD-IC ì„±ëŠ¥/ì•ˆì •ì„±", severity: "MED", color: B.orange,
      response: "PVT/ì˜¨ë„ sweep ì„±ì ì„œ ë° ìë™ ë³´ì • ë¡œê·¸ë¡œ ê´€ë¦¬" },
    { id: 6, title: "ì–½í˜/ì—°ê²° ë°ëª¨ ì§€ì—°", severity: "LOW", color: B.yellow,
      response: "ì»¤í”Œë§ ë©”ì»¤ë‹ˆì¦˜(ì „ê¸°/ê´‘/ê³µì§„ê¸°) ë‹¤ì¤‘ ì˜µì…˜ ë³‘ë ¬ ì¶”ì§„" },
    { id: 7, title: "ì˜ˆì‚°/ì¼ì • ë³€ë™", severity: "LOW", color: B.yellow,
      response: "ì—°ì°¨ë³„ í•„ìˆ˜ ì‚°ì¶œë¬¼ ìµœì†Œ ì„¸íŠ¸ ì •ì˜ ë° ë‹¨ê³„ ê²Œì´íŒ…(Gate) ìš´ì˜" },
  ];

  return (
    <div>
      <Card glow={B.red}>
        <STitle color={B.red} sub="8ëŒ€ ê¸°ìˆ  ë¦¬ìŠ¤í¬ + ì¡°ê¸° ê²€ì¦ ì „ëµ">ìœ„í—˜ê´€ë¦¬ ë° ëŒ€ì‘ì „ëµ</STitle>
        <div style={{ display: "flex", flexDirection: "column", gap: 6 }}>
          {risks.map(r => (
            <div key={r.id}
              onClick={() => setExpandedRisk(expandedRisk === r.id ? null : r.id)}
              style={{
                background: expandedRisk === r.id ? `${r.color}06` : B.bg,
                border: `1px solid ${expandedRisk === r.id ? `${r.color}20` : B.border}`,
                borderRadius: 10, padding: "12px 14px", cursor: "pointer",
                transition: "all 0.2s",
              }}
            >
              <div style={{ display: "flex", alignItems: "center", gap: 10 }}>
                <Badge color={r.color}>{r.severity}</Badge>
                <span style={{ fontSize: 12, fontWeight: 700, color: B.text, flex: 1 }}>{r.title}</span>
                <span style={{ fontSize: 10, color: B.textMuted, transition: "transform 0.2s", transform: expandedRisk === r.id ? "rotate(180deg)" : "none" }}>â–¾</span>
              </div>
              {expandedRisk === r.id && (
                <div style={{
                  marginTop: 10, padding: "10px 12px",
                  background: `${B.green}06`, borderRadius: 8, border: `1px solid ${B.green}12`,
                  fontSize: 12, color: B.textDim, lineHeight: 1.7,
                }}>
                  <span style={{ color: B.green, fontWeight: 700 }}>ëŒ€ì‘:</span> {r.response}
                </div>
              )}
            </div>
          ))}
        </div>
      </Card>
    </div>
  );
}

/* â•â•â• ë©”ì¸ ë Œë” â•â•â• */
const currentSection = sections.find(s => s.id === activeSection) || sections[0];

const renderSection = () => {
  switch (activeSection) {
    case "overview": return <OverviewSection />;
    case "error-budget": return <ErrorBudgetSection />;
    case "triple-wall": return <TripleWallSection />;
    case "dd-ic": return <DDICSection />;
    case "thermal": return <ThermalSection />;
    case "closed-loop": return <ClosedLoopSection />;
    case "kpi": return <KPISection />;
    case "risk": return <RiskSection />;
    default: return <OverviewSection />;
  }
};

return (
  <div style={{ minHeight: "100vh", background: B.bg, fontFamily: font, color: B.text }}>
    {/* Background */}
    <div style={{ position: "fixed", inset: 0, zIndex: 0, pointerEvents: "none", overflow: "hidden" }}>
      <div style={{
        position: "absolute", inset: 0,
        backgroundImage: `linear-gradient(${B.accent}04 1px, transparent 1px), linear-gradient(90deg, ${B.accent}04 1px, transparent 1px)`,
        backgroundSize: "80px 80px",
      }} />
      <div style={{ position: "absolute", top: -200, left: "30%", width: 500, height: 500, borderRadius: "50%", background: `radial-gradient(circle, ${B.accent}04, transparent 70%)`, filter: "blur(40px)" }} />
      <div style={{ position: "absolute", bottom: -200, right: "20%", width: 400, height: 400, borderRadius: "50%", background: `radial-gradient(circle, ${B.green}03, transparent 70%)`, filter: "blur(40px)" }} />
    </div>

    <div style={{ position: "relative", zIndex: 1 }}>
      {/* Header */}
      <div style={{ padding: "24px 16px 0", borderBottom: `1px solid ${B.border}` }}>
        <div style={{ maxWidth: 700, margin: "0 auto" }}>
          <div style={{ fontSize: 9, fontWeight: 800, color: B.accent, letterSpacing: 4, marginBottom: 6 }}>ENGINEERING REFERENCE</div>
          <div style={{ fontSize: 22, fontWeight: 900, color: B.text, marginBottom: 12 }}>BQB ê³ ê¸‰ ê°€ì´ë“œ</div>

          {/* Section tabs */}
          <div style={{ display: "flex", gap: 2, overflowX: "auto", paddingBottom: 0 }}>
            {sections.map(s => (
              <button key={s.id} onClick={() => setActiveSection(s.id)}
                style={{
                  padding: "8px 12px", cursor: "pointer", whiteSpace: "nowrap",
                  background: "transparent",
                  border: "none",
                  borderBottom: `2px solid ${activeSection === s.id ? s.color : "transparent"}`,
                  color: activeSection === s.id ? s.color : B.textMuted,
                  fontSize: 11, fontWeight: activeSection === s.id ? 800 : 500,
                  transition: "all 0.2s",
                  display: "flex", alignItems: "center", gap: 4,
                }}
              >
                <span style={{ fontSize: 12 }}>{s.icon}</span>
                {s.label}
              </button>
            ))}
          </div>
        </div>
      </div>

      {/* Content */}
      <div style={{ maxWidth: 700, margin: "0 auto", padding: "20px 16px 80px" }}>
        {renderSection()}
      </div>
    </div>
  </div>
);

}


ReactDOM.render(React.createElement(App), document.getElementById("root"));
</script>
</body>
</html>